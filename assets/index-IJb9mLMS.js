const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./assets/browserAll-DzGzDtuO.js","./assets/webworkerAll-BbhzvHxR.js","./assets/colorToUniform-Bica9aFn.js","./assets/WebGPURenderer-DavqKsrd.js","./assets/SharedSystems-BAPYcYSh.js","./assets/WebGLRenderer-BT8USeuB.js"])))=>i.map(i=>d[i]);
var dy=Object.defineProperty;var hy=(t,e,s)=>e in t?dy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var pl=(t,e,s)=>hy(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();function Fu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tp={exports:{}},zo={},sp={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ki=Symbol.for("react.element"),fy=Symbol.for("react.portal"),py=Symbol.for("react.fragment"),my=Symbol.for("react.strict_mode"),gy=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),yy=Symbol.for("react.context"),vy=Symbol.for("react.forward_ref"),by=Symbol.for("react.suspense"),wy=Symbol.for("react.memo"),Sy=Symbol.for("react.lazy"),lh=Symbol.iterator;function _y(t){return t===null||typeof t!="object"?null:(t=lh&&t[lh]||t["@@iterator"],typeof t=="function"?t:null)}var np={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rp=Object.assign,ip={};function Mr(t,e,s){this.props=t,this.context=e,this.refs=ip,this.updater=s||np}Mr.prototype.isReactComponent={};Mr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ap(){}ap.prototype=Mr.prototype;function Hu(t,e,s){this.props=t,this.context=e,this.refs=ip,this.updater=s||np}var Gu=Hu.prototype=new ap;Gu.constructor=Hu;rp(Gu,Mr.prototype);Gu.isPureReactComponent=!0;var ch=Array.isArray,op=Object.prototype.hasOwnProperty,zu={current:null},lp={key:!0,ref:!0,__self:!0,__source:!0};function cp(t,e,s){var n,r={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)op.call(e,n)&&!lp.hasOwnProperty(n)&&(r[n]=e[n]);var o=arguments.length-2;if(o===1)r.children=s;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:Ki,type:t,key:i,ref:a,props:r,_owner:zu.current}}function ky(t,e){return{$$typeof:Ki,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $u(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ki}function Cy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var uh=/\/+/g;function ml(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cy(""+t.key):e.toString(36)}function Xa(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ki:case fy:a=!0}}if(a)return a=t,r=r(a),t=n===""?"."+ml(a,0):n,ch(r)?(s="",t!=null&&(s=t.replace(uh,"$&/")+"/"),Xa(r,e,s,"",function(u){return u})):r!=null&&($u(r)&&(r=ky(r,s+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(uh,"$&/")+"/")+t)),e.push(r)),1;if(a=0,n=n===""?".":n+":",ch(t))for(var o=0;o<t.length;o++){i=t[o];var c=n+ml(i,o);a+=Xa(i,e,s,c,r)}else if(c=_y(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=n+ml(i,o++),a+=Xa(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function da(t,e,s){if(t==null)return t;var n=[],r=0;return Xa(t,n,"","",function(i){return e.call(s,i,r++)}),n}function My(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},qa={transition:null},Ny={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:qa,ReactCurrentOwner:zu};function up(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:da,forEach:function(t,e,s){da(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return da(t,function(){e++}),e},toArray:function(t){return da(t,function(e){return e})||[]},only:function(t){if(!$u(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=Mr;J.Fragment=py;J.Profiler=gy;J.PureComponent=Hu;J.StrictMode=my;J.Suspense=by;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ny;J.act=up;J.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=rp({},t.props),r=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=zu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)op.call(e,c)&&!lp.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Ki,type:t.type,key:r,ref:i,props:n,_owner:a}};J.createContext=function(t){return t={$$typeof:yy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xy,_context:t},t.Consumer=t};J.createElement=cp;J.createFactory=function(t){var e=cp.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:vy,render:t}};J.isValidElement=$u;J.lazy=function(t){return{$$typeof:Sy,_payload:{_status:-1,_result:t},_init:My}};J.memo=function(t,e){return{$$typeof:wy,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=qa.transition;qa.transition={};try{t()}finally{qa.transition=e}};J.unstable_act=up;J.useCallback=function(t,e){return ut.current.useCallback(t,e)};J.useContext=function(t){return ut.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};J.useEffect=function(t,e){return ut.current.useEffect(t,e)};J.useId=function(){return ut.current.useId()};J.useImperativeHandle=function(t,e,s){return ut.current.useImperativeHandle(t,e,s)};J.useInsertionEffect=function(t,e){return ut.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return ut.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return ut.current.useMemo(t,e)};J.useReducer=function(t,e,s){return ut.current.useReducer(t,e,s)};J.useRef=function(t){return ut.current.useRef(t)};J.useState=function(t){return ut.current.useState(t)};J.useSyncExternalStore=function(t,e,s){return ut.current.useSyncExternalStore(t,e,s)};J.useTransition=function(){return ut.current.useTransition()};J.version="18.3.1";sp.exports=J;var I=sp.exports;const dp=Fu(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay=I,jy=Symbol.for("react.element"),Ty=Symbol.for("react.fragment"),Ey=Object.prototype.hasOwnProperty,Py=Ay.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ry={key:!0,ref:!0,__self:!0,__source:!0};function hp(t,e,s){var n,r={},i=null,a=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)Ey.call(e,n)&&!Ry.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:jy,type:t,key:i,ref:a,props:r,_owner:Py.current}}zo.Fragment=Ty;zo.jsx=hp;zo.jsxs=hp;tp.exports=zo;var l=tp.exports,vc={},fp={exports:{}},Mt={},pp={exports:{}},mp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,L){var T=H.length;H.push(L);e:for(;0<T;){var R=T-1>>>1,P=H[R];if(0<r(P,L))H[R]=L,H[T]=P,T=R;else break e}}function s(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var L=H[0],T=H.pop();if(T!==L){H[0]=T;e:for(var R=0,P=H.length,$=P>>>1;R<$;){var z=2*(R+1)-1,V=H[z],X=z+1,K=H[X];if(0>r(V,T))X<P&&0>r(K,V)?(H[R]=K,H[X]=T,R=X):(H[R]=V,H[z]=T,R=z);else if(X<P&&0>r(K,T))H[R]=K,H[X]=T,R=X;else break e}}return L}function r(H,L){var T=H.sortIndex-L.sortIndex;return T!==0?T:H.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(H){for(var L=s(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=H)n(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=s(u)}}function w(H){if(v=!1,y(H),!g)if(s(c)!==null)g=!0,B(k);else{var L=s(u);L!==null&&F(w,L.startTime-H)}}function k(H,L){g=!1,v&&(v=!1,x(A),A=-1),p=!0;var T=f;try{for(y(L),h=s(c);h!==null&&(!(h.expirationTime>L)||H&&!j());){var R=h.callback;if(typeof R=="function"){h.callback=null,f=h.priorityLevel;var P=R(h.expirationTime<=L);L=t.unstable_now(),typeof P=="function"?h.callback=P:h===s(c)&&n(c),y(L)}else n(c);h=s(c)}if(h!==null)var $=!0;else{var z=s(u);z!==null&&F(w,z.startTime-L),$=!1}return $}finally{h=null,f=T,p=!1}}var _=!1,S=null,A=-1,C=5,M=-1;function j(){return!(t.unstable_now()-M<C)}function D(){if(S!==null){var H=t.unstable_now();M=H;var L=!0;try{L=S(!0,H)}finally{L?N():(_=!1,S=null)}}else _=!1}var N;if(typeof m=="function")N=function(){m(D)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,O=E.port2;E.port1.onmessage=D,N=function(){O.postMessage(null)}}else N=function(){b(D,0)};function B(H){S=H,_||(_=!0,N())}function F(H,L){A=b(function(){H(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,B(k))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(H){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var T=f;f=L;try{return H()}finally{f=T}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,L){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var T=f;f=H;try{return L()}finally{f=T}},t.unstable_scheduleCallback=function(H,L,T){var R=t.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?R+T:R):T=R,H){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=T+P,H={id:d++,callback:L,priorityLevel:H,startTime:T,expirationTime:P,sortIndex:-1},T>R?(H.sortIndex=T,e(u,H),s(c)===null&&H===s(u)&&(v?(x(A),A=-1):v=!0,F(w,T-R))):(H.sortIndex=P,e(c,H),g||p||(g=!0,B(k))),H},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(H){var L=f;return function(){var T=f;f=L;try{return H.apply(this,arguments)}finally{f=T}}}})(mp);pp.exports=mp;var Ly=pp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=I,Ct=Ly;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gp=new Set,_i={};function En(t,e){pr(t,e),pr(t+"Capture",e)}function pr(t,e){for(_i[t]=e,t=0;t<e.length;t++)gp.add(e[t])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bc=Object.prototype.hasOwnProperty,By=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dh={},hh={};function Iy(t){return bc.call(hh,t)?!0:bc.call(dh,t)?!1:By.test(t)?hh[t]=!0:(dh[t]=!0,!1)}function Oy(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Fy(t,e,s,n){if(e===null||typeof e>"u"||Oy(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,s,n,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qe[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qe[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qe[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qe[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qe[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qe[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qe[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qe[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qe[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vu=/[\-:]([a-z])/g;function Uu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vu,Uu);qe[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vu,Uu);qe[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vu,Uu);qe[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qe[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});qe.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qe[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wu(t,e,s,n){var r=qe.hasOwnProperty(e)?qe[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Fy(e,s,r,n)&&(s=null),n||r===null?Iy(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Rs=Dy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ha=Symbol.for("react.element"),Un=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),Yu=Symbol.for("react.strict_mode"),wc=Symbol.for("react.profiler"),xp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),Xu=Symbol.for("react.forward_ref"),Sc=Symbol.for("react.suspense"),_c=Symbol.for("react.suspense_list"),qu=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),vp=Symbol.for("react.offscreen"),fh=Symbol.iterator;function Ir(t){return t===null||typeof t!="object"?null:(t=fh&&t[fh]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,gl;function Jr(t){if(gl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);gl=e&&e[1]||""}return`
`+gl+t}var xl=!1;function yl(t,e){if(!t||xl)return"";xl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=n.stack.split(`
`),a=r.length-1,o=i.length-1;1<=a&&0<=o&&r[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==i[o]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{xl=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Jr(t):""}function Hy(t){switch(t.tag){case 5:return Jr(t.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return t=yl(t.type,!1),t;case 11:return t=yl(t.type.render,!1),t;case 1:return t=yl(t.type,!0),t;default:return""}}function kc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wn:return"Fragment";case Un:return"Portal";case wc:return"Profiler";case Yu:return"StrictMode";case Sc:return"Suspense";case _c:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yp:return(t.displayName||"Context")+".Consumer";case xp:return(t._context.displayName||"Context")+".Provider";case Xu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qu:return e=t.displayName||null,e!==null?e:kc(t.type)||"Memo";case Ds:e=t._payload,t=t._init;try{return kc(t(e))}catch{}}return null}function Gy(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kc(e);case 8:return e===Yu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zy(t){var e=bp(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fa(t){t._valueTracker||(t._valueTracker=zy(t))}function wp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=bp(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function co(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cc(t,e){var s=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function ph(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Zs(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sp(t,e){e=e.checked,e!=null&&Wu(t,"checked",e,!1)}function Mc(t,e){Sp(t,e);var s=Zs(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nc(t,e.type,s):e.hasOwnProperty("defaultValue")&&Nc(t,e.type,Zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mh(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Nc(t,e,s){(e!=="number"||co(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var ei=Array.isArray;function ar(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Zs(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ac(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gh(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(G(92));if(ei(s)){if(1<s.length)throw Error(G(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Zs(s)}}function _p(t,e){var s=Zs(e.value),n=Zs(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function xh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pa,Cp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pa=pa||document.createElement("div"),pa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ki(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$y=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(t){$y.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oi[e]=oi[t]})});function Mp(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||oi.hasOwnProperty(t)&&oi[t]?(""+e).trim():e+"px"}function Np(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=Mp(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var Vy=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tc(t,e){if(e){if(Vy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Ec(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=null;function Ku(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rc=null,or=null,lr=null;function yh(t){if(t=Ji(t)){if(typeof Rc!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Yo(e),Rc(t.stateNode,t.type,e))}}function Ap(t){or?lr?lr.push(t):lr=[t]:or=t}function jp(){if(or){var t=or,e=lr;if(lr=or=null,yh(t),e)for(t=0;t<e.length;t++)yh(e[t])}}function Tp(t,e){return t(e)}function Ep(){}var vl=!1;function Pp(t,e,s){if(vl)return t(e,s);vl=!0;try{return Tp(t,e,s)}finally{vl=!1,(or!==null||lr!==null)&&(Ep(),jp())}}function Ci(t,e){var s=t.stateNode;if(s===null)return null;var n=Yo(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(G(231,e,typeof s));return s}var Lc=!1;if(As)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Lc=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Lc=!1}function Uy(t,e,s,n,r,i,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(d){this.onError(d)}}var li=!1,uo=null,ho=!1,Dc=null,Wy={onError:function(t){li=!0,uo=t}};function Yy(t,e,s,n,r,i,a,o,c){li=!1,uo=null,Uy.apply(Wy,arguments)}function Xy(t,e,s,n,r,i,a,o,c){if(Yy.apply(this,arguments),li){if(li){var u=uo;li=!1,uo=null}else throw Error(G(198));ho||(ho=!0,Dc=u)}}function Pn(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Rp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vh(t){if(Pn(t)!==t)throw Error(G(188))}function qy(t){var e=t.alternate;if(!e){if(e=Pn(t),e===null)throw Error(G(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return vh(r),t;if(i===n)return vh(r),e;i=i.sibling}throw Error(G(188))}if(s.return!==n.return)s=r,n=i;else{for(var a=!1,o=r.child;o;){if(o===s){a=!0,s=r,n=i;break}if(o===n){a=!0,n=r,s=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===s){a=!0,s=i,n=r;break}if(o===n){a=!0,n=i,s=r;break}o=o.sibling}if(!a)throw Error(G(189))}}if(s.alternate!==n)throw Error(G(190))}if(s.tag!==3)throw Error(G(188));return s.stateNode.current===s?t:e}function Lp(t){return t=qy(t),t!==null?Dp(t):null}function Dp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dp(t);if(e!==null)return e;t=t.sibling}return null}var Bp=Ct.unstable_scheduleCallback,bh=Ct.unstable_cancelCallback,Ky=Ct.unstable_shouldYield,Qy=Ct.unstable_requestPaint,Ee=Ct.unstable_now,Zy=Ct.unstable_getCurrentPriorityLevel,Qu=Ct.unstable_ImmediatePriority,Ip=Ct.unstable_UserBlockingPriority,fo=Ct.unstable_NormalPriority,Jy=Ct.unstable_LowPriority,Op=Ct.unstable_IdlePriority,$o=null,gs=null;function e1(t){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot($o,t,void 0,(t.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:n1,t1=Math.log,s1=Math.LN2;function n1(t){return t>>>=0,t===0?32:31-(t1(t)/s1|0)|0}var ma=64,ga=4194304;function ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function po(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,a=s&268435455;if(a!==0){var o=a&~r;o!==0?n=ti(o):(i&=a,i!==0&&(n=ti(i)))}else a=s&~r,a!==0?n=ti(a):i!==0&&(n=ti(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-Kt(e),r=1<<s,n|=t[s],e&=~r;return n}function r1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i1(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Kt(i),o=1<<a,c=r[a];c===-1?(!(o&s)||o&n)&&(r[a]=r1(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}}function Bc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fp(){var t=ma;return ma<<=1,!(ma&4194240)&&(ma=64),t}function bl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Qi(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kt(e),t[e]=s}function a1(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-Kt(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function Zu(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-Kt(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var de=0;function Hp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gp,Ju,zp,$p,Vp,Ic=!1,xa=[],$s=null,Vs=null,Us=null,Mi=new Map,Ni=new Map,Is=[],o1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wh(t,e){switch(t){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":Mi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ni.delete(e.pointerId)}}function Fr(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Ji(e),e!==null&&Ju(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function l1(t,e,s,n,r){switch(e){case"focusin":return $s=Fr($s,t,e,s,n,r),!0;case"dragenter":return Vs=Fr(Vs,t,e,s,n,r),!0;case"mouseover":return Us=Fr(Us,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return Mi.set(i,Fr(Mi.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,Ni.set(i,Fr(Ni.get(i)||null,t,e,s,n,r)),!0}return!1}function Up(t){var e=yn(t.target);if(e!==null){var s=Pn(e);if(s!==null){if(e=s.tag,e===13){if(e=Rp(s),e!==null){t.blockedOn=e,Vp(t.priority,function(){zp(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ka(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Oc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Pc=n,s.target.dispatchEvent(n),Pc=null}else return e=Ji(s),e!==null&&Ju(e),t.blockedOn=s,!1;e.shift()}return!0}function Sh(t,e,s){Ka(t)&&s.delete(e)}function c1(){Ic=!1,$s!==null&&Ka($s)&&($s=null),Vs!==null&&Ka(Vs)&&(Vs=null),Us!==null&&Ka(Us)&&(Us=null),Mi.forEach(Sh),Ni.forEach(Sh)}function Hr(t,e){t.blockedOn===e&&(t.blockedOn=null,Ic||(Ic=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,c1)))}function Ai(t){function e(r){return Hr(r,t)}if(0<xa.length){Hr(xa[0],t);for(var s=1;s<xa.length;s++){var n=xa[s];n.blockedOn===t&&(n.blockedOn=null)}}for($s!==null&&Hr($s,t),Vs!==null&&Hr(Vs,t),Us!==null&&Hr(Us,t),Mi.forEach(e),Ni.forEach(e),s=0;s<Is.length;s++)n=Is[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Is.length&&(s=Is[0],s.blockedOn===null);)Up(s),s.blockedOn===null&&Is.shift()}var cr=Rs.ReactCurrentBatchConfig,mo=!0;function u1(t,e,s,n){var r=de,i=cr.transition;cr.transition=null;try{de=1,ed(t,e,s,n)}finally{de=r,cr.transition=i}}function d1(t,e,s,n){var r=de,i=cr.transition;cr.transition=null;try{de=4,ed(t,e,s,n)}finally{de=r,cr.transition=i}}function ed(t,e,s,n){if(mo){var r=Oc(t,e,s,n);if(r===null)Tl(t,e,n,go,s),wh(t,n);else if(l1(r,t,e,s,n))n.stopPropagation();else if(wh(t,n),e&4&&-1<o1.indexOf(t)){for(;r!==null;){var i=Ji(r);if(i!==null&&Gp(i),i=Oc(t,e,s,n),i===null&&Tl(t,e,n,go,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else Tl(t,e,n,null,s)}}var go=null;function Oc(t,e,s,n){if(go=null,t=Ku(n),t=yn(t),t!==null)if(e=Pn(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Rp(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return go=t,null}function Wp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zy()){case Qu:return 1;case Ip:return 4;case fo:case Jy:return 16;case Op:return 536870912;default:return 16}default:return 16}}var Fs=null,td=null,Qa=null;function Yp(){if(Qa)return Qa;var t,e=td,s=e.length,n,r="value"in Fs?Fs.value:Fs.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var a=s-t;for(n=1;n<=a&&e[s-n]===r[i-n];n++);return Qa=r.slice(t,1<n?1-n:void 0)}function Za(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ya(){return!0}function _h(){return!1}function Nt(t){function e(s,n,r,i,a){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ya:_h,this.isPropagationStopped=_h,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),e}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sd=Nt(Nr),Zi=Ce({},Nr,{view:0,detail:0}),h1=Nt(Zi),wl,Sl,Gr,Vo=Ce({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gr&&(Gr&&t.type==="mousemove"?(wl=t.screenX-Gr.screenX,Sl=t.screenY-Gr.screenY):Sl=wl=0,Gr=t),wl)},movementY:function(t){return"movementY"in t?t.movementY:Sl}}),kh=Nt(Vo),f1=Ce({},Vo,{dataTransfer:0}),p1=Nt(f1),m1=Ce({},Zi,{relatedTarget:0}),_l=Nt(m1),g1=Ce({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),x1=Nt(g1),y1=Ce({},Nr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),v1=Nt(y1),b1=Ce({},Nr,{data:0}),Ch=Nt(b1),w1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_1[t])?!!e[t]:!1}function nd(){return k1}var C1=Ce({},Zi,{key:function(t){if(t.key){var e=w1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Za(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nd,charCode:function(t){return t.type==="keypress"?Za(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Za(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),M1=Nt(C1),N1=Ce({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=Nt(N1),A1=Ce({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nd}),j1=Nt(A1),T1=Ce({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),E1=Nt(T1),P1=Ce({},Vo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),R1=Nt(P1),L1=[9,13,27,32],rd=As&&"CompositionEvent"in window,ci=null;As&&"documentMode"in document&&(ci=document.documentMode);var D1=As&&"TextEvent"in window&&!ci,Xp=As&&(!rd||ci&&8<ci&&11>=ci),Nh=" ",Ah=!1;function qp(t,e){switch(t){case"keyup":return L1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yn=!1;function B1(t,e){switch(t){case"compositionend":return Kp(e);case"keypress":return e.which!==32?null:(Ah=!0,Nh);case"textInput":return t=e.data,t===Nh&&Ah?null:t;default:return null}}function I1(t,e){if(Yn)return t==="compositionend"||!rd&&qp(t,e)?(t=Yp(),Qa=td=Fs=null,Yn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xp&&e.locale!=="ko"?null:e.data;default:return null}}var O1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!O1[t.type]:e==="textarea"}function Qp(t,e,s,n){Ap(n),e=xo(e,"onChange"),0<e.length&&(s=new sd("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var ui=null,ji=null;function F1(t){lm(t,0)}function Uo(t){var e=Kn(t);if(wp(e))return t}function H1(t,e){if(t==="change")return e}var Zp=!1;if(As){var kl;if(As){var Cl="oninput"in document;if(!Cl){var Th=document.createElement("div");Th.setAttribute("oninput","return;"),Cl=typeof Th.oninput=="function"}kl=Cl}else kl=!1;Zp=kl&&(!document.documentMode||9<document.documentMode)}function Eh(){ui&&(ui.detachEvent("onpropertychange",Jp),ji=ui=null)}function Jp(t){if(t.propertyName==="value"&&Uo(ji)){var e=[];Qp(e,ji,t,Ku(t)),Pp(F1,e)}}function G1(t,e,s){t==="focusin"?(Eh(),ui=e,ji=s,ui.attachEvent("onpropertychange",Jp)):t==="focusout"&&Eh()}function z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uo(ji)}function $1(t,e){if(t==="click")return Uo(e)}function V1(t,e){if(t==="input"||t==="change")return Uo(e)}function U1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:U1;function Ti(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!bc.call(e,r)||!Zt(t[r],e[r]))return!1}return!0}function Ph(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rh(t,e){var s=Ph(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ph(s)}}function em(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?em(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tm(){for(var t=window,e=co();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=co(t.document)}return e}function id(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function W1(t){var e=tm(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&em(s.ownerDocument.documentElement,s)){if(n!==null&&id(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=Rh(s,i);var a=Rh(s,n);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Y1=As&&"documentMode"in document&&11>=document.documentMode,Xn=null,Fc=null,di=null,Hc=!1;function Lh(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Hc||Xn==null||Xn!==co(n)||(n=Xn,"selectionStart"in n&&id(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),di&&Ti(di,n)||(di=n,n=xo(Fc,"onSelect"),0<n.length&&(e=new sd("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Xn)))}function va(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var qn={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionend:va("Transition","TransitionEnd")},Ml={},sm={};As&&(sm=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function Wo(t){if(Ml[t])return Ml[t];if(!qn[t])return t;var e=qn[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in sm)return Ml[t]=e[s];return t}var nm=Wo("animationend"),rm=Wo("animationiteration"),im=Wo("animationstart"),am=Wo("transitionend"),om=new Map,Dh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(t,e){om.set(t,e),En(e,[t])}for(var Nl=0;Nl<Dh.length;Nl++){var Al=Dh[Nl],X1=Al.toLowerCase(),q1=Al[0].toUpperCase()+Al.slice(1);tn(X1,"on"+q1)}tn(nm,"onAnimationEnd");tn(rm,"onAnimationIteration");tn(im,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(am,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));En("onBeforeInput",["compositionend","keypress","textInput","paste"]);En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K1=new Set("cancel close invalid load scroll toggle".split(" ").concat(si));function Bh(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,Xy(n,e,void 0,t),t.currentTarget=null}function lm(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&r.isPropagationStopped())break e;Bh(r,o,u),i=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&r.isPropagationStopped())break e;Bh(r,o,u),i=c}}}if(ho)throw t=Dc,ho=!1,Dc=null,t}function me(t,e){var s=e[Uc];s===void 0&&(s=e[Uc]=new Set);var n=t+"__bubble";s.has(n)||(cm(e,t,2,!1),s.add(n))}function jl(t,e,s){var n=0;e&&(n|=4),cm(s,t,n,e)}var ba="_reactListening"+Math.random().toString(36).slice(2);function Ei(t){if(!t[ba]){t[ba]=!0,gp.forEach(function(s){s!=="selectionchange"&&(K1.has(s)||jl(s,!1,t),jl(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ba]||(e[ba]=!0,jl("selectionchange",!1,e))}}function cm(t,e,s,n){switch(Wp(e)){case 1:var r=u1;break;case 4:r=d1;break;default:r=ed}s=r.bind(null,e,s,t),r=void 0,!Lc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Tl(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;o!==null;){if(a=yn(o),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}o=o.parentNode}}n=n.return}Pp(function(){var u=i,d=Ku(s),h=[];e:{var f=om.get(t);if(f!==void 0){var p=sd,g=t;switch(t){case"keypress":if(Za(s)===0)break e;case"keydown":case"keyup":p=M1;break;case"focusin":g="focus",p=_l;break;case"focusout":g="blur",p=_l;break;case"beforeblur":case"afterblur":p=_l;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=kh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=p1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=j1;break;case nm:case rm:case im:p=x1;break;case am:p=E1;break;case"scroll":p=h1;break;case"wheel":p=R1;break;case"copy":case"cut":case"paste":p=v1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Mh}var v=(e&4)!==0,b=!v&&t==="scroll",x=v?f!==null?f+"Capture":null:f;v=[];for(var m=u,y;m!==null;){y=m;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,x!==null&&(w=Ci(m,x),w!=null&&v.push(Pi(m,w,y)))),b)break;m=m.return}0<v.length&&(f=new p(f,g,null,s,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&s!==Pc&&(g=s.relatedTarget||s.fromElement)&&(yn(g)||g[js]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=s.relatedTarget||s.toElement,p=u,g=g?yn(g):null,g!==null&&(b=Pn(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(v=kh,w="onMouseLeave",x="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=Mh,w="onPointerLeave",x="onPointerEnter",m="pointer"),b=p==null?f:Kn(p),y=g==null?f:Kn(g),f=new v(w,m+"leave",p,s,d),f.target=b,f.relatedTarget=y,w=null,yn(d)===u&&(v=new v(x,m+"enter",g,s,d),v.target=y,v.relatedTarget=b,w=v),b=w,p&&g)t:{for(v=p,x=g,m=0,y=v;y;y=Bn(y))m++;for(y=0,w=x;w;w=Bn(w))y++;for(;0<m-y;)v=Bn(v),m--;for(;0<y-m;)x=Bn(x),y--;for(;m--;){if(v===x||x!==null&&v===x.alternate)break t;v=Bn(v),x=Bn(x)}v=null}else v=null;p!==null&&Ih(h,f,p,v,!1),g!==null&&b!==null&&Ih(h,b,g,v,!0)}}e:{if(f=u?Kn(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=H1;else if(jh(f))if(Zp)k=V1;else{k=z1;var _=G1}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=$1);if(k&&(k=k(t,u))){Qp(h,k,s,d);break e}_&&_(t,f,u),t==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Nc(f,"number",f.value)}switch(_=u?Kn(u):window,t){case"focusin":(jh(_)||_.contentEditable==="true")&&(Xn=_,Fc=u,di=null);break;case"focusout":di=Fc=Xn=null;break;case"mousedown":Hc=!0;break;case"contextmenu":case"mouseup":case"dragend":Hc=!1,Lh(h,s,d);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":Lh(h,s,d)}var S;if(rd)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Yn?qp(t,s)&&(A="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(A="onCompositionStart");A&&(Xp&&s.locale!=="ko"&&(Yn||A!=="onCompositionStart"?A==="onCompositionEnd"&&Yn&&(S=Yp()):(Fs=d,td="value"in Fs?Fs.value:Fs.textContent,Yn=!0)),_=xo(u,A),0<_.length&&(A=new Ch(A,t,null,s,d),h.push({event:A,listeners:_}),S?A.data=S:(S=Kp(s),S!==null&&(A.data=S)))),(S=D1?B1(t,s):I1(t,s))&&(u=xo(u,"onBeforeInput"),0<u.length&&(d=new Ch("onBeforeInput","beforeinput",null,s,d),h.push({event:d,listeners:u}),d.data=S))}lm(h,e)})}function Pi(t,e,s){return{instance:t,listener:e,currentTarget:s}}function xo(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ci(t,s),i!=null&&n.unshift(Pi(t,i,r)),i=Ci(t,e),i!=null&&n.push(Pi(t,i,r))),t=t.return}return n}function Bn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ih(t,e,s,n,r){for(var i=e._reactName,a=[];s!==null&&s!==n;){var o=s,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,r?(c=Ci(s,i),c!=null&&a.unshift(Pi(s,c,o))):r||(c=Ci(s,i),c!=null&&a.push(Pi(s,c,o)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var Q1=/\r\n?/g,Z1=/\u0000|\uFFFD/g;function Oh(t){return(typeof t=="string"?t:""+t).replace(Q1,`
`).replace(Z1,"")}function wa(t,e,s){if(e=Oh(e),Oh(t)!==e&&s)throw Error(G(425))}function yo(){}var Gc=null,zc=null;function $c(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vc=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,Fh=typeof Promise=="function"?Promise:void 0,ev=typeof queueMicrotask=="function"?queueMicrotask:typeof Fh<"u"?function(t){return Fh.resolve(null).then(t).catch(tv)}:Vc;function tv(t){setTimeout(function(){throw t})}function El(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Ai(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Ai(e)}function Ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Hh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Ar=Math.random().toString(36).slice(2),fs="__reactFiber$"+Ar,Ri="__reactProps$"+Ar,js="__reactContainer$"+Ar,Uc="__reactEvents$"+Ar,sv="__reactListeners$"+Ar,nv="__reactHandles$"+Ar;function yn(t){var e=t[fs];if(e)return e;for(var s=t.parentNode;s;){if(e=s[js]||s[fs]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Hh(t);t!==null;){if(s=t[fs])return s;t=Hh(t)}return e}t=s,s=t.parentNode}return null}function Ji(t){return t=t[fs]||t[js],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Yo(t){return t[Ri]||null}var Wc=[],Qn=-1;function sn(t){return{current:t}}function ye(t){0>Qn||(t.current=Wc[Qn],Wc[Qn]=null,Qn--)}function fe(t,e){Qn++,Wc[Qn]=t.current,t.current=e}var Js={},rt=sn(Js),gt=sn(!1),kn=Js;function mr(t,e){var s=t.type.contextTypes;if(!s)return Js;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function xt(t){return t=t.childContextTypes,t!=null}function vo(){ye(gt),ye(rt)}function Gh(t,e,s){if(rt.current!==Js)throw Error(G(168));fe(rt,e),fe(gt,s)}function um(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(G(108,Gy(t)||"Unknown",r));return Ce({},s,n)}function bo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Js,kn=rt.current,fe(rt,t),fe(gt,gt.current),!0}function zh(t,e,s){var n=t.stateNode;if(!n)throw Error(G(169));s?(t=um(t,e,kn),n.__reactInternalMemoizedMergedChildContext=t,ye(gt),ye(rt),fe(rt,t)):ye(gt),fe(gt,s)}var ws=null,Xo=!1,Pl=!1;function dm(t){ws===null?ws=[t]:ws.push(t)}function rv(t){Xo=!0,dm(t)}function nn(){if(!Pl&&ws!==null){Pl=!0;var t=0,e=de;try{var s=ws;for(de=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}ws=null,Xo=!1}catch(r){throw ws!==null&&(ws=ws.slice(t+1)),Bp(Qu,nn),r}finally{de=e,Pl=!1}}return null}var Zn=[],Jn=0,wo=null,So=0,Et=[],Pt=0,Cn=null,_s=1,ks="";function hn(t,e){Zn[Jn++]=So,Zn[Jn++]=wo,wo=t,So=e}function hm(t,e,s){Et[Pt++]=_s,Et[Pt++]=ks,Et[Pt++]=Cn,Cn=t;var n=_s;t=ks;var r=32-Kt(n)-1;n&=~(1<<r),s+=1;var i=32-Kt(e)+r;if(30<i){var a=r-r%5;i=(n&(1<<a)-1).toString(32),n>>=a,r-=a,_s=1<<32-Kt(e)+r|s<<r|n,ks=i+t}else _s=1<<i|s<<r|n,ks=t}function ad(t){t.return!==null&&(hn(t,1),hm(t,1,0))}function od(t){for(;t===wo;)wo=Zn[--Jn],Zn[Jn]=null,So=Zn[--Jn],Zn[Jn]=null;for(;t===Cn;)Cn=Et[--Pt],Et[Pt]=null,ks=Et[--Pt],Et[Pt]=null,_s=Et[--Pt],Et[Pt]=null}var _t=null,St=null,be=!1,Xt=null;function fm(t,e){var s=It(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function $h(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,St=Ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,St=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Cn!==null?{id:_s,overflow:ks}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=It(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,_t=t,St=null,!0):!1;default:return!1}}function Yc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xc(t){if(be){var e=St;if(e){var s=e;if(!$h(t,e)){if(Yc(t))throw Error(G(418));e=Ws(s.nextSibling);var n=_t;e&&$h(t,e)?fm(n,s):(t.flags=t.flags&-4097|2,be=!1,_t=t)}}else{if(Yc(t))throw Error(G(418));t.flags=t.flags&-4097|2,be=!1,_t=t}}}function Vh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function Sa(t){if(t!==_t)return!1;if(!be)return Vh(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$c(t.type,t.memoizedProps)),e&&(e=St)){if(Yc(t))throw pm(),Error(G(418));for(;e;)fm(t,e),e=Ws(e.nextSibling)}if(Vh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){St=Ws(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}St=null}}else St=_t?Ws(t.stateNode.nextSibling):null;return!0}function pm(){for(var t=St;t;)t=Ws(t.nextSibling)}function gr(){St=_t=null,be=!1}function ld(t){Xt===null?Xt=[t]:Xt.push(t)}var iv=Rs.ReactCurrentBatchConfig;function zr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(G(309));var n=s.stateNode}if(!n)throw Error(G(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=r.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(G(284));if(!s._owner)throw Error(G(290,t))}return t}function _a(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uh(t){var e=t._init;return e(t._payload)}function mm(t){function e(x,m){if(t){var y=x.deletions;y===null?(x.deletions=[m],x.flags|=16):y.push(m)}}function s(x,m){if(!t)return null;for(;m!==null;)e(x,m),m=m.sibling;return null}function n(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function r(x,m){return x=Ks(x,m),x.index=0,x.sibling=null,x}function i(x,m,y){return x.index=y,t?(y=x.alternate,y!==null?(y=y.index,y<m?(x.flags|=2,m):y):(x.flags|=2,m)):(x.flags|=1048576,m)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,m,y,w){return m===null||m.tag!==6?(m=Fl(y,x.mode,w),m.return=x,m):(m=r(m,y),m.return=x,m)}function c(x,m,y,w){var k=y.type;return k===Wn?d(x,m,y.props.children,w,y.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ds&&Uh(k)===m.type)?(w=r(m,y.props),w.ref=zr(x,m,y),w.return=x,w):(w=io(y.type,y.key,y.props,null,x.mode,w),w.ref=zr(x,m,y),w.return=x,w)}function u(x,m,y,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Hl(y,x.mode,w),m.return=x,m):(m=r(m,y.children||[]),m.return=x,m)}function d(x,m,y,w,k){return m===null||m.tag!==7?(m=_n(y,x.mode,w,k),m.return=x,m):(m=r(m,y),m.return=x,m)}function h(x,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Fl(""+m,x.mode,y),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ha:return y=io(m.type,m.key,m.props,null,x.mode,y),y.ref=zr(x,null,m),y.return=x,y;case Un:return m=Hl(m,x.mode,y),m.return=x,m;case Ds:var w=m._init;return h(x,w(m._payload),y)}if(ei(m)||Ir(m))return m=_n(m,x.mode,y,null),m.return=x,m;_a(x,m)}return null}function f(x,m,y,w){var k=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:o(x,m,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ha:return y.key===k?c(x,m,y,w):null;case Un:return y.key===k?u(x,m,y,w):null;case Ds:return k=y._init,f(x,m,k(y._payload),w)}if(ei(y)||Ir(y))return k!==null?null:d(x,m,y,w,null);_a(x,y)}return null}function p(x,m,y,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(y)||null,o(m,x,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ha:return x=x.get(w.key===null?y:w.key)||null,c(m,x,w,k);case Un:return x=x.get(w.key===null?y:w.key)||null,u(m,x,w,k);case Ds:var _=w._init;return p(x,m,y,_(w._payload),k)}if(ei(w)||Ir(w))return x=x.get(y)||null,d(m,x,w,k,null);_a(m,w)}return null}function g(x,m,y,w){for(var k=null,_=null,S=m,A=m=0,C=null;S!==null&&A<y.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var M=f(x,S,y[A],w);if(M===null){S===null&&(S=C);break}t&&S&&M.alternate===null&&e(x,S),m=i(M,m,A),_===null?k=M:_.sibling=M,_=M,S=C}if(A===y.length)return s(x,S),be&&hn(x,A),k;if(S===null){for(;A<y.length;A++)S=h(x,y[A],w),S!==null&&(m=i(S,m,A),_===null?k=S:_.sibling=S,_=S);return be&&hn(x,A),k}for(S=n(x,S);A<y.length;A++)C=p(S,x,A,y[A],w),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?A:C.key),m=i(C,m,A),_===null?k=C:_.sibling=C,_=C);return t&&S.forEach(function(j){return e(x,j)}),be&&hn(x,A),k}function v(x,m,y,w){var k=Ir(y);if(typeof k!="function")throw Error(G(150));if(y=k.call(y),y==null)throw Error(G(151));for(var _=k=null,S=m,A=m=0,C=null,M=y.next();S!==null&&!M.done;A++,M=y.next()){S.index>A?(C=S,S=null):C=S.sibling;var j=f(x,S,M.value,w);if(j===null){S===null&&(S=C);break}t&&S&&j.alternate===null&&e(x,S),m=i(j,m,A),_===null?k=j:_.sibling=j,_=j,S=C}if(M.done)return s(x,S),be&&hn(x,A),k;if(S===null){for(;!M.done;A++,M=y.next())M=h(x,M.value,w),M!==null&&(m=i(M,m,A),_===null?k=M:_.sibling=M,_=M);return be&&hn(x,A),k}for(S=n(x,S);!M.done;A++,M=y.next())M=p(S,x,A,M.value,w),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?A:M.key),m=i(M,m,A),_===null?k=M:_.sibling=M,_=M);return t&&S.forEach(function(D){return e(x,D)}),be&&hn(x,A),k}function b(x,m,y,w){if(typeof y=="object"&&y!==null&&y.type===Wn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ha:e:{for(var k=y.key,_=m;_!==null;){if(_.key===k){if(k=y.type,k===Wn){if(_.tag===7){s(x,_.sibling),m=r(_,y.props.children),m.return=x,x=m;break e}}else if(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ds&&Uh(k)===_.type){s(x,_.sibling),m=r(_,y.props),m.ref=zr(x,_,y),m.return=x,x=m;break e}s(x,_);break}else e(x,_);_=_.sibling}y.type===Wn?(m=_n(y.props.children,x.mode,w,y.key),m.return=x,x=m):(w=io(y.type,y.key,y.props,null,x.mode,w),w.ref=zr(x,m,y),w.return=x,x=w)}return a(x);case Un:e:{for(_=y.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){s(x,m.sibling),m=r(m,y.children||[]),m.return=x,x=m;break e}else{s(x,m);break}else e(x,m);m=m.sibling}m=Hl(y,x.mode,w),m.return=x,x=m}return a(x);case Ds:return _=y._init,b(x,m,_(y._payload),w)}if(ei(y))return g(x,m,y,w);if(Ir(y))return v(x,m,y,w);_a(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(s(x,m.sibling),m=r(m,y),m.return=x,x=m):(s(x,m),m=Fl(y,x.mode,w),m.return=x,x=m),a(x)):s(x,m)}return b}var xr=mm(!0),gm=mm(!1),_o=sn(null),ko=null,er=null,cd=null;function ud(){cd=er=ko=null}function dd(t){var e=_o.current;ye(_o),t._currentValue=e}function qc(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function ur(t,e){ko=t,cd=er=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mt=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(cd!==t)if(t={context:t,memoizedValue:e,next:null},er===null){if(ko===null)throw Error(G(308));er=t,ko.dependencies={lanes:0,firstContext:t}}else er=er.next=t;return e}var vn=null;function hd(t){vn===null?vn=[t]:vn.push(t)}function xm(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,hd(e)):(s.next=r.next,r.next=s),e.interleaved=s,Ts(t,n)}function Ts(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Bs=!1;function fd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ym(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ys(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,oe&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Ts(t,s)}return r=n.interleaved,r===null?(e.next=e,hd(n)):(e.next=r.next,r.next=e),n.interleaved=e,Ts(t,s)}function Ja(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Zu(t,s)}}function Wh(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=a:i=i.next=a,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Co(t,e,s,n){var r=t.updateQueue;Bs=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,d=u=c=null,o=i;do{var f=o.lane,p=o.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,v=o;switch(f=e,p=s,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Ce({},h,f);break e;case 2:Bs=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Nn|=a,t.lanes=a,t.memoizedState=h}}function Yh(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(G(191,r));r.call(n)}}}var ea={},xs=sn(ea),Li=sn(ea),Di=sn(ea);function bn(t){if(t===ea)throw Error(G(174));return t}function pd(t,e){switch(fe(Di,e),fe(Li,t),fe(xs,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jc(e,t)}ye(xs),fe(xs,e)}function yr(){ye(xs),ye(Li),ye(Di)}function vm(t){bn(Di.current);var e=bn(xs.current),s=jc(e,t.type);e!==s&&(fe(Li,t),fe(xs,s))}function md(t){Li.current===t&&(ye(xs),ye(Li))}var Se=sn(0);function Mo(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rl=[];function gd(){for(var t=0;t<Rl.length;t++)Rl[t]._workInProgressVersionPrimary=null;Rl.length=0}var eo=Rs.ReactCurrentDispatcher,Ll=Rs.ReactCurrentBatchConfig,Mn=0,ke=null,Le=null,He=null,No=!1,hi=!1,Bi=0,av=0;function Je(){throw Error(G(321))}function xd(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Zt(t[s],e[s]))return!1;return!0}function yd(t,e,s,n,r,i){if(Mn=i,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,eo.current=t===null||t.memoizedState===null?uv:dv,t=s(n,r),hi){i=0;do{if(hi=!1,Bi=0,25<=i)throw Error(G(301));i+=1,He=Le=null,e.updateQueue=null,eo.current=hv,t=s(n,r)}while(hi)}if(eo.current=Ao,e=Le!==null&&Le.next!==null,Mn=0,He=Le=ke=null,No=!1,e)throw Error(G(300));return t}function vd(){var t=Bi!==0;return Bi=0,t}function us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?ke.memoizedState=He=t:He=He.next=t,He}function Gt(){if(Le===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=He===null?ke.memoizedState:He.next;if(e!==null)He=e,Le=t;else{if(t===null)throw Error(G(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},He===null?ke.memoizedState=He=t:He=He.next=t}return He}function Ii(t,e){return typeof e=="function"?e(t):e}function Dl(t){var e=Gt(),s=e.queue;if(s===null)throw Error(G(311));s.lastRenderedReducer=t;var n=Le,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var o=a=null,c=null,u=i;do{var d=u.lane;if((Mn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,a=n):c=c.next=h,ke.lanes|=d,Nn|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=o,Zt(n,e.memoizedState)||(mt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,ke.lanes|=i,Nn|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Bl(t){var e=Gt(),s=e.queue;if(s===null)throw Error(G(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);Zt(i,e.memoizedState)||(mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function bm(){}function wm(t,e){var s=ke,n=Gt(),r=e(),i=!Zt(n.memoizedState,r);if(i&&(n.memoizedState=r,mt=!0),n=n.queue,bd(km.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(s.flags|=2048,Oi(9,_m.bind(null,s,n,r,e),void 0,null),$e===null)throw Error(G(349));Mn&30||Sm(s,e,r)}return r}function Sm(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function _m(t,e,s,n){e.value=s,e.getSnapshot=n,Cm(e)&&Mm(t)}function km(t,e,s){return s(function(){Cm(e)&&Mm(t)})}function Cm(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Zt(t,s)}catch{return!0}}function Mm(t){var e=Ts(t,1);e!==null&&Qt(e,t,1,-1)}function Xh(t){var e=us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:t},e.queue=t,t=t.dispatch=cv.bind(null,ke,t),[e.memoizedState,t]}function Oi(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Nm(){return Gt().memoizedState}function to(t,e,s,n){var r=us();ke.flags|=t,r.memoizedState=Oi(1|e,s,void 0,n===void 0?null:n)}function qo(t,e,s,n){var r=Gt();n=n===void 0?null:n;var i=void 0;if(Le!==null){var a=Le.memoizedState;if(i=a.destroy,n!==null&&xd(n,a.deps)){r.memoizedState=Oi(e,s,i,n);return}}ke.flags|=t,r.memoizedState=Oi(1|e,s,i,n)}function qh(t,e){return to(8390656,8,t,e)}function bd(t,e){return qo(2048,8,t,e)}function Am(t,e){return qo(4,2,t,e)}function jm(t,e){return qo(4,4,t,e)}function Tm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Em(t,e,s){return s=s!=null?s.concat([t]):null,qo(4,4,Tm.bind(null,e,t),s)}function wd(){}function Pm(t,e){var s=Gt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&xd(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function Rm(t,e){var s=Gt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&xd(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function Lm(t,e,s){return Mn&21?(Zt(s,e)||(s=Fp(),ke.lanes|=s,Nn|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mt=!0),t.memoizedState=s)}function ov(t,e){var s=de;de=s!==0&&4>s?s:4,t(!0);var n=Ll.transition;Ll.transition={};try{t(!1),e()}finally{de=s,Ll.transition=n}}function Dm(){return Gt().memoizedState}function lv(t,e,s){var n=qs(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Bm(t))Im(e,s);else if(s=xm(t,e,s,n),s!==null){var r=ct();Qt(s,t,n,r),Om(s,e,n)}}function cv(t,e,s){var n=qs(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Bm(t))Im(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,s);if(r.hasEagerState=!0,r.eagerState=o,Zt(o,a)){var c=e.interleaved;c===null?(r.next=r,hd(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=xm(t,e,r,n),s!==null&&(r=ct(),Qt(s,t,n,r),Om(s,e,n))}}function Bm(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function Im(t,e){hi=No=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Om(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Zu(t,s)}}var Ao={readContext:Ht,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},uv={readContext:Ht,useCallback:function(t,e){return us().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:qh,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,to(4194308,4,Tm.bind(null,e,t),s)},useLayoutEffect:function(t,e){return to(4194308,4,t,e)},useInsertionEffect:function(t,e){return to(4,2,t,e)},useMemo:function(t,e){var s=us();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=us();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=lv.bind(null,ke,t),[n.memoizedState,t]},useRef:function(t){var e=us();return t={current:t},e.memoizedState=t},useState:Xh,useDebugValue:wd,useDeferredValue:function(t){return us().memoizedState=t},useTransition:function(){var t=Xh(!1),e=t[0];return t=ov.bind(null,t[1]),us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=ke,r=us();if(be){if(s===void 0)throw Error(G(407));s=s()}else{if(s=e(),$e===null)throw Error(G(349));Mn&30||Sm(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,qh(km.bind(null,n,i,t),[t]),n.flags|=2048,Oi(9,_m.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=us(),e=$e.identifierPrefix;if(be){var s=ks,n=_s;s=(n&~(1<<32-Kt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Bi++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=av++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dv={readContext:Ht,useCallback:Pm,useContext:Ht,useEffect:bd,useImperativeHandle:Em,useInsertionEffect:Am,useLayoutEffect:jm,useMemo:Rm,useReducer:Dl,useRef:Nm,useState:function(){return Dl(Ii)},useDebugValue:wd,useDeferredValue:function(t){var e=Gt();return Lm(e,Le.memoizedState,t)},useTransition:function(){var t=Dl(Ii)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:bm,useSyncExternalStore:wm,useId:Dm,unstable_isNewReconciler:!1},hv={readContext:Ht,useCallback:Pm,useContext:Ht,useEffect:bd,useImperativeHandle:Em,useInsertionEffect:Am,useLayoutEffect:jm,useMemo:Rm,useReducer:Bl,useRef:Nm,useState:function(){return Bl(Ii)},useDebugValue:wd,useDeferredValue:function(t){var e=Gt();return Le===null?e.memoizedState=t:Lm(e,Le.memoizedState,t)},useTransition:function(){var t=Bl(Ii)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:bm,useSyncExternalStore:wm,useId:Dm,unstable_isNewReconciler:!1};function Wt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Kc(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Ce({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ko={isMounted:function(t){return(t=t._reactInternals)?Pn(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=ct(),r=qs(t),i=Cs(n,r);i.payload=e,s!=null&&(i.callback=s),e=Ys(t,i,r),e!==null&&(Qt(e,t,r,n),Ja(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=ct(),r=qs(t),i=Cs(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Ys(t,i,r),e!==null&&(Qt(e,t,r,n),Ja(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=ct(),n=qs(t),r=Cs(s,n);r.tag=2,e!=null&&(r.callback=e),e=Ys(t,r,n),e!==null&&(Qt(e,t,n,s),Ja(e,t,n))}};function Kh(t,e,s,n,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ti(s,n)||!Ti(r,i):!0}function Fm(t,e,s){var n=!1,r=Js,i=e.contextType;return typeof i=="object"&&i!==null?i=Ht(i):(r=xt(e)?kn:rt.current,n=e.contextTypes,i=(n=n!=null)?mr(t,r):Js),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ko,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Qh(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Ko.enqueueReplaceState(e,e.state,null)}function Qc(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},fd(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Ht(i):(i=xt(e)?kn:rt.current,r.context=mr(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Kc(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Ko.enqueueReplaceState(r,r.state,null),Co(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function vr(t,e){try{var s="",n=e;do s+=Hy(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Il(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Zc(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var fv=typeof WeakMap=="function"?WeakMap:Map;function Hm(t,e,s){s=Cs(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){To||(To=!0,lu=n),Zc(t,e)},s}function Gm(t,e,s){s=Cs(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Zc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Zc(t,e),typeof n!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function Zh(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new fv;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=Nv.bind(null,t,e,s),e.then(t,t))}function Jh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ef(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Cs(-1,1),e.tag=2,Ys(s,e,1))),s.lanes|=1),t)}var pv=Rs.ReactCurrentOwner,mt=!1;function at(t,e,s,n){e.child=t===null?gm(e,null,s,n):xr(e,t.child,s,n)}function tf(t,e,s,n,r){s=s.render;var i=e.ref;return ur(e,r),n=yd(t,e,s,n,i,r),s=vd(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Es(t,e,r)):(be&&s&&ad(e),e.flags|=1,at(t,e,n,r),e.child)}function sf(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!jd(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,zm(t,e,i,n,r)):(t=io(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var a=i.memoizedProps;if(s=s.compare,s=s!==null?s:Ti,s(a,n)&&t.ref===e.ref)return Es(t,e,r)}return e.flags|=1,t=Ks(i,n),t.ref=e.ref,t.return=e,e.child=t}function zm(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(Ti(i,n)&&t.ref===e.ref)if(mt=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,Es(t,e,r)}return Jc(t,e,s,n,r)}function $m(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(sr,bt),bt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(sr,bt),bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,fe(sr,bt),bt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,fe(sr,bt),bt|=n;return at(t,e,r,s),e.child}function Vm(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Jc(t,e,s,n,r){var i=xt(s)?kn:rt.current;return i=mr(e,i),ur(e,r),s=yd(t,e,s,n,i,r),n=vd(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Es(t,e,r)):(be&&n&&ad(e),e.flags|=1,at(t,e,s,r),e.child)}function nf(t,e,s,n,r){if(xt(s)){var i=!0;bo(e)}else i=!1;if(ur(e,r),e.stateNode===null)so(t,e),Fm(e,s,n),Qc(e,s,n,r),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=s.contextType;typeof u=="object"&&u!==null?u=Ht(u):(u=xt(s)?kn:rt.current,u=mr(e,u));var d=s.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Qh(e,a,n,u),Bs=!1;var f=e.memoizedState;a.state=f,Co(e,n,a,r),c=e.memoizedState,o!==n||f!==c||gt.current||Bs?(typeof d=="function"&&(Kc(e,s,d,n),c=e.memoizedState),(o=Bs||Kh(e,s,o,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,ym(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Wt(e.type,o),a.props=u,h=e.pendingProps,f=a.context,c=s.contextType,typeof c=="object"&&c!==null?c=Ht(c):(c=xt(s)?kn:rt.current,c=mr(e,c));var p=s.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==c)&&Qh(e,a,n,c),Bs=!1,f=e.memoizedState,a.state=f,Co(e,n,a,r);var g=e.memoizedState;o!==h||f!==g||gt.current||Bs?(typeof p=="function"&&(Kc(e,s,p,n),g=e.memoizedState),(u=Bs||Kh(e,s,u,n,f,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return eu(t,e,s,n,i,r)}function eu(t,e,s,n,r,i){Vm(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&zh(e,s,!1),Es(t,e,i);n=e.stateNode,pv.current=e;var o=a&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=xr(e,t.child,null,i),e.child=xr(e,null,o,i)):at(t,e,o,i),e.memoizedState=n.state,r&&zh(e,s,!0),e.child}function Um(t){var e=t.stateNode;e.pendingContext?Gh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gh(t,e.context,!1),pd(t,e.containerInfo)}function rf(t,e,s,n,r){return gr(),ld(r),e.flags|=256,at(t,e,s,n),e.child}var tu={dehydrated:null,treeContext:null,retryLane:0};function su(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wm(t,e,s){var n=e.pendingProps,r=Se.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(r&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),fe(Se,r&1),t===null)return Xc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Jo(a,n,0,null),t=_n(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=su(s),e.memoizedState=tu,t):Sd(e,a));if(r=t.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return mv(t,e,a,n,o,r,s);if(i){i=n.fallback,a=e.mode,r=t.child,o=r.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ks(r,c),n.subtreeFlags=r.subtreeFlags&14680064),o!==null?i=Ks(o,i):(i=_n(i,a,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?su(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~s,e.memoizedState=tu,n}return i=t.child,t=i.sibling,n=Ks(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function Sd(t,e){return e=Jo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ka(t,e,s,n){return n!==null&&ld(n),xr(e,t.child,null,s),t=Sd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mv(t,e,s,n,r,i,a){if(s)return e.flags&256?(e.flags&=-257,n=Il(Error(G(422))),ka(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=Jo({mode:"visible",children:n.children},r,0,null),i=_n(i,r,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&xr(e,t.child,null,a),e.child.memoizedState=su(a),e.memoizedState=tu,i);if(!(e.mode&1))return ka(t,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(G(419)),n=Il(i,n,void 0),ka(t,e,a,n)}if(o=(a&t.childLanes)!==0,mt||o){if(n=$e,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Ts(t,r),Qt(n,t,r,-1))}return Ad(),n=Il(Error(G(421))),ka(t,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Av.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,St=Ws(r.nextSibling),_t=e,be=!0,Xt=null,t!==null&&(Et[Pt++]=_s,Et[Pt++]=ks,Et[Pt++]=Cn,_s=t.id,ks=t.overflow,Cn=e),e=Sd(e,n.children),e.flags|=4096,e)}function af(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),qc(t.return,e,s)}function Ol(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function Ym(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(at(t,e,n.children,s),n=Se.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&af(t,s,e);else if(t.tag===19)af(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(fe(Se,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&Mo(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),Ol(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Mo(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}Ol(e,!0,s,null,i);break;case"together":Ol(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function so(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Es(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Nn|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,s=Ks(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Ks(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function gv(t,e,s){switch(e.tag){case 3:Um(e),gr();break;case 5:vm(e);break;case 1:xt(e.type)&&bo(e);break;case 4:pd(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;fe(_o,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(fe(Se,Se.current&1),e.flags|=128,null):s&e.child.childLanes?Wm(t,e,s):(fe(Se,Se.current&1),t=Es(t,e,s),t!==null?t.sibling:null);fe(Se,Se.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Ym(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),fe(Se,Se.current),n)break;return null;case 22:case 23:return e.lanes=0,$m(t,e,s)}return Es(t,e,s)}var Xm,nu,qm,Km;Xm=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};nu=function(){};qm=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,bn(xs.current);var i=null;switch(s){case"input":r=Cc(t,r),n=Cc(t,n),i=[];break;case"select":r=Ce({},r,{value:void 0}),n=Ce({},n,{value:void 0}),i=[];break;case"textarea":r=Ac(t,r),n=Ac(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=yo)}Tc(s,n);var a;s=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_i.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(i||(i=[]),i.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_i.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&me("scroll",t),i||o===c||(i=[])):(i=i||[]).push(u,c))}s&&(i=i||[]).push("style",s);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Km=function(t,e,s,n){s!==n&&(e.flags|=4)};function $r(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function xv(t,e,s){var n=e.pendingProps;switch(od(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return xt(e.type)&&vo(),et(e),null;case 3:return n=e.stateNode,yr(),ye(gt),ye(rt),gd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Sa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(du(Xt),Xt=null))),nu(t,e),et(e),null;case 5:md(e);var r=bn(Di.current);if(s=e.type,t!==null&&e.stateNode!=null)qm(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(G(166));return et(e),null}if(t=bn(xs.current),Sa(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[fs]=e,n[Ri]=i,t=(e.mode&1)!==0,s){case"dialog":me("cancel",n),me("close",n);break;case"iframe":case"object":case"embed":me("load",n);break;case"video":case"audio":for(r=0;r<si.length;r++)me(si[r],n);break;case"source":me("error",n);break;case"img":case"image":case"link":me("error",n),me("load",n);break;case"details":me("toggle",n);break;case"input":ph(n,i),me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},me("invalid",n);break;case"textarea":gh(n,i),me("invalid",n)}Tc(s,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&wa(n.textContent,o,t),r=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&wa(n.textContent,o,t),r=["children",""+o]):_i.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&me("scroll",n)}switch(s){case"input":fa(n),mh(n,i,!0);break;case"textarea":fa(n),xh(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=yo)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kp(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(s,{is:n.is}):(t=a.createElement(s),s==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,s),t[fs]=e,t[Ri]=n,Xm(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ec(s,n),s){case"dialog":me("cancel",t),me("close",t),r=n;break;case"iframe":case"object":case"embed":me("load",t),r=n;break;case"video":case"audio":for(r=0;r<si.length;r++)me(si[r],t);r=n;break;case"source":me("error",t),r=n;break;case"img":case"image":case"link":me("error",t),me("load",t),r=n;break;case"details":me("toggle",t),r=n;break;case"input":ph(t,n),r=Cc(t,n),me("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=Ce({},n,{value:void 0}),me("invalid",t);break;case"textarea":gh(t,n),r=Ac(t,n),me("invalid",t);break;default:r=n}Tc(s,r),o=r;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?Np(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cp(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&ki(t,c):typeof c=="number"&&ki(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_i.hasOwnProperty(i)?c!=null&&i==="onScroll"&&me("scroll",t):c!=null&&Wu(t,i,c,a))}switch(s){case"input":fa(t),mh(t,n,!1);break;case"textarea":fa(t),xh(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Zs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ar(t,!!n.multiple,i,!1):n.defaultValue!=null&&ar(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=yo)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)Km(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(G(166));if(s=bn(Di.current),bn(xs.current),Sa(e)){if(n=e.stateNode,s=e.memoizedProps,n[fs]=e,(i=n.nodeValue!==s)&&(t=_t,t!==null))switch(t.tag){case 3:wa(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wa(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[fs]=e,e.stateNode=n}return et(e),null;case 13:if(ye(Se),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&St!==null&&e.mode&1&&!(e.flags&128))pm(),gr(),e.flags|=98560,i=!1;else if(i=Sa(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[fs]=e}else gr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),i=!1}else Xt!==null&&(du(Xt),Xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?De===0&&(De=3):Ad())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return yr(),nu(t,e),t===null&&Ei(e.stateNode.containerInfo),et(e),null;case 10:return dd(e.type._context),et(e),null;case 17:return xt(e.type)&&vo(),et(e),null;case 19:if(ye(Se),i=e.memoizedState,i===null)return et(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)$r(i,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Mo(t),a!==null){for(e.flags|=128,$r(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return fe(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ee()>br&&(e.flags|=128,n=!0,$r(i,!1),e.lanes=4194304)}else{if(!n)if(t=Mo(a),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),$r(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!be)return et(e),null}else 2*Ee()-i.renderingStartTime>br&&s!==1073741824&&(e.flags|=128,n=!0,$r(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(s=i.last,s!==null?s.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ee(),e.sibling=null,s=Se.current,fe(Se,n?s&1|2:s&1),e):(et(e),null);case 22:case 23:return Nd(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?bt&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function yv(t,e){switch(od(e),e.tag){case 1:return xt(e.type)&&vo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yr(),ye(gt),ye(rt),gd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return md(e),null;case 13:if(ye(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));gr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(Se),null;case 4:return yr(),null;case 10:return dd(e.type._context),null;case 22:case 23:return Nd(),null;case 24:return null;default:return null}}var Ca=!1,st=!1,vv=typeof WeakSet=="function"?WeakSet:Set,U=null;function tr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ae(t,e,n)}else s.current=null}function ru(t,e,s){try{s()}catch(n){Ae(t,e,n)}}var of=!1;function bv(t,e){if(Gc=mo,t=tm(),id(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var a=0,o=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==s||r!==0&&h.nodeType!==3||(o=a+r),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===s&&++u===r&&(o=a),f===i&&++d===n&&(c=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(zc={focusedElem:t,selectionRange:s},mo=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,b=g.memoizedState,x=e.stateNode,m=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Wt(e.type,v),b);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(w){Ae(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return g=of,of=!1,g}function fi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&ru(e,s,i)}r=r.next}while(r!==n)}}function Qo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function iu(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Qm(t){var e=t.alternate;e!==null&&(t.alternate=null,Qm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fs],delete e[Ri],delete e[Uc],delete e[sv],delete e[nv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zm(t){return t.tag===5||t.tag===3||t.tag===4}function lf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function au(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=yo));else if(n!==4&&(t=t.child,t!==null))for(au(t,e,s),t=t.sibling;t!==null;)au(t,e,s),t=t.sibling}function ou(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ou(t,e,s),t=t.sibling;t!==null;)ou(t,e,s),t=t.sibling}var Ue=null,Yt=!1;function Ls(t,e,s){for(s=s.child;s!==null;)Jm(t,e,s),s=s.sibling}function Jm(t,e,s){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount($o,s)}catch{}switch(s.tag){case 5:st||tr(s,e);case 6:var n=Ue,r=Yt;Ue=null,Ls(t,e,s),Ue=n,Yt=r,Ue!==null&&(Yt?(t=Ue,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Ue.removeChild(s.stateNode));break;case 18:Ue!==null&&(Yt?(t=Ue,s=s.stateNode,t.nodeType===8?El(t.parentNode,s):t.nodeType===1&&El(t,s),Ai(t)):El(Ue,s.stateNode));break;case 4:n=Ue,r=Yt,Ue=s.stateNode.containerInfo,Yt=!0,Ls(t,e,s),Ue=n,Yt=r;break;case 0:case 11:case 14:case 15:if(!st&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ru(s,e,a),r=r.next}while(r!==n)}Ls(t,e,s);break;case 1:if(!st&&(tr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){Ae(s,e,o)}Ls(t,e,s);break;case 21:Ls(t,e,s);break;case 22:s.mode&1?(st=(n=st)||s.memoizedState!==null,Ls(t,e,s),st=n):Ls(t,e,s);break;default:Ls(t,e,s)}}function cf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new vv),e.forEach(function(n){var r=jv.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function $t(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ue=o.stateNode,Yt=!1;break e;case 3:Ue=o.stateNode.containerInfo,Yt=!0;break e;case 4:Ue=o.stateNode.containerInfo,Yt=!0;break e}o=o.return}if(Ue===null)throw Error(G(160));Jm(i,a,r),Ue=null,Yt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Ae(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eg(e,t),e=e.sibling}function eg(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(e,t),as(t),n&4){try{fi(3,t,t.return),Qo(3,t)}catch(v){Ae(t,t.return,v)}try{fi(5,t,t.return)}catch(v){Ae(t,t.return,v)}}break;case 1:$t(e,t),as(t),n&512&&s!==null&&tr(s,s.return);break;case 5:if($t(e,t),as(t),n&512&&s!==null&&tr(s,s.return),t.flags&32){var r=t.stateNode;try{ki(r,"")}catch(v){Ae(t,t.return,v)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,a=s!==null?s.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Sp(r,i),Ec(o,a);var u=Ec(o,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Np(r,h):d==="dangerouslySetInnerHTML"?Cp(r,h):d==="children"?ki(r,h):Wu(r,d,h,u)}switch(o){case"input":Mc(r,i);break;case"textarea":_p(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ar(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ar(r,!!i.multiple,i.defaultValue,!0):ar(r,!!i.multiple,i.multiple?[]:"",!1))}r[Ri]=i}catch(v){Ae(t,t.return,v)}}break;case 6:if($t(e,t),as(t),n&4){if(t.stateNode===null)throw Error(G(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(v){Ae(t,t.return,v)}}break;case 3:if($t(e,t),as(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Ai(e.containerInfo)}catch(v){Ae(t,t.return,v)}break;case 4:$t(e,t),as(t);break;case 13:$t(e,t),as(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Cd=Ee())),n&4&&cf(t);break;case 22:if(d=s!==null&&s.memoizedState!==null,t.mode&1?(st=(u=st)||d,$t(e,t),st=u):$t(e,t),as(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(U=t,d=t.child;d!==null;){for(h=U=d;U!==null;){switch(f=U,p=f.child,f.tag){case 0:case 11:case 14:case 15:fi(4,f,f.return);break;case 1:tr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Ae(n,s,v)}}break;case 5:tr(f,f.return);break;case 22:if(f.memoizedState!==null){df(h);continue}}p!==null?(p.return=f,U=p):df(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Mp("display",a))}catch(v){Ae(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Ae(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$t(e,t),as(t),n&4&&cf(t);break;case 21:break;default:$t(e,t),as(t)}}function as(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Zm(s)){var n=s;break e}s=s.return}throw Error(G(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(ki(r,""),n.flags&=-33);var i=lf(t);ou(t,i,r);break;case 3:case 4:var a=n.stateNode.containerInfo,o=lf(t);au(t,o,a);break;default:throw Error(G(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wv(t,e,s){U=t,tg(t)}function tg(t,e,s){for(var n=(t.mode&1)!==0;U!==null;){var r=U,i=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||Ca;if(!a){var o=r.alternate,c=o!==null&&o.memoizedState!==null||st;o=Ca;var u=st;if(Ca=a,(st=c)&&!u)for(U=r;U!==null;)a=U,c=a.child,a.tag===22&&a.memoizedState!==null?hf(r):c!==null?(c.return=a,U=c):hf(r);for(;i!==null;)U=i,tg(i),i=i.sibling;U=r,Ca=o,st=u}uf(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,U=i):uf(t)}}function uf(t){for(;U!==null;){var e=U;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||Qo(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!st)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:Wt(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Yh(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Yh(e,a,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ai(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}st||e.flags&512&&iu(e)}catch(f){Ae(e,e.return,f)}}if(e===t){U=null;break}if(s=e.sibling,s!==null){s.return=e.return,U=s;break}U=e.return}}function df(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var s=e.sibling;if(s!==null){s.return=e.return,U=s;break}U=e.return}}function hf(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qo(4,e)}catch(c){Ae(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){Ae(e,r,c)}}var i=e.return;try{iu(e)}catch(c){Ae(e,i,c)}break;case 5:var a=e.return;try{iu(e)}catch(c){Ae(e,a,c)}}}catch(c){Ae(e,e.return,c)}if(e===t){U=null;break}var o=e.sibling;if(o!==null){o.return=e.return,U=o;break}U=e.return}}var Sv=Math.ceil,jo=Rs.ReactCurrentDispatcher,_d=Rs.ReactCurrentOwner,Ft=Rs.ReactCurrentBatchConfig,oe=0,$e=null,Pe=null,Ye=0,bt=0,sr=sn(0),De=0,Fi=null,Nn=0,Zo=0,kd=0,pi=null,ft=null,Cd=0,br=1/0,bs=null,To=!1,lu=null,Xs=null,Ma=!1,Hs=null,Eo=0,mi=0,cu=null,no=-1,ro=0;function ct(){return oe&6?Ee():no!==-1?no:no=Ee()}function qs(t){return t.mode&1?oe&2&&Ye!==0?Ye&-Ye:iv.transition!==null?(ro===0&&(ro=Fp()),ro):(t=de,t!==0||(t=window.event,t=t===void 0?16:Wp(t.type)),t):1}function Qt(t,e,s,n){if(50<mi)throw mi=0,cu=null,Error(G(185));Qi(t,s,n),(!(oe&2)||t!==$e)&&(t===$e&&(!(oe&2)&&(Zo|=s),De===4&&Os(t,Ye)),yt(t,n),s===1&&oe===0&&!(e.mode&1)&&(br=Ee()+500,Xo&&nn()))}function yt(t,e){var s=t.callbackNode;i1(t,e);var n=po(t,t===$e?Ye:0);if(n===0)s!==null&&bh(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&bh(s),e===1)t.tag===0?rv(ff.bind(null,t)):dm(ff.bind(null,t)),ev(function(){!(oe&6)&&nn()}),s=null;else{switch(Hp(n)){case 1:s=Qu;break;case 4:s=Ip;break;case 16:s=fo;break;case 536870912:s=Op;break;default:s=fo}s=cg(s,sg.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function sg(t,e){if(no=-1,ro=0,oe&6)throw Error(G(327));var s=t.callbackNode;if(dr()&&t.callbackNode!==s)return null;var n=po(t,t===$e?Ye:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Po(t,n);else{e=n;var r=oe;oe|=2;var i=rg();($e!==t||Ye!==e)&&(bs=null,br=Ee()+500,Sn(t,e));do try{Cv();break}catch(o){ng(t,o)}while(!0);ud(),jo.current=i,oe=r,Pe!==null?e=0:($e=null,Ye=0,e=De)}if(e!==0){if(e===2&&(r=Bc(t),r!==0&&(n=r,e=uu(t,r))),e===1)throw s=Fi,Sn(t,0),Os(t,n),yt(t,Ee()),s;if(e===6)Os(t,n);else{if(r=t.current.alternate,!(n&30)&&!_v(r)&&(e=Po(t,n),e===2&&(i=Bc(t),i!==0&&(n=i,e=uu(t,i))),e===1))throw s=Fi,Sn(t,0),Os(t,n),yt(t,Ee()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(G(345));case 2:fn(t,ft,bs);break;case 3:if(Os(t,n),(n&130023424)===n&&(e=Cd+500-Ee(),10<e)){if(po(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){ct(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Vc(fn.bind(null,t,ft,bs),e);break}fn(t,ft,bs);break;case 4:if(Os(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var a=31-Kt(n);i=1<<a,a=e[a],a>r&&(r=a),n&=~i}if(n=r,n=Ee()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sv(n/1960))-n,10<n){t.timeoutHandle=Vc(fn.bind(null,t,ft,bs),n);break}fn(t,ft,bs);break;case 5:fn(t,ft,bs);break;default:throw Error(G(329))}}}return yt(t,Ee()),t.callbackNode===s?sg.bind(null,t):null}function uu(t,e){var s=pi;return t.current.memoizedState.isDehydrated&&(Sn(t,e).flags|=256),t=Po(t,e),t!==2&&(e=ft,ft=s,e!==null&&du(e)),t}function du(t){ft===null?ft=t:ft.push.apply(ft,t)}function _v(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!Zt(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Os(t,e){for(e&=~kd,e&=~Zo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Kt(e),n=1<<s;t[s]=-1,e&=~n}}function ff(t){if(oe&6)throw Error(G(327));dr();var e=po(t,0);if(!(e&1))return yt(t,Ee()),null;var s=Po(t,e);if(t.tag!==0&&s===2){var n=Bc(t);n!==0&&(e=n,s=uu(t,n))}if(s===1)throw s=Fi,Sn(t,0),Os(t,e),yt(t,Ee()),s;if(s===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fn(t,ft,bs),yt(t,Ee()),null}function Md(t,e){var s=oe;oe|=1;try{return t(e)}finally{oe=s,oe===0&&(br=Ee()+500,Xo&&nn())}}function An(t){Hs!==null&&Hs.tag===0&&!(oe&6)&&dr();var e=oe;oe|=1;var s=Ft.transition,n=de;try{if(Ft.transition=null,de=1,t)return t()}finally{de=n,Ft.transition=s,oe=e,!(oe&6)&&nn()}}function Nd(){bt=sr.current,ye(sr)}function Sn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,J1(s)),Pe!==null)for(s=Pe.return;s!==null;){var n=s;switch(od(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vo();break;case 3:yr(),ye(gt),ye(rt),gd();break;case 5:md(n);break;case 4:yr();break;case 13:ye(Se);break;case 19:ye(Se);break;case 10:dd(n.type._context);break;case 22:case 23:Nd()}s=s.return}if($e=t,Pe=t=Ks(t.current,null),Ye=bt=e,De=0,Fi=null,kd=Zo=Nn=0,ft=pi=null,vn!==null){for(e=0;e<vn.length;e++)if(s=vn[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var a=i.next;i.next=r,n.next=a}s.pending=n}vn=null}return t}function ng(t,e){do{var s=Pe;try{if(ud(),eo.current=Ao,No){for(var n=ke.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}No=!1}if(Mn=0,He=Le=ke=null,hi=!1,Bi=0,_d.current=null,s===null||s.return===null){De=1,Fi=e,Pe=null;break}e:{var i=t,a=s.return,o=s,c=e;if(e=Ye,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Jh(a);if(p!==null){p.flags&=-257,ef(p,a,o,i,e),p.mode&1&&Zh(i,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(c),e.updateQueue=v}else g.add(c);break e}else{if(!(e&1)){Zh(i,u,e),Ad();break e}c=Error(G(426))}}else if(be&&o.mode&1){var b=Jh(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ef(b,a,o,i,e),ld(vr(c,o));break e}}i=c=vr(c,o),De!==4&&(De=2),pi===null?pi=[i]:pi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Hm(i,c,e);Wh(i,x);break e;case 1:o=c;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Xs===null||!Xs.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Gm(i,o,e);Wh(i,w);break e}}i=i.return}while(i!==null)}ag(s)}catch(k){e=k,Pe===s&&s!==null&&(Pe=s=s.return);continue}break}while(!0)}function rg(){var t=jo.current;return jo.current=Ao,t===null?Ao:t}function Ad(){(De===0||De===3||De===2)&&(De=4),$e===null||!(Nn&268435455)&&!(Zo&268435455)||Os($e,Ye)}function Po(t,e){var s=oe;oe|=2;var n=rg();($e!==t||Ye!==e)&&(bs=null,Sn(t,e));do try{kv();break}catch(r){ng(t,r)}while(!0);if(ud(),oe=s,jo.current=n,Pe!==null)throw Error(G(261));return $e=null,Ye=0,De}function kv(){for(;Pe!==null;)ig(Pe)}function Cv(){for(;Pe!==null&&!Ky();)ig(Pe)}function ig(t){var e=lg(t.alternate,t,bt);t.memoizedProps=t.pendingProps,e===null?ag(t):Pe=e,_d.current=null}function ag(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=yv(s,e),s!==null){s.flags&=32767,Pe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Pe=null;return}}else if(s=xv(s,e,bt),s!==null){Pe=s;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);De===0&&(De=5)}function fn(t,e,s){var n=de,r=Ft.transition;try{Ft.transition=null,de=1,Mv(t,e,s,n)}finally{Ft.transition=r,de=n}return null}function Mv(t,e,s,n){do dr();while(Hs!==null);if(oe&6)throw Error(G(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(a1(t,i),t===$e&&(Pe=$e=null,Ye=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ma||(Ma=!0,cg(fo,function(){return dr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Ft.transition,Ft.transition=null;var a=de;de=1;var o=oe;oe|=4,_d.current=null,bv(t,s),eg(s,t),W1(zc),mo=!!Gc,zc=Gc=null,t.current=s,wv(s),Qy(),oe=o,de=a,Ft.transition=i}else t.current=s;if(Ma&&(Ma=!1,Hs=t,Eo=r),i=t.pendingLanes,i===0&&(Xs=null),e1(s.stateNode),yt(t,Ee()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(To)throw To=!1,t=lu,lu=null,t;return Eo&1&&t.tag!==0&&dr(),i=t.pendingLanes,i&1?t===cu?mi++:(mi=0,cu=t):mi=0,nn(),null}function dr(){if(Hs!==null){var t=Hp(Eo),e=Ft.transition,s=de;try{if(Ft.transition=null,de=16>t?16:t,Hs===null)var n=!1;else{if(t=Hs,Hs=null,Eo=0,oe&6)throw Error(G(331));var r=oe;for(oe|=4,U=t.current;U!==null;){var i=U,a=i.child;if(U.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(U=u;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:fi(8,d,i)}var h=d.child;if(h!==null)h.return=d,U=h;else for(;U!==null;){d=U;var f=d.sibling,p=d.return;if(Qm(d),d===u){U=null;break}if(f!==null){f.return=p,U=f;break}U=p}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}U=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,U=a;else e:for(;U!==null;){if(i=U,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fi(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,U=x;break e}U=i.return}}var m=t.current;for(U=m;U!==null;){a=U;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,U=y;else e:for(a=m;U!==null;){if(o=U,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Qo(9,o)}}catch(k){Ae(o,o.return,k)}if(o===a){U=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,U=w;break e}U=o.return}}if(oe=r,nn(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot($o,t)}catch{}n=!0}return n}finally{de=s,Ft.transition=e}}return!1}function pf(t,e,s){e=vr(s,e),e=Hm(t,e,1),t=Ys(t,e,1),e=ct(),t!==null&&(Qi(t,1,e),yt(t,e))}function Ae(t,e,s){if(t.tag===3)pf(t,t,s);else for(;e!==null;){if(e.tag===3){pf(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xs===null||!Xs.has(n))){t=vr(s,t),t=Gm(e,t,1),e=Ys(e,t,1),t=ct(),e!==null&&(Qi(e,1,t),yt(e,t));break}}e=e.return}}function Nv(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&s,$e===t&&(Ye&s)===s&&(De===4||De===3&&(Ye&130023424)===Ye&&500>Ee()-Cd?Sn(t,0):kd|=s),yt(t,e)}function og(t,e){e===0&&(t.mode&1?(e=ga,ga<<=1,!(ga&130023424)&&(ga=4194304)):e=1);var s=ct();t=Ts(t,e),t!==null&&(Qi(t,e,s),yt(t,s))}function Av(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),og(t,s)}function jv(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(G(314))}n!==null&&n.delete(e),og(t,s)}var lg;lg=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||gt.current)mt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return mt=!1,gv(t,e,s);mt=!!(t.flags&131072)}else mt=!1,be&&e.flags&1048576&&hm(e,So,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;so(t,e),t=e.pendingProps;var r=mr(e,rt.current);ur(e,s),r=yd(null,e,n,t,r,s);var i=vd();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xt(n)?(i=!0,bo(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,fd(e),r.updater=Ko,e.stateNode=r,r._reactInternals=e,Qc(e,n,t,s),e=eu(null,e,n,!0,i,s)):(e.tag=0,be&&i&&ad(e),at(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(so(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Ev(n),t=Wt(n,t),r){case 0:e=Jc(null,e,n,t,s);break e;case 1:e=nf(null,e,n,t,s);break e;case 11:e=tf(null,e,n,t,s);break e;case 14:e=sf(null,e,n,Wt(n.type,t),s);break e}throw Error(G(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Wt(n,r),Jc(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Wt(n,r),nf(t,e,n,r,s);case 3:e:{if(Um(e),t===null)throw Error(G(387));n=e.pendingProps,i=e.memoizedState,r=i.element,ym(t,e),Co(e,n,null,s);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=vr(Error(G(423)),e),e=rf(t,e,n,s,r);break e}else if(n!==r){r=vr(Error(G(424)),e),e=rf(t,e,n,s,r);break e}else for(St=Ws(e.stateNode.containerInfo.firstChild),_t=e,be=!0,Xt=null,s=gm(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(gr(),n===r){e=Es(t,e,s);break e}at(t,e,n,s)}e=e.child}return e;case 5:return vm(e),t===null&&Xc(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,a=r.children,$c(n,r)?a=null:i!==null&&$c(n,i)&&(e.flags|=32),Vm(t,e),at(t,e,a,s),e.child;case 6:return t===null&&Xc(e),null;case 13:return Wm(t,e,s);case 4:return pd(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=xr(e,null,n,s):at(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Wt(n,r),tf(t,e,n,r,s);case 7:return at(t,e,e.pendingProps,s),e.child;case 8:return at(t,e,e.pendingProps.children,s),e.child;case 12:return at(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,fe(_o,n._currentValue),n._currentValue=a,i!==null)if(Zt(i.value,a)){if(i.children===r.children&&!gt.current){e=Es(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Cs(-1,s&-s),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),qc(i.return,s,e),o.lanes|=s;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(G(341));a.lanes|=s,o=a.alternate,o!==null&&(o.lanes|=s),qc(a,s,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}at(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,ur(e,s),r=Ht(r),n=n(r),e.flags|=1,at(t,e,n,s),e.child;case 14:return n=e.type,r=Wt(n,e.pendingProps),r=Wt(n.type,r),sf(t,e,n,r,s);case 15:return zm(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Wt(n,r),so(t,e),e.tag=1,xt(n)?(t=!0,bo(e)):t=!1,ur(e,s),Fm(e,n,r),Qc(e,n,r,s),eu(null,e,n,!0,t,s);case 19:return Ym(t,e,s);case 22:return $m(t,e,s)}throw Error(G(156,e.tag))};function cg(t,e){return Bp(t,e)}function Tv(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,e,s,n){return new Tv(t,e,s,n)}function jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ev(t){if(typeof t=="function")return jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xu)return 11;if(t===qu)return 14}return 2}function Ks(t,e){var s=t.alternate;return s===null?(s=It(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function io(t,e,s,n,r,i){var a=2;if(n=t,typeof t=="function")jd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wn:return _n(s.children,r,i,e);case Yu:a=8,r|=8;break;case wc:return t=It(12,s,e,r|2),t.elementType=wc,t.lanes=i,t;case Sc:return t=It(13,s,e,r),t.elementType=Sc,t.lanes=i,t;case _c:return t=It(19,s,e,r),t.elementType=_c,t.lanes=i,t;case vp:return Jo(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xp:a=10;break e;case yp:a=9;break e;case Xu:a=11;break e;case qu:a=14;break e;case Ds:a=16,n=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=It(a,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function _n(t,e,s,n){return t=It(7,t,n,e),t.lanes=s,t}function Jo(t,e,s,n){return t=It(22,t,n,e),t.elementType=vp,t.lanes=s,t.stateNode={isHidden:!1},t}function Fl(t,e,s){return t=It(6,t,null,e),t.lanes=s,t}function Hl(t,e,s){return e=It(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pv(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bl(0),this.expirationTimes=bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bl(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Td(t,e,s,n,r,i,a,o,c){return t=new Pv(t,e,s,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=It(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},fd(i),t}function Rv(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Un,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function ug(t){if(!t)return Js;t=t._reactInternals;e:{if(Pn(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var s=t.type;if(xt(s))return um(t,s,e)}return e}function dg(t,e,s,n,r,i,a,o,c){return t=Td(s,n,!0,t,r,i,a,o,c),t.context=ug(null),s=t.current,n=ct(),r=qs(s),i=Cs(n,r),i.callback=e??null,Ys(s,i,r),t.current.lanes=r,Qi(t,r,n),yt(t,n),t}function el(t,e,s,n){var r=e.current,i=ct(),a=qs(r);return s=ug(s),e.context===null?e.context=s:e.pendingContext=s,e=Cs(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ys(r,e,a),t!==null&&(Qt(t,r,a,i),Ja(t,r,a)),a}function Ro(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Ed(t,e){mf(t,e),(t=t.alternate)&&mf(t,e)}function Lv(){return null}var hg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pd(t){this._internalRoot=t}tl.prototype.render=Pd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));el(t,e,null,null)};tl.prototype.unmount=Pd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;An(function(){el(null,t,null,null)}),e[js]=null}};function tl(t){this._internalRoot=t}tl.prototype.unstable_scheduleHydration=function(t){if(t){var e=$p();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Is.length&&e!==0&&e<Is[s].priority;s++);Is.splice(s,0,t),s===0&&Up(t)}};function Rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gf(){}function Dv(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var u=Ro(a);i.call(u)}}var a=dg(e,n,t,0,null,!1,!1,"",gf);return t._reactRootContainer=a,t[js]=a.current,Ei(t.nodeType===8?t.parentNode:t),An(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var o=n;n=function(){var u=Ro(c);o.call(u)}}var c=Td(t,0,!1,null,null,!1,!1,"",gf);return t._reactRootContainer=c,t[js]=c.current,Ei(t.nodeType===8?t.parentNode:t),An(function(){el(e,c,s,n)}),c}function nl(t,e,s,n,r){var i=s._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var o=r;r=function(){var c=Ro(a);o.call(c)}}el(e,a,t,r)}else a=Dv(s,e,t,r,n);return Ro(a)}Gp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ti(e.pendingLanes);s!==0&&(Zu(e,s|1),yt(e,Ee()),!(oe&6)&&(br=Ee()+500,nn()))}break;case 13:An(function(){var n=Ts(t,1);if(n!==null){var r=ct();Qt(n,t,1,r)}}),Ed(t,1)}};Ju=function(t){if(t.tag===13){var e=Ts(t,134217728);if(e!==null){var s=ct();Qt(e,t,134217728,s)}Ed(t,134217728)}};zp=function(t){if(t.tag===13){var e=qs(t),s=Ts(t,e);if(s!==null){var n=ct();Qt(s,t,e,n)}Ed(t,e)}};$p=function(){return de};Vp=function(t,e){var s=de;try{return de=t,e()}finally{de=s}};Rc=function(t,e,s){switch(e){case"input":if(Mc(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=Yo(n);if(!r)throw Error(G(90));wp(n),Mc(n,r)}}}break;case"textarea":_p(t,s);break;case"select":e=s.value,e!=null&&ar(t,!!s.multiple,e,!1)}};Tp=Md;Ep=An;var Bv={usingClientEntryPoint:!1,Events:[Ji,Kn,Yo,Ap,jp,Md]},Vr={findFiberByHostInstance:yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Iv={bundleType:Vr.bundleType,version:Vr.version,rendererPackageName:Vr.rendererPackageName,rendererConfig:Vr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lp(t),t===null?null:t.stateNode},findFiberByHostInstance:Vr.findFiberByHostInstance||Lv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Na=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Na.isDisabled&&Na.supportsFiber)try{$o=Na.inject(Iv),gs=Na}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bv;Mt.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rd(e))throw Error(G(200));return Rv(t,e,null,s)};Mt.createRoot=function(t,e){if(!Rd(t))throw Error(G(299));var s=!1,n="",r=hg;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Td(t,1,!1,null,null,s,!1,n,r),t[js]=e.current,Ei(t.nodeType===8?t.parentNode:t),new Pd(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=Lp(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return An(t)};Mt.hydrate=function(t,e,s){if(!sl(e))throw Error(G(200));return nl(null,t,e,!0,s)};Mt.hydrateRoot=function(t,e,s){if(!Rd(t))throw Error(G(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",a=hg;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=dg(e,null,t,1,s??null,r,!1,i,a),t[js]=e.current,Ei(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new tl(e)};Mt.render=function(t,e,s){if(!sl(e))throw Error(G(200));return nl(null,t,e,!1,s)};Mt.unmountComponentAtNode=function(t){if(!sl(t))throw Error(G(40));return t._reactRootContainer?(An(function(){nl(null,null,t,!1,function(){t._reactRootContainer=null,t[js]=null})}),!0):!1};Mt.unstable_batchedUpdates=Md;Mt.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!sl(s))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return nl(t,e,s,!1,n)};Mt.version="18.3.1-next-f1338f8080-20240426";function fg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fg)}catch(t){console.error(t)}}fg(),fp.exports=Mt;var Ov=fp.exports,xf=Ov;vc.createRoot=xf.createRoot,vc.hydrateRoot=xf.hydrateRoot;var yf={},Fv="@vercel/analytics",Hv="1.6.1",Gv=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function pg(){return typeof window<"u"}function mg(){try{const t="production"}catch{}return"production"}function zv(t="auto"){if(t==="auto"){window.vam=mg();return}window.vam=t}function $v(){return(pg()?window.vam:mg())||"production"}function hu(){return $v()==="development"}function Vv(t){return t.scriptSrc?t.scriptSrc:hu()?"https://va.vercel-scripts.com/v1/script.debug.js":t.basePath?`${t.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function Uv(t={debug:!0}){var e;if(!pg())return;zv(t.mode),Gv(),t.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",t.beforeSend));const s=Vv(t);if(document.head.querySelector(`script[src*="${s}"]`))return;const n=document.createElement("script");n.src=s,n.defer=!0,n.dataset.sdkn=Fv+(t.framework?`/${t.framework}`:""),n.dataset.sdkv=Hv,t.disableAutoTrack&&(n.dataset.disableAutoTrack="1"),t.endpoint?n.dataset.endpoint=t.endpoint:t.basePath&&(n.dataset.endpoint=`${t.basePath}/insights`),t.dsn&&(n.dataset.dsn=t.dsn),n.onerror=()=>{const r=hu()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${s}. ${r}`)},hu()&&t.debug===!1&&(n.dataset.debug="false"),document.head.appendChild(n)}function Wv({route:t,path:e}){var s;(s=window.va)==null||s.call(window,"pageview",{route:t,path:e})}function Yv(){if(!(typeof process>"u"||typeof yf>"u"))return yf.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Xv(t){return I.useEffect(()=>{var e;t.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]),I.useEffect(()=>{Uv({framework:t.framework||"react",basePath:t.basePath??Yv(),...t.route!==void 0&&{disableAutoTrack:!0},...t})},[]),I.useEffect(()=>{t.route&&t.path&&Wv({route:t.route,path:t.path})},[t.route,t.path]),null}const vf={gold:50,enhanceStone:5,blessedOrb:0,celestialShard:0,level:1,xp:0,currentZone:0,textSize:"normal",autoSalvage:!1,autoSalvageTier:-1,autoSalvageKeepEffects:!0,inventorySort:"none",combatPaused:!1,bossStones:{crow:0,cerberus:0,demon:0,spider:0,shadow:0,abyss:0,behemoth:0,darkwolf:0,tyrant:0,inferno:0,scorpion:0},stats:{str:5,int:5,vit:5,agi:5,lck:5},statPoints:0,gear:{weapon:{id:"starter_sword",slot:"weapon",tier:0,weaponType:"sword",name:"Rusty Sword",plus:0,effects:[]},helmet:null,armor:null,legs:null,boots:null,belt:null,shield:null,gloves:null,amulet:null},inventory:[],unlockedSkills:[],combatLog:[],enemyHp:20,enemyMaxHp:20,playerHp:100,playerMaxHp:100,kills:0,totalGold:0,enhanceFails:0,enhanceFailStreak:0,zoneKills:{},prestigeLevel:0,prestigeStones:0,prestigeSkills:{},totalPrestiges:0},fu=[{id:0,name:"Spider Den",enemyHp:500,enemyDmg:8,goldMin:1,goldMax:3,killsRequired:0,enemyType:"Beast",gearTier:0,gearChance:.3,drops:{enhanceStone:.02,blessedOrb:0,celestialShard:0},isBoss:!1},{id:1,name:"Dark Hollow",enemyHp:900,enemyDmg:15,goldMin:2,goldMax:4,killsRequired:30,enemyType:"Beast",gearTier:0,gearChance:.29,drops:{enhanceStone:.025,blessedOrb:0,celestialShard:0},isBoss:!1},{id:2,name:"Fungal Grove",enemyHp:1400,enemyDmg:22,goldMin:2,goldMax:5,killsRequired:50,enemyType:"Beast",gearTier:0,gearChance:.28,drops:{enhanceStone:.03,blessedOrb:0,celestialShard:0},isBoss:!1},{id:3,name:"Primal Woods",enemyHp:2e3,enemyDmg:32,goldMin:3,goldMax:6,killsRequired:75,enemyType:"Beast",gearTier:0,gearChance:.27,drops:{enhanceStone:.035,blessedOrb:.005,celestialShard:0},isBoss:!1},{id:4,name:"Crow Demon",enemyHp:8e3,enemyDmg:55,goldMin:20,goldMax:40,killsRequired:100,enemyType:"Boss",gearTier:1,gearChance:0,bossGearChance:.25,drops:{enhanceStone:.15,blessedOrb:.03,celestialShard:0},isBoss:!0,bossSet:"crow"},{id:5,name:"Blooming Marsh",enemyHp:2800,enemyDmg:48,goldMin:4,goldMax:8,killsRequired:40,enemyType:"Humanoid",gearTier:1,gearChance:.26,drops:{enhanceStone:.04,blessedOrb:.008,celestialShard:0},isBoss:!1},{id:6,name:"Imp Hollow",enemyHp:4e3,enemyDmg:65,goldMin:5,goldMax:10,killsRequired:60,enemyType:"Humanoid",gearTier:1,gearChance:.25,drops:{enhanceStone:.045,blessedOrb:.01,celestialShard:0},isBoss:!1},{id:7,name:"Pumpkin Patch",enemyHp:5500,enemyDmg:85,goldMin:6,goldMax:12,killsRequired:80,enemyType:"Humanoid",gearTier:1,gearChance:.24,drops:{enhanceStone:.05,blessedOrb:.012,celestialShard:0},isBoss:!1},{id:8,name:"Beetle Burrow",enemyHp:7500,enemyDmg:110,goldMin:8,goldMax:15,killsRequired:100,enemyType:"Humanoid",gearTier:1,gearChance:.23,drops:{enhanceStone:.055,blessedOrb:.015,celestialShard:.002},isBoss:!1},{id:9,name:"Cerberus",enemyHp:25e3,enemyDmg:180,goldMin:50,goldMax:100,killsRequired:120,enemyType:"Boss",gearTier:2,gearChance:0,bossGearChance:.23,drops:{enhanceStone:.18,blessedOrb:.06,celestialShard:.01},isBoss:!0,bossSet:"cerberus"},{id:10,name:"Murky Swamp",enemyHp:9500,enemyDmg:150,goldMin:10,goldMax:20,killsRequired:50,enemyType:"Undead",gearTier:2,gearChance:.22,drops:{enhanceStone:.06,blessedOrb:.018,celestialShard:.003},isBoss:!1},{id:11,name:"Poison Garden",enemyHp:13e3,enemyDmg:200,goldMin:12,goldMax:25,killsRequired:70,enemyType:"Undead",gearTier:2,gearChance:.21,drops:{enhanceStone:.065,blessedOrb:.02,celestialShard:.005},isBoss:!1},{id:12,name:"Crystal Caves",enemyHp:18e3,enemyDmg:260,goldMin:15,goldMax:30,killsRequired:90,enemyType:"Undead",gearTier:2,gearChance:.2,drops:{enhanceStone:.07,blessedOrb:.022,celestialShard:.006},isBoss:!1},{id:13,name:"Skull Garden",enemyHp:24e3,enemyDmg:340,goldMin:18,goldMax:36,killsRequired:110,enemyType:"Undead",gearTier:2,gearChance:.19,drops:{enhanceStone:.075,blessedOrb:.025,celestialShard:.008},isBoss:!1},{id:14,name:"Demon Lord",enemyHp:8e4,enemyDmg:550,goldMin:120,goldMax:240,killsRequired:140,enemyType:"Boss",gearTier:3,gearChance:0,bossGearChance:.2,drops:{enhanceStone:.22,blessedOrb:.08,celestialShard:.02},isBoss:!0,bossSet:"demon"},{id:15,name:"Shadow Webs",enemyHp:32e3,enemyDmg:450,goldMin:22,goldMax:45,killsRequired:60,enemyType:"Dragon",gearTier:3,gearChance:.18,drops:{enhanceStone:.08,blessedOrb:.03,celestialShard:.01},isBoss:!1},{id:16,name:"Arachnid Lair",enemyHp:45e3,enemyDmg:600,goldMin:28,goldMax:55,killsRequired:80,enemyType:"Dragon",gearTier:3,gearChance:.17,drops:{enhanceStone:.085,blessedOrb:.032,celestialShard:.012},isBoss:!1},{id:17,name:"Crow's Nest",enemyHp:6e4,enemyDmg:780,goldMin:35,goldMax:70,killsRequired:100,enemyType:"Dragon",gearTier:3,gearChance:.16,drops:{enhanceStone:.09,blessedOrb:.035,celestialShard:.015},isBoss:!1},{id:18,name:"Bat Hollow",enemyHp:8e4,enemyDmg:1e3,goldMin:45,goldMax:90,killsRequired:120,enemyType:"Dragon",gearTier:3,gearChance:.15,drops:{enhanceStone:.095,blessedOrb:.04,celestialShard:.018},isBoss:!1},{id:19,name:"Spider Matriarch",enemyHp:25e4,enemyDmg:1600,goldMin:300,goldMax:600,killsRequired:160,enemyType:"Boss",gearTier:4,gearChance:0,bossGearChance:.18,drops:{enhanceStone:.28,blessedOrb:.12,celestialShard:.04},isBoss:!0,bossSet:"spider"},{id:20,name:"Frozen Wastes",enemyHp:11e4,enemyDmg:1350,goldMin:55,goldMax:110,killsRequired:70,enemyType:"Elemental",gearTier:4,gearChance:.14,drops:{enhanceStone:.1,blessedOrb:.045,celestialShard:.02},isBoss:!1},{id:21,name:"Slime Pools",enemyHp:15e4,enemyDmg:1800,goldMin:70,goldMax:140,killsRequired:90,enemyType:"Elemental",gearTier:4,gearChance:.14,drops:{enhanceStone:.11,blessedOrb:.05,celestialShard:.025},isBoss:!1},{id:22,name:"Ooze Caverns",enemyHp:2e5,enemyDmg:2400,goldMin:90,goldMax:180,killsRequired:110,enemyType:"Elemental",gearTier:4,gearChance:.13,drops:{enhanceStone:.12,blessedOrb:.055,celestialShard:.03},isBoss:!1},{id:23,name:"Slime Pits",enemyHp:28e4,enemyDmg:3200,goldMin:120,goldMax:240,killsRequired:140,enemyType:"Elemental",gearTier:4,gearChance:.13,drops:{enhanceStone:.13,blessedOrb:.06,celestialShard:.035},isBoss:!1},{id:24,name:"Shadow Wolf Alpha",enemyHp:8e5,enemyDmg:5e3,goldMin:600,goldMax:1200,killsRequired:180,enemyType:"Boss",gearTier:5,gearChance:0,bossGearChance:.15,drops:{enhanceStone:.35,blessedOrb:.16,celestialShard:.08},isBoss:!0,bossSet:"shadow"},{id:25,name:"Mantis Hive",enemyHp:4e5,enemyDmg:4200,goldMin:150,goldMax:300,killsRequired:80,enemyType:"Demon",gearTier:5,gearChance:.12,drops:{enhanceStone:.14,blessedOrb:.07,celestialShard:.04},isBoss:!1},{id:26,name:"Golem Quarry",enemyHp:55e4,enemyDmg:5600,goldMin:200,goldMax:400,killsRequired:100,enemyType:"Demon",gearTier:5,gearChance:.12,drops:{enhanceStone:.15,blessedOrb:.08,celestialShard:.05},isBoss:!1},{id:27,name:"Owl's Perch",enemyHp:75e4,enemyDmg:7500,goldMin:280,goldMax:560,killsRequired:130,enemyType:"Demon",gearTier:5,gearChance:.11,drops:{enhanceStone:.16,blessedOrb:.09,celestialShard:.06},isBoss:!1},{id:28,name:"Hornet's Nest",enemyHp:1e6,enemyDmg:1e4,goldMin:400,goldMax:800,killsRequired:160,enemyType:"Demon",gearTier:5,gearChance:.11,drops:{enhanceStone:.17,blessedOrb:.1,celestialShard:.07},isBoss:!1},{id:29,name:"Eye of the Abyss",enemyHp:28e5,enemyDmg:15e3,goldMin:1500,goldMax:3e3,killsRequired:200,enemyType:"Boss",gearTier:6,gearChance:0,bossGearChance:.13,drops:{enhanceStone:.42,blessedOrb:.22,celestialShard:.12},isBoss:!0,bossSet:"abyss"},{id:30,name:"Slime Wastes",enemyHp:15e5,enemyDmg:12500,goldMin:500,goldMax:1e3,killsRequired:90,enemyType:"Celestial",gearTier:6,gearChance:.1,drops:{enhanceStone:.18,blessedOrb:.12,celestialShard:.08},isBoss:!1},{id:31,name:"Gelatinous Depths",enemyHp:2e6,enemyDmg:16500,goldMin:700,goldMax:1400,killsRequired:110,enemyType:"Celestial",gearTier:6,gearChance:.1,drops:{enhanceStone:.19,blessedOrb:.14,celestialShard:.1},isBoss:!1},{id:32,name:"Wolf Territory",enemyHp:28e5,enemyDmg:22e3,goldMin:1e3,goldMax:2e3,killsRequired:140,enemyType:"Celestial",gearTier:6,gearChance:.1,drops:{enhanceStone:.2,blessedOrb:.16,celestialShard:.12},isBoss:!1},{id:33,name:"Vampire Den",enemyHp:38e5,enemyDmg:3e4,goldMin:1500,goldMax:3e3,killsRequired:180,enemyType:"Celestial",gearTier:6,gearChance:.1,drops:{enhanceStone:.22,blessedOrb:.18,celestialShard:.14},isBoss:!1},{id:34,name:"Horned Behemoth",enemyHp:1e7,enemyDmg:45e3,goldMin:5e3,goldMax:1e4,killsRequired:250,enemyType:"Boss",gearTier:6,gearChance:0,bossGearChance:.11,drops:{enhanceStone:.5,blessedOrb:.3,celestialShard:.2},isBoss:!0,bossSet:"behemoth"},{id:35,name:"Hellhound Lair",enemyHp:5e6,enemyDmg:38e3,goldMin:2e3,goldMax:4e3,killsRequired:100,enemyType:"Void",gearTier:6,gearChance:.1,drops:{enhanceStone:.24,blessedOrb:.2,celestialShard:.16},isBoss:!1},{id:36,name:"Dwarven Mines",enemyHp:7e6,enemyDmg:52e3,goldMin:3e3,goldMax:6e3,killsRequired:130,enemyType:"Chaos",gearTier:6,gearChance:.1,drops:{enhanceStone:.26,blessedOrb:.22,celestialShard:.18},isBoss:!1},{id:37,name:"Cursed Fields",enemyHp:1e7,enemyDmg:7e4,goldMin:4500,goldMax:9e3,killsRequired:160,enemyType:"Chaos",gearTier:6,gearChance:.1,drops:{enhanceStone:.28,blessedOrb:.24,celestialShard:.2},isBoss:!1},{id:38,name:"Bear's Domain",enemyHp:15e6,enemyDmg:95e3,goldMin:7e3,goldMax:14e3,killsRequired:200,enemyType:"Chaos",gearTier:6,gearChance:.1,drops:{enhanceStone:.3,blessedOrb:.26,celestialShard:.22},isBoss:!1},{id:39,name:"Dark Wolf King",enemyHp:4e7,enemyDmg:14e4,goldMin:2e4,goldMax:4e4,killsRequired:300,enemyType:"Boss",gearTier:6,gearChance:0,bossGearChance:.1,drops:{enhanceStone:.6,blessedOrb:.4,celestialShard:.3},isBoss:!0,bossSet:"darkwolf"}],gg=[{id:40,name:"Cockatrice Roost",enemyHp:8e7,enemyDmg:2e5,goldMin:3e4,goldMax:6e4,killsRequired:120,enemyType:"Astral",gearTier:6,gearChance:.1,drops:{enhanceStone:.35,blessedOrb:.28,celestialShard:.24,prestigeStone:.03},isBoss:!1,prestigeReq:1},{id:41,name:"Eye Tyrant",enemyHp:2e8,enemyDmg:35e4,goldMin:8e4,goldMax:16e4,killsRequired:200,enemyType:"Boss",gearTier:7,gearChance:0,bossGearChance:.1,drops:{enhanceStone:.7,blessedOrb:.55,celestialShard:.45,prestigeStone:.15},isBoss:!0,prestigeReq:1,bossSet:"tyrant"},{id:42,name:"Giant Toad Marsh",enemyHp:4e8,enemyDmg:5e5,goldMin:6e4,goldMax:12e4,killsRequired:150,enemyType:"Cosmic",gearTier:7,gearChance:.1,drops:{enhanceStone:.4,blessedOrb:.32,celestialShard:.28,prestigeStone:.06},isBoss:!1,prestigeReq:2},{id:43,name:"Inferno Fox",enemyHp:1e9,enemyDmg:8e5,goldMin:2e5,goldMax:4e5,killsRequired:250,enemyType:"Boss",gearTier:8,gearChance:0,bossGearChance:.1,drops:{enhanceStone:.8,blessedOrb:.65,celestialShard:.55,prestigeStone:.25},isBoss:!0,prestigeReq:2,bossSet:"inferno"},{id:44,name:"Shaman's Sanctum",enemyHp:25e8,enemyDmg:12e5,goldMin:15e4,goldMax:3e5,killsRequired:180,enemyType:"Primordial",gearTier:8,gearChance:.1,drops:{enhanceStone:.45,blessedOrb:.38,celestialShard:.32,prestigeStone:.1},isBoss:!1,prestigeReq:3},{id:45,name:"Scorpion King",enemyHp:5e9,enemyDmg:2e6,goldMin:5e5,goldMax:1e6,killsRequired:400,enemyType:"Boss",gearTier:9,gearChance:0,bossGearChance:.1,drops:{enhanceStone:.9,blessedOrb:.8,celestialShard:.7,prestigeStone:.4},isBoss:!0,prestigeReq:3,bossSet:"scorpion"}],en=t=>{const e=fu.find(s=>s.id===t);return e||gg.find(s=>s.id===t)||fu[0]},In={enhanceStone:{icon:" E.St",color:"#60a5fa"},blessedOrb:{icon:" B.Orb",color:"#c084fc"},celestialShard:{icon:" C.Sh",color:"#fbbf24"}},rl={crow:{name:"Crow Stone",color:"#22c55e",bossName:"Crow Demon",gemIcon:5},cerberus:{name:"Cerberus Stone",color:"#8b5cf6",bossName:"Cerberus",gemIcon:9},demon:{name:"Demon Stone",color:"#ef4444",bossName:"Demon Lord",gemIcon:13},spider:{name:"Spider Stone",color:"#06b6d4",bossName:"Spider Matriarch",gemIcon:17},shadow:{name:"Shadow Stone",color:"#dc2626",bossName:"Shadow Wolf Alpha",gemIcon:21},abyss:{name:"Abyss Stone",color:"#fbbf24",bossName:"Eye of the Abyss",gemIcon:25},behemoth:{name:"Behemoth Stone",color:"#7c3aed",bossName:"Horned Behemoth",gemIcon:29},darkwolf:{name:"Dark Wolf Stone",color:"#ec4899",bossName:"Dark Wolf King",gemIcon:33},tyrant:{name:"Tyrant Stone",color:"#38bdf8",bossName:"Eye Tyrant",gemIcon:41},inferno:{name:"Inferno Stone",color:"#a78bfa",bossName:"Inferno Fox",gemIcon:44},scorpion:{name:"Scorpion Stone",color:"#f472b6",bossName:"Scorpion King",gemIcon:48}},Hi=["weapon","helmet","armor","legs","boots","belt","shield","gloves","amulet"],we=[{id:0,name:"Common",color:"#9ca3af",statMult:1,goldCost:50,zoneReq:0},{id:1,name:"Uncommon",color:"#22c55e",statMult:1.5,goldCost:200,zoneReq:1},{id:2,name:"Rare",color:"#3b82f6",statMult:2.2,goldCost:600,zoneReq:3},{id:3,name:"Epic",color:"#a855f7",statMult:3.3,goldCost:2e3,zoneReq:6},{id:4,name:"Legendary",color:"#f97316",statMult:5,goldCost:6e3,zoneReq:10},{id:5,name:"Mythic",color:"#ec4899",statMult:7.5,goldCost:2e4,zoneReq:14},{id:6,name:"Divine",color:"#fbbf24",statMult:11,goldCost:6e4,zoneReq:18},{id:7,name:"Astral",color:"#38bdf8",statMult:17,goldCost:2e5,zoneReq:21,prestigeReq:1},{id:8,name:"Cosmic",color:"#818cf8",statMult:25,goldCost:6e5,zoneReq:23,prestigeReq:2},{id:9,name:"Primordial",color:"#f472b6",statMult:38,goldCost:2e6,zoneReq:25,prestigeReq:3}],Gl={sword:["Rusty Blade","Iron Sword","Steel Saber","Crimson Edge","Dragonslayer","Soul Reaver","Excalibur","Starforged Blade","Cosmic Cleaver","Primordial Edge"],staff:["Wooden Staff","Oak Wand","Crystal Staff","Arcane Focus","Void Scepter","Starweaver","Celestial Rod","Astral Conduit","Cosmic Focus","Primordial Staff"],dagger:["Shiv","Stiletto","Shadow Fang","Viper Strike","Assassin Blade","Nightfall","Eclipse Dagger","Starlight Fang","Cosmic Shiv","Primordial Talon"],mace:["Club","Flanged Mace","War Hammer","Skull Crusher","Titan Maul","Earthshaker","Divine Judgment","Astral Crusher","Cosmic Hammer","Primordial Maul"],scythe:["Rusty Scythe","Iron Reaper","Steel Harvester","Crimson Scythe","Deathbringer","Soul Harvester","Eternal Reaper","Astral Reaper","Cosmic Harvester","Primordial Scythe"],katana:["Bamboo Blade","Iron Katana","Steel Muramasa","Crimson Edge","Dragon Fang","Void Slash","Divine Wind","Astral Edge","Cosmic Blade","Primordial Katana"],greataxe:["Woodcutter","Iron Cleaver","Steel Executioner","Blood Axe","Worldsplitter","Chaos Cleaver","Godslayer","Starbreaker","Cosmic Cleaver","Primordial Axe"],helmet:["Cloth Cap","Leather Hood","Chain Coif","Knight Helm","Dragon Visor","Phoenix Crown","Halo of Light","Astral Circlet","Cosmic Crown","Primordial Helm"],armor:["Cloth Tunic","Leather Vest","Chainmail","Plate Armor","Dragon Scale","Abyssal Plate","Radiant Aegis","Astral Vestments","Cosmic Plate","Primordial Armor"],legs:["Cloth Pants","Leather Leggings","Chain Legguards","Plate Greaves","Dragon Legs","Void Legguards","Angelic Greaves","Astral Leggings","Cosmic Greaves","Primordial Legs"],boots:["Sandals","Leather Boots","Chain Greaves","Plated Boots","Dragonskin Treads","Voidwalkers","Angelic Steps","Astral Treads","Cosmic Boots","Primordial Striders"],belt:["Rope Belt","Leather Belt","Studded Belt","Chain Belt","Dragon Girdle","Void Sash","Celestial Cord","Astral Waistguard","Cosmic Belt","Primordial Girdle"],shield:["Wooden Shield","Iron Buckler","Steel Kite","Tower Shield","Dragon Guard","Bulwark","Aegis of Dawn","Astral Barrier","Cosmic Shield","Primordial Bulwark"],gloves:["Cloth Wraps","Leather Gloves","Chain Gauntlets","Plate Fists","Drake Claws","Void Grip","Hands of Fate","Astral Grasp","Cosmic Gauntlets","Primordial Fists"],amulet:["Bead Necklace","Bronze Pendant","Silver Locket","Mystic Amulet","Dragon Heart","Soul Gem","Tear of the Gods","Astral Pendant","Cosmic Amulet","Primordial Heart"]},Bt={crow:{name:"Crow Demon",color:"#22c55e",tier:1,statBonus:1.2,weaponType:"sword",items:{weapon:{name:"Crow Demon Talon",effect:{id:"bonusDmg",name:"+DMG",value:15}},helmet:{name:"Crow Demon Crown",effect:{id:"bonusHp",name:"+HP",value:50}},armor:{name:"Crow Demon Wings",effect:{id:"thorns",name:"Thorns",value:8}},legs:{name:"Crow Demon Greaves",effect:{id:"bonusHp",name:"+HP",value:40}},boots:{name:"Crow Demon Claws",effect:{id:"dodge",name:"Dodge",value:4}},gloves:{name:"Crow Demon Grasp",effect:{id:"bonusDmg",name:"+DMG",value:10}},shield:{name:"Crow Demon Ward",effect:{id:"bonusHp",name:"+HP",value:70}},belt:{name:"Crow Demon Girdle",effect:{id:"critChance",name:"Crit",value:4}},amulet:{name:"Crow Demon Feather",effect:{id:"lifesteal",name:"Lifesteal",value:2}}},setBonuses:[{pieces:2,desc:"+10% HP",effect:{hpMult:.1}},{pieces:4,desc:"+15% DMG, +5% Thorns",effect:{dmgMult:.15,thorns:5}},{pieces:6,desc:"+10% All Stats",effect:{dmgMult:.1,hpMult:.1,speedMult:.05}},{pieces:8,desc:"Crow Flight: +20% HP, +8% Dodge",effect:{hpMult:.2,dodge:8}}]},cerberus:{name:"Cerberus",color:"#8b5cf6",tier:2,statBonus:1.25,weaponType:"staff",items:{weapon:{name:"Cerberus Fang",effect:{id:"critDamage",name:"Crit DMG",value:35}},helmet:{name:"Cerberus Skull",effect:{id:"lifesteal",name:"Lifesteal",value:3}},armor:{name:"Cerberus Hide",effect:{id:"bonusHp",name:"+HP",value:90}},legs:{name:"Cerberus Greaves",effect:{id:"critChance",name:"Crit",value:4}},boots:{name:"Cerberus Paws",effect:{id:"dodge",name:"Dodge",value:5}},gloves:{name:"Cerberus Claws",effect:{id:"critChance",name:"Crit",value:6}},shield:{name:"Cerberus Guard",effect:{id:"bonusDmg",name:"+DMG",value:20}},belt:{name:"Cerberus Chain",effect:{id:"lifesteal",name:"Lifesteal",value:2}},amulet:{name:"Cerberus Heart",effect:{id:"critDamage",name:"Crit DMG",value:25}}},setBonuses:[{pieces:2,desc:"+3% Lifesteal",effect:{lifesteal:3}},{pieces:4,desc:"+20% Crit DMG, +15% DMG",effect:{critDamage:20,dmgMult:.15}},{pieces:6,desc:"+6% Crit Chance, +15% HP",effect:{critChance:6,hpMult:.15}},{pieces:8,desc:"Hellhound Fury: +5% Lifesteal, +30% Crit DMG",effect:{lifesteal:5,critDamage:30}}]},demon:{name:"Demon Lord",color:"#ef4444",tier:3,statBonus:1.25,weaponType:"dagger",items:{weapon:{name:"Demon Lord Blade",effect:{id:"bonusDmg",name:"+DMG",value:30}},helmet:{name:"Demon Lord Crown",effect:{id:"critChance",name:"Crit",value:8}},armor:{name:"Demon Lord Plate",effect:{id:"bonusHp",name:"+HP",value:130}},legs:{name:"Demon Lord Greaves",effect:{id:"bonusDmg",name:"+DMG",value:20}},boots:{name:"Demon Lord Hooves",effect:{id:"dodge",name:"Dodge",value:6}},gloves:{name:"Demon Lord Claws",effect:{id:"critDamage",name:"Crit DMG",value:35}},shield:{name:"Demon Lord Aegis",effect:{id:"thorns",name:"Thorns",value:12}},belt:{name:"Demon Lord Girdle",effect:{id:"bonusHp",name:"+HP",value:100}},amulet:{name:"Demon Lord Heart",effect:{id:"bonusDmg",name:"+DMG",value:25}}},setBonuses:[{pieces:2,desc:"+15% DMG",effect:{dmgMult:.15}},{pieces:4,desc:"+12% HP, +8% Crit Chance",effect:{hpMult:.12,critChance:8}},{pieces:6,desc:"+25% Crit DMG, +10% Thorns",effect:{critDamage:25,thorns:10}},{pieces:8,desc:"Demon Fury: +30% DMG, +15% Speed",effect:{dmgMult:.3,speedMult:.15}}]},spider:{name:"Spider Matriarch",color:"#06b6d4",tier:4,statBonus:1.3,weaponType:"mace",items:{weapon:{name:"Matriarch Fang",effect:{id:"bonusDmg",name:"+DMG",value:45}},helmet:{name:"Matriarch Crown",effect:{id:"dodge",name:"Dodge",value:7}},armor:{name:"Matriarch Carapace",effect:{id:"bonusHp",name:"+HP",value:180}},legs:{name:"Matriarch Legguards",effect:{id:"bonusHp",name:"+HP",value:120}},boots:{name:"Matriarch Treads",effect:{id:"dodge",name:"Dodge",value:5}},gloves:{name:"Matriarch Spinnerets",effect:{id:"critChance",name:"Crit",value:8}},shield:{name:"Matriarch Web",effect:{id:"thorns",name:"Thorns",value:12}},belt:{name:"Matriarch Silk",effect:{id:"lifesteal",name:"Lifesteal",value:3}},amulet:{name:"Matriarch Eye",effect:{id:"critDamage",name:"Crit DMG",value:40}}},setBonuses:[{pieces:2,desc:"+8% Dodge",effect:{dodge:8}},{pieces:4,desc:"+20% DMG, +18% HP",effect:{dmgMult:.2,hpMult:.18}},{pieces:6,desc:"+10% Crit, +35% Crit DMG",effect:{critChance:10,critDamage:35}},{pieces:8,desc:"Spider Sense: +12% All Stats",effect:{dmgMult:.12,hpMult:.12,speedMult:.12}}]},shadow:{name:"Shadow Wolf",color:"#dc2626",tier:5,statBonus:1.3,weaponType:"sword",items:{weapon:{name:"Shadow Wolf Fang",effect:{id:"lifesteal",name:"Lifesteal",value:4}},helmet:{name:"Shadow Wolf Mask",effect:{id:"bonusDmg",name:"+DMG",value:55}},armor:{name:"Shadow Wolf Hide",effect:{id:"thorns",name:"Thorns",value:15}},legs:{name:"Shadow Wolf Greaves",effect:{id:"lifesteal",name:"Lifesteal",value:2}},boots:{name:"Shadow Wolf Treads",effect:{id:"dodge",name:"Dodge",value:7}},gloves:{name:"Shadow Wolf Claws",effect:{id:"critDamage",name:"Crit DMG",value:45}},shield:{name:"Shadow Wolf Guard",effect:{id:"bonusHp",name:"+HP",value:200}},belt:{name:"Shadow Wolf Cord",effect:{id:"critChance",name:"Crit",value:9}},amulet:{name:"Shadow Wolf Heart",effect:{id:"lifesteal",name:"Lifesteal",value:3}}},setBonuses:[{pieces:2,desc:"+4% Lifesteal",effect:{lifesteal:4}},{pieces:4,desc:"+25% DMG, +12% Thorns",effect:{dmgMult:.25,thorns:12}},{pieces:6,desc:"+22% HP, +40% Crit DMG",effect:{hpMult:.22,critDamage:40}},{pieces:8,desc:"Shadow Pact: +6% Lifesteal, +40% DMG",effect:{lifesteal:6,dmgMult:.4}}]},abyss:{name:"Abyssal Eye",color:"#fbbf24",tier:6,statBonus:1.35,weaponType:"staff",items:{weapon:{name:"Abyssal Staff",effect:{id:"bonusDmg",name:"+DMG",value:75}},helmet:{name:"Abyssal Gaze",effect:{id:"critChance",name:"Crit",value:10}},armor:{name:"Abyssal Shroud",effect:{id:"bonusHp",name:"+HP",value:280}},legs:{name:"Abyssal Greaves",effect:{id:"bonusDmg",name:"+DMG",value:55}},boots:{name:"Abyssal Treads",effect:{id:"dodge",name:"Dodge",value:8}},gloves:{name:"Abyssal Touch",effect:{id:"lifesteal",name:"Lifesteal",value:4}},shield:{name:"Abyssal Ward",effect:{id:"thorns",name:"Thorns",value:16}},belt:{name:"Abyssal Sash",effect:{id:"critDamage",name:"Crit DMG",value:50}},amulet:{name:"Abyssal Core",effect:{id:"bonusDmg",name:"+DMG",value:65}}},setBonuses:[{pieces:2,desc:"+10% Crit Chance",effect:{critChance:10}},{pieces:4,desc:"+30% DMG, +25% HP",effect:{dmgMult:.3,hpMult:.25}},{pieces:6,desc:"+12% All Stats",effect:{dmgMult:.12,hpMult:.12,speedMult:.12}},{pieces:8,desc:"Abyss Gaze: +18% All Stats, +4% Lifesteal",effect:{dmgMult:.18,hpMult:.18,speedMult:.18,lifesteal:4}}]},behemoth:{name:"Behemoth",color:"#7c3aed",tier:6,statBonus:1.35,weaponType:"dagger",items:{weapon:{name:"Behemoth Horn",effect:{id:"critDamage",name:"Crit DMG",value:65}},helmet:{name:"Behemoth Skull",effect:{id:"critChance",name:"Crit",value:11}},armor:{name:"Behemoth Hide",effect:{id:"bonusHp",name:"+HP",value:350}},legs:{name:"Behemoth Legguards",effect:{id:"critChance",name:"Crit",value:8}},boots:{name:"Behemoth Hooves",effect:{id:"dodge",name:"Dodge",value:9}},gloves:{name:"Behemoth Fists",effect:{id:"bonusDmg",name:"+DMG",value:90}},shield:{name:"Behemoth Barrier",effect:{id:"dodge",name:"Dodge",value:8}},belt:{name:"Behemoth Girdle",effect:{id:"lifesteal",name:"Lifesteal",value:4}},amulet:{name:"Behemoth Heart",effect:{id:"critChance",name:"Crit",value:10}}},setBonuses:[{pieces:2,desc:"+12% Crit Chance",effect:{critChance:12}},{pieces:4,desc:"+35% DMG, +30% HP",effect:{dmgMult:.35,hpMult:.3}},{pieces:6,desc:"+30% Crit DMG, +8% Dodge",effect:{critDamage:30,dodge:8}},{pieces:8,desc:"Behemoth Might: +60% Crit DMG, +12% Dodge",effect:{critDamage:60,dodge:12}}]},darkwolf:{name:"Dark Wolf King",color:"#ec4899",tier:6,statBonus:1.4,weaponType:"sword",items:{weapon:{name:"Wolf King Fang",effect:{id:"bonusDmg",name:"+DMG",value:120}},helmet:{name:"Wolf King Crown",effect:{id:"critChance",name:"Crit",value:12}},armor:{name:"Wolf King Pelt",effect:{id:"bonusHp",name:"+HP",value:450}},legs:{name:"Wolf King Legguards",effect:{id:"critDamage",name:"Crit DMG",value:50}},boots:{name:"Wolf King Treads",effect:{id:"dodge",name:"Dodge",value:10}},gloves:{name:"Wolf King Claws",effect:{id:"critDamage",name:"Crit DMG",value:70}},shield:{name:"Wolf King Barrier",effect:{id:"thorns",name:"Thorns",value:20}},belt:{name:"Wolf King Girdle",effect:{id:"lifesteal",name:"Lifesteal",value:5}},amulet:{name:"Wolf King Heart",effect:{id:"bonusDmg",name:"+DMG",value:100}}},setBonuses:[{pieces:2,desc:"+25% Crit DMG",effect:{critDamage:25}},{pieces:4,desc:"+40% DMG, +35% HP",effect:{dmgMult:.4,hpMult:.35}},{pieces:6,desc:"+15% All Stats",effect:{dmgMult:.15,hpMult:.15,speedMult:.15}},{pieces:8,desc:"Wolf King Fury: +60% DMG, +50% HP",effect:{dmgMult:.6,hpMult:.5}}]},eternal:{name:"Eternal",color:"#f97316",tier:6,statBonus:1.5,weaponType:"sword",items:{weapon:{name:"Eternal Annihilator",effect:{id:"bonusDmg",name:"+DMG",value:180}},helmet:{name:"Eternal Diadem",effect:{id:"critChance",name:"Crit",value:14}},armor:{name:"Eternal Plate",effect:{id:"bonusHp",name:"+HP",value:600}},legs:{name:"Eternal Legguards",effect:{id:"bonusDmg",name:"+DMG",value:120}},boots:{name:"Eternal Walkers",effect:{id:"dodge",name:"Dodge",value:11}},gloves:{name:"Eternal Gauntlets",effect:{id:"critDamage",name:"Crit DMG",value:85}},shield:{name:"Eternal Aegis",effect:{id:"thorns",name:"Thorns",value:22}},belt:{name:"Eternal Waistguard",effect:{id:"lifesteal",name:"Lifesteal",value:5}},amulet:{name:"Eternal Heart",effect:{id:"bonusDmg",name:"+DMG",value:140}}},setBonuses:[{pieces:2,desc:"+20% All Stats",effect:{dmgMult:.2,hpMult:.2,speedMult:.1}},{pieces:4,desc:"+50% DMG, +40% HP",effect:{dmgMult:.5,hpMult:.4}},{pieces:6,desc:"+15% Crit Chance, +50% Crit DMG",effect:{critChance:15,critDamage:50}},{pieces:8,desc:"Eternal Power: +70% All Stats",effect:{dmgMult:.7,hpMult:.7,speedMult:.25}}]}},Rn=[{id:"sword",name:"Sword",baseDmg:8,baseHp:0,scaling:"str",speedBonus:0,critBonus:5,desc:"Balanced, +5% crit"},{id:"staff",name:"Staff",baseDmg:7,baseHp:15,scaling:"int",speedBonus:0,critBonus:0,desc:"Magic, +15 HP"},{id:"dagger",name:"Dagger",baseDmg:5,baseHp:0,scaling:"agi",speedBonus:.25,critBonus:10,desc:"+25% speed, +10% crit"},{id:"mace",name:"Mace",baseDmg:6,baseHp:30,scaling:"vit",speedBonus:-.1,critBonus:0,desc:"Slow but tanky, +30 HP"}],il={weapon:{name:"Sword",baseDmg:8,baseHp:0,baseArmor:0,scaling:"str",desc:"+8 DMG per tier"},helmet:{name:"Helm",baseDmg:0,baseHp:20,baseArmor:5,scaling:"vit",desc:"+20 HP, +5 Armor per tier"},armor:{name:"Plate",baseDmg:0,baseHp:40,baseArmor:12,scaling:"vit",desc:"+40 HP, +12 Armor per tier"},legs:{name:"Leggings",baseDmg:0,baseHp:25,baseArmor:8,scaling:"vit",desc:"+25 HP, +8 Armor per tier"},boots:{name:"Greaves",baseDmg:0,baseHp:15,baseArmor:4,scaling:"agi",desc:"+15 HP, +4 Armor per tier"},belt:{name:"Belt",baseDmg:3,baseHp:10,baseArmor:0,scaling:"int",desc:"+3 DMG, +10 HP per tier"},shield:{name:"Buckler",baseDmg:0,baseHp:30,baseArmor:15,scaling:"vit",desc:"+30 HP, +15 Armor per tier"},gloves:{name:"Gauntlets",baseDmg:4,baseHp:10,baseArmor:3,scaling:"str",desc:"+4 DMG, +10 HP per tier"},amulet:{name:"Pendant",baseDmg:2,baseHp:15,baseArmor:0,scaling:"int",desc:"+2 DMG, +15 HP per tier"}},pu=[{id:"thorns",name:"Thorns",minVal:5,maxVal:25,color:"#f97316"},{id:"lifesteal",name:"Lifesteal",minVal:1,maxVal:8,color:"#22c55e"},{id:"critChance",name:"Crit",minVal:3,maxVal:15,color:"#ef4444"},{id:"critDamage",name:"Crit DMG",minVal:15,maxVal:60,color:"#dc2626"},{id:"bonusDmg",name:"+DMG",minVal:2,maxVal:50,color:"#f59e0b"},{id:"bonusHp",name:"+HP",minVal:10,maxVal:200,color:"#10b981"},{id:"goldFind",name:"Gold%",minVal:2,maxVal:10,color:"#fbbf24"},{id:"xpBonus",name:"XP%",minVal:3,maxVal:15,color:"#8b5cf6"},{id:"dodge",name:"Dodge",minVal:1,maxVal:8,color:"#06b6d4"},{id:"hpRegen",name:"HP Regen",minVal:.5,maxVal:3,color:"#34d399"},{id:"damageReduction",name:"DR%",minVal:2,maxVal:10,color:"#60a5fa"}],mu=[10,15,20,25,30],qv={10:1,15:1.5,20:2.5,25:4,30:6};function Kv(t,e=[]){const s=qv[t]||1,n=(e||[]).map(u=>u.id),r=pu.filter(u=>!n.includes(u.id)),i=r.length>0?r:pu,a=i[Math.floor(Math.random()*i.length)],o=a.minVal+Math.random()*(a.maxVal-a.minVal)*.5,c=Math.floor(o*s);return{id:a.id,name:a.name,value:Math.min(c,a.maxVal*s),isAwakened:!0,milestone:t}}function Qv(t){return mu.includes(t)}const ms={tyrant:{name:"Eye Tyrant",color:"#38bdf8",tier:6,statBonus:2.5,items:{weapon:{name:"Tyrant Gaze",effect:{id:"bonusDmg",name:"+DMG",value:800}},helmet:{name:"Tyrant Crown",effect:{id:"critChance",name:"Crit",value:35}},armor:{name:"Tyrant Carapace",effect:{id:"bonusHp",name:"+HP",value:4e3}},legs:{name:"Tyrant Legguards",effect:{id:"bonusDmg",name:"+DMG",value:500}},boots:{name:"Tyrant Treads",effect:{id:"dodge",name:"Dodge",value:28}},gloves:{name:"Tyrant Grips",effect:{id:"critDamage",name:"Crit DMG",value:280}},shield:{name:"Tyrant Ward",effect:{id:"thorns",name:"Thorns",value:60}},belt:{name:"Tyrant Girdle",effect:{id:"lifesteal",name:"Lifesteal",value:14}},amulet:{name:"Tyrant Eye",effect:{id:"bonusDmg",name:"+DMG",value:600}}},setBonuses:[{pieces:2,desc:"+150% All Stats",effect:{dmgMult:1.5,hpMult:1.5,speedMult:.5}},{pieces:4,desc:"+400% DMG, +300% HP",effect:{dmgMult:4,hpMult:3}},{pieces:6,desc:"+60% Crit, +250% Crit DMG",effect:{critChance:60,critDamage:250}},{pieces:8,desc:"Tyrant Dominion: +600% All Stats",effect:{dmgMult:6,hpMult:6,speedMult:1}},{pieces:9,desc:"SECRET: +100% Drop Rate",effect:{matMult:2},secret:!0}]},inferno:{name:"Inferno Fox",color:"#a78bfa",tier:6,statBonus:3,items:{weapon:{name:"Inferno Fang",effect:{id:"bonusDmg",name:"+DMG",value:1500}},helmet:{name:"Inferno Crown",effect:{id:"critChance",name:"Crit",value:40}},armor:{name:"Inferno Pelt",effect:{id:"bonusHp",name:"+HP",value:8e3}},legs:{name:"Inferno Legguards",effect:{id:"critChance",name:"Crit",value:30}},boots:{name:"Inferno Paws",effect:{id:"dodge",name:"Dodge",value:32}},gloves:{name:"Inferno Claws",effect:{id:"critDamage",name:"Crit DMG",value:350}},shield:{name:"Inferno Barrier",effect:{id:"thorns",name:"Thorns",value:80}},belt:{name:"Inferno Sash",effect:{id:"critChance",name:"Crit",value:35}},amulet:{name:"Inferno Heart",effect:{id:"lifesteal",name:"Lifesteal",value:15}}},setBonuses:[{pieces:2,desc:"+250% All Stats",effect:{dmgMult:2.5,hpMult:2.5,speedMult:.8}},{pieces:4,desc:"+700% DMG, +500% HP",effect:{dmgMult:7,hpMult:5}},{pieces:6,desc:"+50% Crit, +300% Crit DMG",effect:{critChance:50,critDamage:300}},{pieces:8,desc:"Inferno Blaze: +1200% All Stats",effect:{dmgMult:12,hpMult:12,speedMult:1.5}},{pieces:9,desc:"SECRET: +100% Drop Rate",effect:{matMult:2},secret:!0}]},scorpion:{name:"Scorpion King",color:"#f472b6",tier:6,statBonus:4,items:{weapon:{name:"Scorpion Stinger",effect:{id:"bonusDmg",name:"+DMG",value:3e3}},helmet:{name:"Scorpion Crown",effect:{id:"critChance",name:"Crit",value:50}},armor:{name:"Scorpion Carapace",effect:{id:"bonusHp",name:"+HP",value:15e3}},legs:{name:"Scorpion Legguards",effect:{id:"bonusHp",name:"+HP",value:1e4}},boots:{name:"Scorpion Treads",effect:{id:"dodge",name:"Dodge",value:35}},gloves:{name:"Scorpion Pincers",effect:{id:"critDamage",name:"Crit DMG",value:500}},shield:{name:"Scorpion Shell",effect:{id:"thorns",name:"Thorns",value:100}},belt:{name:"Scorpion Girdle",effect:{id:"lifesteal",name:"Lifesteal",value:20}},amulet:{name:"Scorpion Heart",effect:{id:"bonusDmg",name:"+DMG",value:2e3}}},setBonuses:[{pieces:2,desc:"+500% All Stats",effect:{dmgMult:5,hpMult:5,speedMult:1}},{pieces:4,desc:"+1500% DMG, +1000% HP",effect:{dmgMult:15,hpMult:10}},{pieces:6,desc:"+75% Crit, +500% Crit DMG",effect:{critChance:75,critDamage:500}},{pieces:8,desc:"Scorpion Venom: +3000% All",effect:{dmgMult:30,hpMult:30,speedMult:2}},{pieces:9,desc:"SECRET: +100% Drop Rate",effect:{matMult:2},secret:!0}]}},jr=[{id:"scythe",name:"Scythe",baseDmg:12,baseHp:0,scaling:"str",speedBonus:-.1,critBonus:15,desc:"Slow but deadly, +15% crit",prestigeReq:1},{id:"katana",name:"Katana",baseDmg:9,baseHp:0,scaling:"agi",speedBonus:.3,critBonus:20,desc:"Lightning fast, +20% crit",prestigeReq:2},{id:"greataxe",name:"Greataxe",baseDmg:18,baseHp:50,scaling:"str",speedBonus:-.2,critBonus:8,desc:"Massive damage, +50 HP",prestigeReq:3}];function Rt(t,e=null){if(!t)return 0;let n=(we[t.tier]||we[0]).statMult*100;if(n+=(t.plus||0)*15,t.effects)for(const r of t.effects)n+=(r.value||0)*2;if(t.bossSet&&(n*=1.3),e&&t.slot==="weapon"&&t.weaponType){const i=[...Rn,...jr].find(a=>a.id===t.weaponType);if(i!=null&&i.scaling){const a=e[i.scaling]||0,o=["str","int","agi","vit"].map(u=>e[u]||0),c=Math.max(...o);a>=c*.8?n*=1.5:a<c*.3?n*=.3:n*=.7}}return Math.floor(n)}function Lo(t,e){if(!t)return{gold:0,enhanceStone:0};const s=we[t.tier]||we[0],n=t.plus||0,r=e!==void 0?e:t.count||1;return{gold:Math.floor(((s.goldCost||50)*.4+n*25)*r),enhanceStone:Math.floor((1+n*.5+s.id*.3)*r)}}function bf(t){if(!t)return null;const e=t.effects&&t.effects.length>0?t.effects.map(s=>`${s.id}:${s.value}`).sort().join("|"):"none";return`${t.slot}_${t.tier}_${t.plus||0}_${t.bossSet||"none"}_${t.weaponType||"none"}_${e}`}function Gi(t,e){const s=bf(e),n=t.findIndex(r=>bf(r)===s);if(n>=0){const r=[...t];return r[n]={...r[n],count:(r[n].count||1)+(e.count||1)},r}else return[...t,{...e,count:e.count||1}]}function Lt(t){return!t||t<10?{stage:"normal",name:null,color:"#fbbf24",bgColor:"rgba(251, 191, 36, 0.15)",borderColor:"rgba(251, 191, 36, 0.4)",glow:null,icon:null}:t<15?{stage:"awakened",name:"Awakened",color:"#22d3ee",bgColor:"rgba(34, 211, 238, 0.2)",borderColor:"rgba(34, 211, 238, 0.5)",glow:"0 0 8px rgba(34, 211, 238, 0.6)",icon:""}:t<20?{stage:"transcendent",name:"Transcendent",color:"#c084fc",bgColor:"rgba(192, 132, 252, 0.25)",borderColor:"rgba(192, 132, 252, 0.6)",glow:"0 0 12px rgba(192, 132, 252, 0.7)",icon:""}:{stage:"celestial",name:"Celestial",color:"#f472b6",bgColor:"rgba(244, 114, 182, 0.3)",borderColor:"rgba(244, 114, 182, 0.7)",glow:"0 0 15px rgba(244, 114, 182, 0.8), 0 0 25px rgba(251, 191, 36, 0.4)",icon:""}}function xg(t,e){const s=t.findIndex(i=>i.id===e);if(s<0)return t;const n=t[s],r=n.count||1;if(r<=1)return t.filter(i=>i.id!==e);{const i=[...t];return i[s]={...n,count:r-1},i}}function Zv(t,e,s=0){var d,h;const n=Hi[Math.floor(Math.random()*Hi.length)];let r=t;Math.random()<.15&&r<we.length-1&&(r=Math.min(r+1,we.length-1));const i=we[r];let a,o=null;if(n==="weapon"){const f=[...Rn];if(s>=1){const g=jr.filter(v=>v.prestigeReq<=s);f.push(...g)}const p=f[Math.floor(Math.random()*f.length)];o=p.id,a=((d=Gl[o])==null?void 0:d[r])||Gl.sword[r]||p.name}else a=((h=Gl[n])==null?void 0:h[r])||i.name+" "+n;const c=[],u=Math.random()<.1+r*.08?Math.random()<.3?2:1:0;if(u>0){const f=[...pu];for(let p=0;p<u&&f.length!==0;p++){const g=Math.floor(Math.random()*f.length),v=f.splice(g,1)[0],b=1+r*.3,x=Math.floor(v.minVal+Math.random()*(v.maxVal-v.minVal)*b);c.push({id:v.id,name:v.name,value:Math.min(x,v.maxVal*2)})}}return{id:Date.now()+Math.random(),slot:n,tier:r,name:a,plus:0,weaponType:o,effects:c}}const Do=[{id:0,name:"Power Strike",desc:"+15% damage",unlockLevel:3,effect:{dmgMult:.15}},{id:1,name:"Toughness",desc:"+20% HP",unlockLevel:6,effect:{hpMult:.2}},{id:2,name:"Gold Rush",desc:"+10% gold",unlockLevel:10,effect:{goldMult:.1}},{id:3,name:"Swift Blade",desc:"+20% attack speed",unlockLevel:15,effect:{speedMult:.2}},{id:4,name:"Berserker",desc:"+30% damage",unlockLevel:22,effect:{dmgMult:.3}},{id:5,name:"Fortitude",desc:"+35% HP",unlockLevel:30,effect:{hpMult:.35}},{id:6,name:"Lucky Find",desc:"+10% material drop",unlockLevel:38,effect:{matMult:.1}},{id:7,name:"Regeneration",desc:"+1.5% HP regen/sec",unlockLevel:45,effect:{hpRegen:1.5}},{id:8,name:"Mastery",desc:"+50% all stats",unlockLevel:50,effect:{dmgMult:.5,hpMult:.5}},{id:9,name:"Vampiric",desc:"+3% base lifesteal",unlockLevel:65,effect:{lifesteal:3}},{id:10,name:"Iron Skin",desc:"+10% damage reduction",unlockLevel:75,effect:{damageReduction:10}},{id:11,name:"Critical Eye",desc:"+10% crit chance",unlockLevel:85,effect:{critChance:10}},{id:12,name:"Thorny Skin",desc:"10% thorns damage",unlockLevel:100,effect:{thorns:10}},{id:13,name:"Transcendence",desc:"+100% all stats",unlockLevel:120,effect:{dmgMult:1,hpMult:1}}],gu=[{id:0,name:"Eternal Strength",desc:"+10% base DMG per level",maxLevel:20,cost:t=>Math.floor(2*Math.pow(1.5,t)),effect:{dmgMult:.1}},{id:1,name:"Eternal Vitality",desc:"+10% base HP per level",maxLevel:20,cost:t=>Math.floor(2*Math.pow(1.5,t)),effect:{hpMult:.1}},{id:2,name:"Eternal Fortune",desc:"+5% gold find per level",maxLevel:15,cost:t=>Math.floor(3*Math.pow(1.4,t)),effect:{goldMult:.05}},{id:3,name:"Eternal Haste",desc:"+5% attack speed per level",maxLevel:10,cost:t=>Math.floor(5*Math.pow(1.6,t)),effect:{speedMult:.05}},{id:4,name:"Eternal Precision",desc:"+3% crit chance per level",maxLevel:15,cost:t=>Math.floor(4*Math.pow(1.5,t)),effect:{critChance:3}},{id:5,name:"Eternal Fury",desc:"+15% crit damage per level",maxLevel:20,cost:t=>Math.floor(3*Math.pow(1.4,t)),effect:{critDamage:15}},{id:6,name:"Eternal Guard",desc:"+5 base armor per level",maxLevel:25,cost:t=>Math.floor(2*Math.pow(1.3,t)),effect:{armor:5}},{id:7,name:"Eternal Leech",desc:"+1% lifesteal per level",maxLevel:10,cost:t=>Math.floor(8*Math.pow(1.8,t)),effect:{lifesteal:1}},{id:8,name:"Starting Bonus",desc:"+50 gold, +10 ore/leather on prestige per level",maxLevel:10,cost:t=>Math.floor(5*Math.pow(1.5,t)),effect:{startGold:50,startOre:10,startLeather:10}},{id:9,name:"XP Mastery",desc:"+10% XP gain per level",maxLevel:15,cost:t=>Math.floor(4*Math.pow(1.5,t)),effect:{xpBonus:10}},{id:10,name:"Eternal Regen",desc:"+0.5% HP regen/sec per level",maxLevel:15,cost:t=>Math.floor(4*Math.pow(1.5,t)),effect:{hpRegen:.5}},{id:11,name:"Eternal Bulwark",desc:"+3% damage reduction per level",maxLevel:15,cost:t=>Math.floor(5*Math.pow(1.6,t)),effect:{damageReduction:3}}],Gs={DAMAGE:5,HP:80,CRIT_CHANCE:3,CRIT_DAMAGE:150,DEFAULT_MAX_HP:100,DEFAULT_DAMAGE:10,DEFAULT_CRIT_CHANCE:5},Oe={STR_DAMAGE:2,STR_MELEE_DAMAGE:.03,VIT_HP:8,VIT_ARMOR:1,VIT_HP_REGEN:.15,VIT_DAMAGE_REDUCTION:.3,VIT_TANK_DAMAGE:.02,AGI_CRIT_CHANCE:.5,AGI_SPEED:.01,AGI_DODGE:.3,AGI_PRECISION_DAMAGE:.02,LCK_GOLD:.005,LCK_MAT:.005,LCK_CRIT_DAMAGE:2,INT_XP_BONUS:1,INT_MAGIC_DAMAGE:.03,GEAR_STAT_SCALING:.02,GEAR_HP_SCALING:.5},gi={BASE_XP:50,XP_SCALING:1.3,STAT_POINTS_PER_LEVEL:3,DAMAGE_PER_LEVEL:2,HP_PER_LEVEL:8},wt={ARMOR_CONSTANT:250,ATTACKS_PER_SECOND:6,HEAL_ON_KILL:.03,DODGE_CAP:80,BASE_HP_REGEN:.5,HP_REGEN_CAP:25,DAMAGE_REDUCTION_CAP:75,LIFESTEAL_SOFT_CAP:15,LIFESTEAL_FALLOFF:.7},wf={GOLD_LOSS:.25,STONE_LOSS:.1},Sf={GEAR_DROP_CHANCE:.24,BONUS_STONE_CHANCE:.3},ne={BASE_GOLD_COST:100,GOLD_SCALING:1.4,BASE_STONE_COST:2,STONE_SCALING:1.25,ORB_SCALING:1.3,SHARD_SCALING:1.35,BASE_SUCCESS:100,MIN_SUCCESS_10_20:50,MIN_SUCCESS_20_PLUS:20,SUCCESS_DECREASE_PER_LEVEL:5,SUCCESS_DECREASE_AFTER_20:3,ORB_THRESHOLD:10,SHARD_THRESHOLD:20,DAMAGE_MULT_THRESHOLD:15,PITY_BONUS_PER_FAIL:3,PITY_MAX_BONUS:60,BASE_DMG_PER_PLUS:.5,DMG_TIER_SCALING:.3,BASE_HP_PER_PLUS:2,HP_TIER_SCALING:1,BASE_ARMOR_PER_PLUS:.2,ARMOR_TIER_SCALING:.1,EXP_BONUS_BASE:1.04,EXP_BONUS_THRESHOLD:10,EFFECT_BONUS_INTERVAL:4,EFFECT_BONUS_VALUE:3,DMG_MULT_PER_LEVEL:.02},xu={AUTO_SAVE_INTERVAL:3e4,SAVE_VERSION:1},Vt={BASE_STATS:{str:5,int:5,vit:5,agi:5,lck:5},PLAYER_HP:100,PLAYER_MAX_HP:100,ENEMY_HP:20,ENEMY_MAX_HP:20,GOLD:0,XP:0,LEVEL:1,KILLS:0,CURRENT_ZONE:0,STAT_POINTS:0},zl=t=>({gold:Math.floor(ne.BASE_GOLD_COST*Math.pow(ne.GOLD_SCALING,t)),enhanceStone:Math.floor(ne.BASE_STONE_COST*Math.pow(ne.STONE_SCALING,t)),blessedOrb:t>=ne.ORB_THRESHOLD?Math.floor(Math.pow(ne.ORB_SCALING,t-9)):0,celestialShard:t>=ne.SHARD_THRESHOLD?Math.floor(Math.pow(ne.SHARD_SCALING,t-19)):0}),yg=t=>t<ne.ORB_THRESHOLD?ne.BASE_SUCCESS:t<ne.SHARD_THRESHOLD?Math.max(ne.MIN_SUCCESS_10_20,ne.BASE_SUCCESS-(t-9)*ne.SUCCESS_DECREASE_PER_LEVEL):t<30?Math.max(ne.MIN_SUCCESS_20_PLUS,ne.MIN_SUCCESS_10_20-(t-19)*ne.SUCCESS_DECREASE_AFTER_20):ne.MIN_SUCCESS_20_PLUS,_f=(t,e=0)=>{const s=yg(t),n=Math.min(e*ne.PITY_BONUS_PER_FAIL,ne.PITY_MAX_BONUS);return Math.min(100,s+n)},Jv=t=>Math.min(t*ne.PITY_BONUS_PER_FAIL,ne.PITY_MAX_BONUS),wr=(t,e=0)=>{const s={dmg:ne.BASE_DMG_PER_PLUS+e*ne.DMG_TIER_SCALING,hp:ne.BASE_HP_PER_PLUS+e*ne.HP_TIER_SCALING,armor:ne.BASE_ARMOR_PER_PLUS+e*ne.ARMOR_TIER_SCALING},n=t>=ne.EXP_BONUS_THRESHOLD?Math.pow(ne.EXP_BONUS_BASE,t-9):1;return{dmgBonus:Math.floor(t*s.dmg*n),hpBonus:Math.floor(t*s.hp*n),armorBonus:Math.floor(t*s.armor*n),effectBonus:Math.floor(t/ne.EFFECT_BONUS_INTERVAL)*ne.EFFECT_BONUS_VALUE,dmgMult:t>=ne.DAMAGE_MULT_THRESHOLD?1+(t-14)*ne.DMG_MULT_PER_LEVEL:1}},zi=t=>{const e=t.stats;let s=Gs.DAMAGE+e.str*Oe.STR_DAMAGE,n=Gs.HP+e.vit*Oe.VIT_HP,r=e.vit*Oe.VIT_ARMOR,i=1,a=1,o=1+e.lck*Oe.LCK_GOLD,c=1+e.agi*Oe.AGI_SPEED,u=1+e.lck*Oe.LCK_MAT,d=0,h=0,f=Gs.CRIT_CHANCE+e.agi*Oe.AGI_CRIT_CHANCE,p=Gs.CRIT_DAMAGE+e.lck*Oe.LCK_CRIT_DAMAGE,g=e.agi*Oe.AGI_DODGE,v=e.int*Oe.INT_XP_BONUS,b=1+e.int*Oe.INT_MAGIC_DAMAGE,x=1+e.str*Oe.STR_MELEE_DAMAGE,m=1+e.agi*Oe.AGI_PRECISION_DAMAGE,y=1+e.vit*Oe.VIT_TANK_DAMAGE,w=wt.BASE_HP_REGEN+e.vit*Oe.VIT_HP_REGEN,k=e.vit*Oe.VIT_DAMAGE_REDUCTION,_=1,S=null;Object.entries(t.gear).forEach(([D,N])=>{if(N){const E=we[N.tier].statMult,O=wr(N.plus||0,N.tier);let B=il[D];if(D==="weapon"&&N.weaponType){const T=Rn.find(R=>R.id===N.weaponType)||jr.find(R=>R.id===N.weaponType);T&&(B={...B,...T,baseArmor:0},c+=T.speedBonus,f+=T.critBonus,S=T.scaling)}const F=N.isBossItem&&N.statBonus?N.statBonus:1;s+=Math.floor(B.baseDmg*E*F+O.dmgBonus),n+=Math.floor(B.baseHp*E*F+O.hpBonus),r+=Math.floor((B.baseArmor||0)*E*F)+O.armorBonus,_*=O.dmgMult;const L=1+(e[B.scaling]||0)*Oe.GEAR_STAT_SCALING;s+=Math.floor(B.baseDmg*E*F*(L-1)),n+=Math.floor(B.baseHp*E*F*(L-1)*Oe.GEAR_HP_SCALING),N.effects&&N.effects.forEach(T=>{const R=T.value*(1+O.effectBonus/100);switch(T.id){case"lifesteal":d+=R;break;case"thorns":h+=R;break;case"critChance":f+=R;break;case"critDamage":p+=R;break;case"bonusDmg":s+=R;break;case"bonusHp":n+=R;break;case"goldFind":o+=R/100;break;case"xpBonus":v+=R;break;case"dodge":g+=R;break;case"hpRegen":w+=R;break;case"damageReduction":k+=R;break}})}}),s+=(t.level-1)*gi.DAMAGE_PER_LEVEL,n+=(t.level-1)*gi.HP_PER_LEVEL,t.unlockedSkills.forEach(D=>{const N=Do[D];N.effect.dmgMult&&(i+=N.effect.dmgMult),N.effect.hpMult&&(a+=N.effect.hpMult),N.effect.goldMult&&(o+=N.effect.goldMult),N.effect.speedMult&&(c+=N.effect.speedMult),N.effect.matMult&&(u+=N.effect.matMult),N.effect.lifesteal&&(d+=N.effect.lifesteal),N.effect.critChance&&(f+=N.effect.critChance),N.effect.thorns&&(h+=N.effect.thorns),N.effect.hpRegen&&(w+=N.effect.hpRegen),N.effect.damageReduction&&(k+=N.effect.damageReduction)});const A={};Object.entries(t.gear).forEach(([D,N])=>{N&&N.bossSet&&(A[N.bossSet]=(A[N.bossSet]||0)+1)}),Object.entries(A).forEach(([D,N])=>{const E=Bt[D]||ms[D];E&&E.setBonuses.forEach(O=>{N>=O.pieces&&(O.effect.dmgMult&&(i+=O.effect.dmgMult),O.effect.hpMult&&(a+=O.effect.hpMult),O.effect.speedMult&&(c+=O.effect.speedMult),O.effect.goldMult&&(o+=O.effect.goldMult),O.effect.matMult&&(u+=O.effect.matMult),O.effect.lifesteal&&(d+=O.effect.lifesteal),O.effect.critChance&&(f+=O.effect.critChance),O.effect.critDamage&&(p+=O.effect.critDamage),O.effect.thorns&&(h+=O.effect.thorns),O.effect.dodge&&(g+=O.effect.dodge),O.effect.xpBonus&&(v+=O.effect.xpBonus),O.effect.hpRegen&&(w+=O.effect.hpRegen),O.effect.damageReduction&&(k+=O.effect.damageReduction))})}),Object.entries(t.prestigeSkills).forEach(([D,N])=>{if(N>0){const E=gu[parseInt(D)];E&&E.effect&&(E.effect.dmgMult&&(i+=E.effect.dmgMult*N),E.effect.hpMult&&(a+=E.effect.hpMult*N),E.effect.goldMult&&(o+=E.effect.goldMult*N),E.effect.speedMult&&(c+=E.effect.speedMult*N),E.effect.critChance&&(f+=E.effect.critChance*N),E.effect.critDamage&&(p+=E.effect.critDamage*N),E.effect.armor&&(r+=E.effect.armor*N),E.effect.lifesteal&&(d+=E.effect.lifesteal*N),E.effect.xpBonus&&(v+=E.effect.xpBonus*N),E.effect.hpRegen&&(w+=E.effect.hpRegen*N),E.effect.damageReduction&&(k+=E.effect.damageReduction*N))}});let C=1;switch(S){case"int":C=b;break;case"str":C=x;break;case"agi":C=m;break;case"vit":C=y;break}const M=i*C;let j=d;if(d>wt.LIFESTEAL_SOFT_CAP){const D=d-wt.LIFESTEAL_SOFT_CAP;j=wt.LIFESTEAL_SOFT_CAP+D*wt.LIFESTEAL_FALLOFF}return{damage:Math.floor(s*M*_),maxHp:Math.floor(n*a),armor:r,goldMult:o,matMult:u,speedMult:c,critChance:f,critDamage:p,lifesteal:j,lifestealRaw:d,thorns:h,dodge:Math.min(wt.DODGE_CAP,g),xpBonus:v,hpRegen:Math.min(wt.HP_REGEN_CAP,w),damageReduction:Math.min(wt.DAMAGE_REDUCTION_CAP,k)}};class eb{constructor(e){this.stateManager=e,this.callbacks={onFloatingText:()=>{},onLootDrop:()=>{},onEnemyDeath:()=>{}}}setCallbacks(e){this.callbacks={...this.callbacks,...e}}shouldAutoSalvageItem(e,s){const n=s.autoSalvageTier??-1;return n===-1?!0:!(e.tier>n||(s.autoSalvageKeepEffects??!0)&&e.effects&&e.effects.length>0)}tick(e){const s=this.stateManager.getState(),n=zi(s),r=typeof n.maxHp=="number"&&!isNaN(n.maxHp)&&n.maxHp>0?n.maxHp:Gs.DEFAULT_MAX_HP,i=en(s.currentZone);let a={...s},o=[...s.combatLog].slice(-4),c={};if((typeof a.playerHp!="number"||isNaN(a.playerHp))&&(a.playerHp=r),(typeof a.enemyHp!="number"||isNaN(a.enemyHp))&&(a.enemyHp=i.enemyHp),n.hpRegen>0&&a.playerHp<r){const h=n.hpRegen/100*r/wt.ATTACKS_PER_SECOND,f=Math.floor(h);f>0&&(a.playerHp=Math.min(a.playerHp+f,r),Math.random()<.17&&this.callbacks.onFloatingText(`+${f}`,"regen","player"),c.lastRegen=f)}let u=n.damage||Gs.DEFAULT_DAMAGE,d=Math.random()*100<(n.critChance||Gs.DEFAULT_CRIT_CHANCE);if(d&&(u=Math.floor(u*(n.critDamage||Gs.CRIT_DAMAGE)/100)),a.enemyHp-=u,this.callbacks.onFloatingText(d?` ${u}!`:`-${u}`,d?"crit":"playerDmg","enemy"),c.lastDamage=u,c.isPlayerTurn=!0,n.lifesteal>0){const h=Math.floor(u*n.lifesteal/100);a.playerHp=Math.min(a.playerHp+h,r),h>0&&(this.callbacks.onFloatingText(`+${h}`,"heal","player"),c.lastHeal=h)}if(a.enemyHp<=0)this.handleEnemyDeath(a,n,i,o,r);else{if(Math.random()*100<n.dodge)this.callbacks.onFloatingText("!","dodge","player"),c.lastDamage=0;else{const f=n.armor/(n.armor+wt.ARMOR_CONSTANT);let p=Math.floor(i.enemyDmg*(1-f));if(n.damageReduction>0&&(p=Math.floor(p*(1-n.damageReduction/100))),p=Math.max(1,p),a.playerHp-=p,this.callbacks.onFloatingText(`-${p}`,"enemyDmg","player"),c.lastDamage=p,c.isPlayerTurn=!1,n.thorns>0){const g=Math.floor(p*n.thorns/100);a.enemyHp-=g,g>0&&this.callbacks.onFloatingText(`-${g}`,"thorns","enemy")}}a.playerHp<=0&&this.handlePlayerDeath(a,n,i,r)}return a.combatLog=o,a.playerMaxHp=n.maxHp,this.stateManager.setState(a),c}handleEnemyDeath(e,s,n,r,i){const a=Math.floor((n.goldMin+Math.random()*(n.goldMax-n.goldMin))*s.goldMult),o=Math.floor(n.enemyHp/2*(1+s.xpBonus/100)),c=n.drops,u=Math.floor(e.currentZone/2)+1,d=Math.random()<c.enhanceStone?Math.ceil(Math.random()*Math.max(1,u/2)):0,h=Math.random()<c.blessedOrb?Math.ceil(Math.random()*Math.max(1,u/3)):0,f=Math.random()<c.celestialShard?Math.ceil(Math.random()*Math.max(1,u/4)):0,p=c.prestigeStone&&Math.random()<c.prestigeStone?Math.ceil(Math.random()*2):0;let g=null;if(!n.isBoss&&n.gearChance&&Math.random()<n.gearChance*s.matMult&&(g=Zv(n.gearTier||0,n.id,n.prestigeReq||0)),e.gold+=a,e.totalGold+=a,e.enhanceStone+=d,e.blessedOrb+=h,e.celestialShard+=f,e.prestigeStones+=p,e.xp+=o,e.kills+=1,e.zoneKills={...e.zoneKills},e.zoneKills[e.currentZone]=(e.zoneKills[e.currentZone]||0)+1,g)if(e.autoSalvage&&this.shouldAutoSalvageItem(g,e)){const y=Lo(g,1);e.gold+=y.gold,e.enhanceStone+=y.enhanceStone,r.push({type:"autoSalvage",msg:`${g.name} salvaged!`})}else e.inventory=Gi(e.inventory,g),r.push({type:"gearDrop",msg:`${g.name} dropped!`});n.isBoss&&n.bossSet&&this.handleBossLoot(e,n,r);const v=[];v.push({text:`+${a}s`,color:"#c0c0c0"}),v.push({text:`+${o}xp`,color:"#a855f7"});const b=g&&e.autoSalvage&&this.shouldAutoSalvageItem(g,e);if(g&&!b){const m=we[g.tier]||we[0];v.push({text:`${g.name}`,color:m.color})}d&&v.push({text:`+${d}${In.enhanceStone.icon}`,color:In.enhanceStone.color}),h&&v.push({text:`+${h}${In.blessedOrb.icon}`,color:In.blessedOrb.color}),f&&v.push({text:`+${f}${In.celestialShard.icon}`,color:In.celestialShard.color}),this.callbacks.onLootDrop(v),this.callbacks.onEnemyDeath(n.isBoss);const x=m=>Math.floor(gi.BASE_XP*Math.pow(gi.XP_SCALING,m-1));for(;e.xp>=x(e.level);)e.xp-=x(e.level),e.level+=1,e.statPoints=(e.statPoints||0)+gi.STAT_POINTS_PER_LEVEL,r.push({type:"level",msg:`LEVEL UP! Lv.${e.level} (+3 stat points)`}),this.callbacks.onFloatingText("!","levelup","player"),Do.forEach(m=>{m.unlockLevel===e.level&&!e.unlockedSkills.includes(m.id)&&(e.unlockedSkills=[...e.unlockedSkills,m.id],r.push({type:"skill",msg:`Unlocked: ${m.name}!`}))});e.enemyHp=n.enemyHp,e.enemyMaxHp=n.enemyHp,e.playerHp=Math.min(e.playerHp+Math.floor(i*wt.HEAL_ON_KILL),i)}handleBossLoot(e,s,n){const r=Bt[s.bossSet]||ms[s.bossSet],i=rl[s.bossSet];if(i){const o=1+(Math.random()<Sf.BONUS_STONE_CHANCE?1:0);e.bossStones||(e.bossStones={}),e.bossStones[s.bossSet]=(e.bossStones[s.bossSet]||0)+o,n.push({type:"bossStone",msg:`${i.name} x${o}!`}),this.callbacks.onFloatingText(`+${o} ${i.name}`,"bossStone","player")}const a=s.bossGearChance||Sf.GEAR_DROP_CHANCE;if(Math.random()<a&&r){const o=Object.keys(r.items),c=o[Math.floor(Math.random()*o.length)],u=r.items[c],d={slot:c,tier:r.tier,statBonus:r.statBonus,id:Date.now(),plus:0,effects:[u.effect],bossSet:s.bossSet,isBossItem:!0,weaponType:c==="weapon"?r.weaponType||"sword":null,name:u.name};if(e.autoSalvage&&this.shouldAutoSalvageItem(d,e)){const f=Lo(d,1);e.gold+=f.gold,e.enhanceStone+=f.enhanceStone,n.push({type:"autoSalvage",msg:`${u.name} salvaged!`})}else e.inventory=Gi(e.inventory,d),n.push({type:"bossLoot",msg:`${u.name} obtained!`})}}handlePlayerDeath(e,s,n,r){this.callbacks.onFloatingText("!","death","player");const i=Math.floor(e.gold*wf.GOLD_LOSS);i>0&&(e.gold-=i,this.callbacks.onFloatingText(`-${i}s`,"silverLoss","player"));const a=Math.floor(e.enhanceStone*wf.STONE_LOSS);a>0&&(e.enhanceStone-=a),e.deathsOnZone=(e.deathsOnZone||0)+1,e.playerHp=r,e.enemyHp=n.enemyHp,e.enemyMaxHp=n.enemyHp}}class tb{constructor(){this.state=JSON.parse(JSON.stringify(vf)),this.combatSystem=new eb(this),this.listeners=new Set,this.lastTime=0,this.accumulatedTime=0,this.isRunning=!1,this.animationFrameId=null,this.gameSpeed=1,this.speedListeners=new Set}setSpeed(e){this.gameSpeed=e;for(const s of this.speedListeners)s(e)}subscribeSpeed(e){return this.speedListeners.add(e),e(this.gameSpeed),()=>this.speedListeners.delete(e)}toggleCombat(){this.setState(e=>({...e,combatPaused:!e.combatPaused}))}setCombatPaused(e){this.setState(s=>({...s,combatPaused:e}))}getState(){return this.state}setState(e){typeof e=="function"?this.state=e(this.state):this.state=e,this.notifyListeners()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){for(const e of this.listeners)e(this.state)}on(e,s){return this.eventHandlers||(this.eventHandlers={}),this.eventHandlers[e]||(this.eventHandlers[e]=new Set),this.eventHandlers[e].add(s),()=>this.eventHandlers[e].delete(s)}emit(e,s){if(!(!this.eventHandlers||!this.eventHandlers[e]))for(const n of this.eventHandlers[e])n(s)}start(){this.combatSystem.setCallbacks({onFloatingText:(e,s,n)=>this.emit("floatingText",{text:e,type:s,target:n}),onLootDrop:e=>this.emit("lootDrop",{items:e}),onEnemyDeath:e=>this.emit("enemyDeath",{isBoss:e})}),!this.isRunning&&(this.isRunning=!0,this.lastTime=performance.now(),this.gameLoop())}stop(){this.isRunning=!1,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}async save(){return this.state.lastSaveTime=Date.now(),this.emit("floatingText",{x:100,y:50,text:"Game Saved",color:"#64748b"}),JSON.stringify(this.state)}processOfflineProgress(e){if(!e.lastSaveTime)return null;const n=Date.now()-e.lastSaveTime,r=Math.floor(n/1e3);if(r<5)return null;zi(e);const i=e.currentZone,a=Math.floor(r/3),o=a*(10+i*5),c=a*(20+i*10);return this.state.gold+=o,this.state.xp+=c,this.state.totalGold+=o,{time:r,kills:a,gold:o,xp:c}}gameLoop(){if(!this.isRunning)return;const e=performance.now(),s=e-this.lastTime;this.lastTime=e;const n=zi(this.state),r=Math.max(200,1e3-(n.speedMult-1)*500),i=Math.max(40,r/this.gameSpeed);for(this.accumulatedTime+=s,this.accumulatedTime>1e3&&(this.accumulatedTime=1e3);this.accumulatedTime>=i;)this.state.combatPaused||this.combatSystem.tick(i),this.accumulatedTime-=i;this.animationFrameId=requestAnimationFrame(()=>this.gameLoop())}performPrestige(){var c;if(!((this.state.zoneKills[39]||0)>=1))return;const n=((c=this.state.prestigeSkills)==null?void 0:c[8])||0,r=50+n*50,i=5+n*10,a=5+n*10,o=10+Math.floor(this.state.level/2);this.setState(u=>({...u,gold:r,ore:i,leather:a,enhanceStone:3,blessedOrb:0,celestialShard:0,level:1,xp:0,currentZone:0,stats:{str:5,int:5,vit:5,agi:5,lck:5},statPoints:0,gear:{weapon:null,helmet:null,armor:null,boots:null,belt:null,shield:null,gloves:null,amulet:null},inventory:[],unlockedSkills:[],enemyHp:20,enemyMaxHp:20,playerHp:100,playerMaxHp:100,kills:0,zoneKills:{},prestigeLevel:(u.prestigeLevel||0)+1,prestigeStones:(u.prestigeStones||0)+o,prestigeSkills:u.prestigeSkills||{},totalPrestiges:(u.totalPrestiges||0)+1})),this.emit("floatingText",{text:"ASCENDED!",type:"levelup",target:"player"})}upgradePrestigeSkill(e,s){this.state.prestigeStones<s||this.setState(n=>({...n,prestigeStones:n.prestigeStones-s,prestigeSkills:{...n.prestigeSkills,[e]:(n.prestigeSkills[e]||0)+1}}))}resetGame(){this.setState(JSON.parse(JSON.stringify(vf))),this.emit("floatingText",{text:"GAME RESET",type:"death",target:"player"})}cheat(){this.setState(e=>{const s={...e.bossStones},n=["crow","cerberus","demon","spider","shadow","abyss","behemoth","darkwolf","tyrant","inferno","scorpion"];for(const r of n)s[r]=(s[r]||0)+99;return{...e,gold:e.gold+9999999,enhanceStone:e.enhanceStone+99999,blessedOrb:e.blessedOrb+9999,celestialShard:e.celestialShard+999,prestigeStones:e.prestigeStones+999,statPoints:e.statPoints+500,level:Math.max(e.level,100),bossStones:s}}),console.log(" CHEAT ACTIVATED: +9.9M gold, +99K enhance stones, +9K orbs, +999 shards, +999 prestige stones, +500 stat points, +99 each boss stone, level 100"),this.emit("floatingText",{text:"CHEATS ON!",type:"levelup",target:"player"})}}const vg=I.createContext(null),sb=I.createContext(null);function nb(t){const e=[],s={stats:{...Vt.BASE_STATS},playerHp:Vt.PLAYER_HP,playerMaxHp:Vt.PLAYER_MAX_HP,enemyHp:Vt.ENEMY_HP,enemyMaxHp:Vt.ENEMY_MAX_HP,gold:Vt.GOLD,xp:Vt.XP,level:Vt.LEVEL,kills:Vt.KILLS,currentZone:Vt.CURRENT_ZONE,statPoints:Vt.STAT_POINTS,enhanceStone:0,blessedOrb:0,celestialShard:0,prestigeLevel:0,prestigeStones:0,inventory:[],gear:{},skills:[],unlockedSkills:[],textSize:"normal",autoSalvageTier:-1,autoSalvageKeepEffects:!0,inventorySort:"none"};if(t.saveVersion||(t.saveVersion=xu.SAVE_VERSION),!t.stats||typeof t.stats!="object")e.push("Invalid stats object, resetting to defaults"),t.stats={...s.stats};else for(const[r,i]of Object.entries(s.stats))(typeof t.stats[r]!="number"||isNaN(t.stats[r])||t.stats[r]<0)&&(e.push(`Invalid stat ${r}, resetting to ${i}`),t.stats[r]=i);const n=["playerHp","playerMaxHp","enemyHp","enemyMaxHp","gold","xp","level","kills","currentZone","statPoints","enhanceStone","blessedOrb","celestialShard","prestigeLevel","prestigeStones"];for(const r of n)(typeof t[r]!="number"||isNaN(t[r]))&&(e.push(`Invalid ${r}, resetting to default`),t[r]=s[r]),t[r]<0&&(t[r]=0);return t.level<1&&(t.level=1),t.playerHp>t.playerMaxHp&&(t.playerHp=t.playerMaxHp),t.enemyHp>t.enemyMaxHp&&(t.enemyHp=t.enemyMaxHp),Array.isArray(t.inventory)?t.inventory=t.inventory.filter(r=>r&&typeof r=="object"&&r.slot&&r.name):(e.push("Invalid inventory, resetting to empty"),t.inventory=[]),(!t.gear||typeof t.gear!="object")&&(e.push("Invalid gear, resetting to empty"),t.gear={}),Array.isArray(t.skills)||(t.skills=[]),Array.isArray(t.unlockedSkills)||(t.unlockedSkills=[]),["normal","large","xlarge"].includes(t.textSize)||(t.textSize=s.textSize),(typeof t.autoSalvageTier!="number"||t.autoSalvageTier<-1||t.autoSalvageTier>8)&&(t.autoSalvageTier=s.autoSalvageTier),typeof t.autoSalvageKeepEffects!="boolean"&&(t.autoSalvageKeepEffects=s.autoSalvageKeepEffects),["none","slot","tier","score"].includes(t.inventorySort)||(t.inventorySort=s.inventorySort),e.length>0&&console.warn("Save validation found issues:",e),{validated:t,errors:e}}function rb({children:t}){const e=I.useRef(null),[s,n]=I.useState(null),[r,i]=I.useState({playerHp:100,playerMaxHp:100,enemyHp:20,enemyMaxHp:20}),[a,o]=I.useState(null),[c,u]=I.useState([]),d=I.useRef(null),h=I.useRef(null);I.useEffect(()=>{const v=new tb;e.current=v,window.gm=v;const b=async()=>{try{const _=await window.storage.get("gear-grinder-save");let S=null;if(_&&_.value)try{S=JSON.parse(_.value)}catch(A){console.error("Main save corrupted:",A)}try{const A=localStorage.getItem("gear-grinder-save-backup");if(A){const C=JSON.parse(A);(!S||C.lastSaveTime&&(!S.lastSaveTime||C.lastSaveTime>S.lastSaveTime))&&(console.log("Using backup save (newer)"),S=C),localStorage.removeItem("gear-grinder-save-backup")}}catch(A){console.error("Backup save check failed:",A)}if(S){const{validated:A,errors:C}=nb(S);C.length>0&&console.warn(`Save loaded with ${C.length} corrections applied`),console.log("Loading save:",{zone:A.currentZone,level:A.level,gold:A.gold,kills:A.kills,lastSaveTime:A.lastSaveTime?new Date(A.lastSaveTime).toISOString():"never"}),v.state={...v.state,...A,combatLog:[],saveVersion:xu.SAVE_VERSION}}}catch(_){console.error("Save load error, starting fresh:",_)}const w=v.getState();n(w),i({playerHp:w.playerHp,playerMaxHp:w.playerMaxHp,enemyHp:w.enemyHp,enemyMaxHp:w.enemyMaxHp}),d.current=w,v.subscribe(_=>{const S=d.current,A=_.playerHp!==(S==null?void 0:S.playerHp)||_.playerMaxHp!==(S==null?void 0:S.playerMaxHp)||_.enemyHp!==(S==null?void 0:S.enemyHp)||_.enemyMaxHp!==(S==null?void 0:S.enemyMaxHp),C=_.gold!==(S==null?void 0:S.gold)||_.xp!==(S==null?void 0:S.xp)||_.level!==(S==null?void 0:S.level)||_.currentZone!==(S==null?void 0:S.currentZone)||_.kills!==(S==null?void 0:S.kills)||_.inventory!==(S==null?void 0:S.inventory)||_.gear!==(S==null?void 0:S.gear)||_.stats!==(S==null?void 0:S.stats)||_.statPoints!==(S==null?void 0:S.statPoints)||_.enhanceStone!==(S==null?void 0:S.enhanceStone)||_.blessedOrb!==(S==null?void 0:S.blessedOrb)||_.celestialShard!==(S==null?void 0:S.celestialShard)||_.prestigeLevel!==(S==null?void 0:S.prestigeLevel)||_.prestigeStones!==(S==null?void 0:S.prestigeStones)||_.autoSalvage!==(S==null?void 0:S.autoSalvage)||_.autoSalvageTier!==(S==null?void 0:S.autoSalvageTier)||_.autoSalvageKeepEffects!==(S==null?void 0:S.autoSalvageKeepEffects)||_.textSize!==(S==null?void 0:S.textSize)||_.inventorySort!==(S==null?void 0:S.inventorySort)||_.combatPaused!==(S==null?void 0:S.combatPaused)||_.unlockedAchievements!==(S==null?void 0:S.unlockedAchievements)||_.dailyStreak!==(S==null?void 0:S.dailyStreak)||_.lastDailyReward!==(S==null?void 0:S.lastDailyReward)||_.equipmentPresets!==(S==null?void 0:S.equipmentPresets);A&&i({playerHp:_.playerHp,playerMaxHp:_.playerMaxHp,enemyHp:_.enemyHp,enemyMaxHp:_.enemyMaxHp}),C&&n({..._}),d.current=_});const k=v.processOfflineProgress(v.state);k&&o(k),v.start()},x=async()=>{if(e.current)try{const w=await e.current.save();await window.storage.set("gear-grinder-save",w),console.log("Auto-save:",{zone:e.current.state.currentZone,level:e.current.state.level,gold:e.current.state.gold})}catch(w){console.error("Auto-save failed:",w)}};b();const m=setInterval(x,xu.AUTO_SAVE_INTERVAL),y=()=>{if(e.current){const w=JSON.stringify(e.current.state);try{localStorage.setItem("gear-grinder-save-backup",w)}catch(k){console.error("Backup save failed:",k)}}};return window.addEventListener("beforeunload",y),()=>{window.removeEventListener("beforeunload",y),clearInterval(m),x(),v.stop()}},[]),I.useEffect(()=>{const v=()=>{if(document.hidden){if(h.current=Date.now(),e.current)try{e.current.state.lastSaveTime=Date.now();const b=JSON.stringify(e.current.state);localStorage.setItem("gear-grinder-save-backup",b)}catch(b){console.error("Tab hidden save failed:",b)}}else if(h.current&&e.current){const b=Date.now();if(Math.floor((b-h.current)/1e3)>=5){const m=e.current,y=m.state.lastSaveTime;m.state.lastSaveTime=h.current;const w=m.processOfflineProgress(m.state);m.state.lastSaveTime=y,w&&(o(w),n({...m.state}))}h.current=null}};return document.addEventListener("visibilitychange",v),()=>{document.removeEventListener("visibilitychange",v)}},[]),I.useEffect(()=>{const v=(s==null?void 0:s.textSize)??"normal";v==="normal"?document.body.removeAttribute("data-text-size"):document.body.setAttribute("data-text-size",v)},[s==null?void 0:s.textSize]);const f=I.useCallback((v,b)=>{const x=Date.now()+Math.random();u(m=>[...m,{id:x,type:v,data:b}])},[]),p=I.useCallback(v=>{u(b=>b.filter(x=>x.id!==v))},[]),g=I.useMemo(()=>({gameManager:e.current,state:s,offlineRewards:a,clearOfflineRewards:()=>o(null),toasts:c,addToast:f,dismissToast:p}),[s,a,c,f,p]);return!s||!e.current?l.jsx("div",{className:"flex items-center justify-center h-screen bg-black text-white font-mono",children:l.jsx("div",{className:"text-xl animate-pulse",children:"LOADING GAME ASSETS..."})}):l.jsx(sb.Provider,{value:r,children:l.jsx(vg.Provider,{value:g,children:t})})}const Ke=()=>{const t=I.useContext(vg);if(!t)throw new Error("useGame must be used within GameProvider");return t},ib="modulepreload",ab=function(t){return"/"+t},kf={},Bo=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=ab(c),c in kf)return;kf[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ib,u||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var Y=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(Y||{});const yu=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Aa=(t,e)=>yu(t).priority??e,Xe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(yu).forEach(e=>{e.type.forEach(s=>{var n,r;return(r=(n=this._removeHandlers)[s])==null?void 0:r.call(n,e)})}),this},add(...t){return t.map(yu).forEach(e=>{e.type.forEach(s=>{var i,a;const n=this._addHandlers,r=this._queue;n[s]?(a=n[s])==null||a.call(n,e):(r[s]=r[s]||[],(i=r[s])==null||i.push(e))})}),this},handle(t,e,s){var a;const n=this._addHandlers,r=this._removeHandlers;if(n[t]||r[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,r[t]=s;const i=this._queue;return i[t]&&((a=i[t])==null||a.forEach(o=>e(o)),delete i[t]),this},handleByMap(t,e){return this.handle(t,s=>{s.name&&(e[s.name]=s.ref)},s=>{s.name&&delete e[s.name]})},handleByNamedList(t,e,s=-1){return this.handle(t,n=>{e.findIndex(i=>i.name===n.name)>=0||(e.push({name:n.name,value:n.ref}),e.sort((i,a)=>Aa(a.value,s)-Aa(i.value,s)))},n=>{const r=e.findIndex(i=>i.name===n.name);r!==-1&&e.splice(r,1)})},handleByList(t,e,s=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((r,i)=>Aa(i,s)-Aa(r,s)))},n=>{const r=e.indexOf(n.ref);r!==-1&&e.splice(r,1)})},mixin(t,...e){for(const s of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(s))}},ob={extension:{type:Y.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Bo(()=>import("./browserAll-DzGzDtuO.js"),__vite__mapDeps([0,1,2]))}},lb={extension:{type:Y.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Bo(()=>import("./webworkerAll-BbhzvHxR.js"),__vite__mapDeps([1,2]))}};class We{constructor(e,s,n){this._x=s||0,this._y=n||0,this._observer=e}clone(e){return new We(e??this._observer,this._x,this._y)}set(e=0,s=e){return(this._x!==e||this._y!==s)&&(this._x=e,this._y=s,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var bg={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,s="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(s=!1));function r(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new r(d,h||c,f),g=s?s+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(s?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=s?s+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,g=new Array(p);f<p;f++)g[f]=h[f].fn;return g},o.prototype.listenerCount=function(u){var d=s?s+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,f,p,g){var v=s?s+u:u;if(!this._events[v])return!1;var b=this._events[v],x=arguments.length,m,y;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,f),!0;case 5:return b.fn.call(b.context,d,h,f,p),!0;case 6:return b.fn.call(b.context,d,h,f,p,g),!0}for(y=1,m=new Array(x-1);y<x;y++)m[y-1]=arguments[y];b.fn.apply(b.context,m)}else{var w=b.length,k;for(y=0;y<w;y++)switch(b[y].once&&this.removeListener(u,b[y].fn,void 0,!0),x){case 1:b[y].fn.call(b[y].context);break;case 2:b[y].fn.call(b[y].context,d);break;case 3:b[y].fn.call(b[y].context,d,h);break;case 4:b[y].fn.call(b[y].context,d,h,f);break;default:if(!m)for(k=1,m=new Array(x-1);k<x;k++)m[k-1]=arguments[k];b[y].fn.apply(b[y].context,m)}}return!0},o.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,f){var p=s?s+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!f||g.once)&&(!h||g.context===h)&&a(this,p);else{for(var v=0,b=[],x=g.length;v<x;v++)(g[v].fn!==d||f&&!g[v].once||h&&g[v].context!==h)&&b.push(g[v]);b.length?this._events[p]=b.length===1?b[0]:b:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=s?s+u:u,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=s,o.EventEmitter=o,t.exports=o})(bg);var cb=bg.exports;const es=Fu(cb),ub=Math.PI*2,db=180/Math.PI,hb=Math.PI/180;class nt{constructor(e=0,s=0){this.x=0,this.y=0,this.x=e,this.y=s}clone(){return new nt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,s=e){return this.x=e,this.y=s,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return $l.x=0,$l.y=0,$l}}const $l=new nt;class se{constructor(e=1,s=0,n=0,r=1,i=0,a=0){this.array=null,this.a=e,this.b=s,this.c=n,this.d=r,this.tx=i,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,s,n,r,i,a){return this.a=e,this.b=s,this.c=n,this.d=r,this.tx=i,this.ty=a,this}toArray(e,s){this.array||(this.array=new Float32Array(9));const n=s||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,s){s=s||new nt;const n=e.x,r=e.y;return s.x=this.a*n+this.c*r+this.tx,s.y=this.b*n+this.d*r+this.ty,s}applyInverse(e,s){s=s||new nt;const n=this.a,r=this.b,i=this.c,a=this.d,o=this.tx,c=this.ty,u=1/(n*a+i*-r),d=e.x,h=e.y;return s.x=a*u*d+-i*u*h+(c*i-o*a)*u,s.y=n*u*h+-r*u*d+(-c*n+o*r)*u,s}translate(e,s){return this.tx+=e,this.ty+=s,this}scale(e,s){return this.a*=e,this.d*=s,this.c*=e,this.b*=s,this.tx*=e,this.ty*=s,this}rotate(e){const s=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,a=this.tx;return this.a=r*s-this.b*n,this.b=r*n+this.b*s,this.c=i*s-this.d*n,this.d=i*n+this.d*s,this.tx=a*s-this.ty*n,this.ty=a*n+this.ty*s,this}append(e){const s=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*s+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*s+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*s+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}appendFrom(e,s){const n=e.a,r=e.b,i=e.c,a=e.d,o=e.tx,c=e.ty,u=s.a,d=s.b,h=s.c,f=s.d;return this.a=n*u+r*h,this.b=n*d+r*f,this.c=i*u+a*h,this.d=i*d+a*f,this.tx=o*u+c*h+s.tx,this.ty=o*d+c*f+s.ty,this}setTransform(e,s,n,r,i,a,o,c,u){return this.a=Math.cos(o+u)*i,this.b=Math.sin(o+u)*i,this.c=-Math.sin(o-c)*a,this.d=Math.cos(o-c)*a,this.tx=e-(n*this.a+r*this.c),this.ty=s-(n*this.b+r*this.d),this}prepend(e){const s=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=s*e.a+this.ty*e.c+e.tx,this.ty=s*e.b+this.ty*e.d+e.ty,this}decompose(e){const s=this.a,n=this.b,r=this.c,i=this.d,a=e.pivot,o=-Math.atan2(-r,i),c=Math.atan2(n,s),u=Math.abs(o+c);return u<1e-5||Math.abs(ub-u)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=c),e.scale.x=Math.sqrt(s*s+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(a.x*s+a.y*r),e.position.y=this.ty+(a.x*n+a.y*i),e}invert(){const e=this.a,s=this.b,n=this.c,r=this.d,i=this.tx,a=e*r-s*n;return this.a=r/a,this.b=-s/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-r*i)/a,this.ty=-(e*this.ty-s*i)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new se;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return pb.identity()}static get shared(){return fb.identity()}}const fb=new se,pb=new se,pn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],mn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],gn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],xn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],vu=[],wg=[],ja=Math.sign;function mb(){for(let t=0;t<16;t++){const e=[];vu.push(e);for(let s=0;s<16;s++){const n=ja(pn[t]*pn[s]+gn[t]*mn[s]),r=ja(mn[t]*pn[s]+xn[t]*mn[s]),i=ja(pn[t]*gn[s]+gn[t]*xn[s]),a=ja(mn[t]*gn[s]+xn[t]*xn[s]);for(let o=0;o<16;o++)if(pn[o]===n&&mn[o]===r&&gn[o]===i&&xn[o]===a){e.push(o);break}}}for(let t=0;t<16;t++){const e=new se;e.set(pn[t],mn[t],gn[t],xn[t],0,0),wg.push(e)}}mb();const he={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>pn[t],uY:t=>mn[t],vX:t=>gn[t],vY:t=>xn[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>vu[t][e],sub:(t,e)=>vu[t][he.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?he.S:he.N:Math.abs(e)*2<=Math.abs(t)?t>0?he.E:he.W:e>0?t>0?he.SE:he.SW:t>0?he.NE:he.NW,matrixAppendRotationInv:(t,e,s=0,n=0)=>{const r=wg[he.inv(e)];r.tx=s,r.ty=n,t.append(r)},transformRectCoords:(t,e,s,n)=>{const{x:r,y:i,width:a,height:o}=t,{x:c,y:u,width:d,height:h}=e;return s===he.E?(n.set(r+c,i+u,a,o),n):s===he.S?n.set(d-i-o+c,r+u,o,a):s===he.W?n.set(d-r-a+c,h-i-o+u,a,o):s===he.N?n.set(i+c,h-r-a+u,o,a):n.set(r+c,i+u,a,o)}},Ta=[new nt,new nt,new nt,new nt];class ve{constructor(e=0,s=0,n=0,r=0){this.type="rectangle",this.x=Number(e),this.y=Number(s),this.width=Number(n),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new ve(0,0,0,0)}clone(){return new ve(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,s){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&s>=this.y&&s<this.y+this.height}strokeContains(e,s,n,r=.5){const{width:i,height:a}=this;if(i<=0||a<=0)return!1;const o=this.x,c=this.y,u=n*(1-r),d=n-u,h=o-u,f=o+i+u,p=c-u,g=c+a+u,v=o+d,b=o+i-d,x=c+d,m=c+a-d;return e>=h&&e<=f&&s>=p&&s<=g&&!(e>v&&e<b&&s>x&&s<m)}intersects(e,s){if(!s){const A=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=A)return!1;const M=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>M}const n=this.left,r=this.right,i=this.top,a=this.bottom;if(r<=n||a<=i)return!1;const o=Ta[0].set(e.left,e.top),c=Ta[1].set(e.left,e.bottom),u=Ta[2].set(e.right,e.top),d=Ta[3].set(e.right,e.bottom);if(u.x<=o.x||c.y<=o.y)return!1;const h=Math.sign(s.a*s.d-s.b*s.c);if(h===0||(s.apply(o,o),s.apply(c,c),s.apply(u,u),s.apply(d,d),Math.max(o.x,c.x,u.x,d.x)<=n||Math.min(o.x,c.x,u.x,d.x)>=r||Math.max(o.y,c.y,u.y,d.y)<=i||Math.min(o.y,c.y,u.y,d.y)>=a))return!1;const f=h*(c.y-o.y),p=h*(o.x-c.x),g=f*n+p*i,v=f*r+p*i,b=f*n+p*a,x=f*r+p*a;if(Math.max(g,v,b,x)<=f*o.x+p*o.y||Math.min(g,v,b,x)>=f*d.x+p*d.y)return!1;const m=h*(o.y-u.y),y=h*(u.x-o.x),w=m*n+y*i,k=m*r+y*i,_=m*n+y*a,S=m*r+y*a;return!(Math.max(w,k,_,S)<=m*o.x+y*o.y||Math.min(w,k,_,S)>=m*d.x+y*d.y)}pad(e=0,s=e){return this.x-=e,this.y-=s,this.width+=e*2,this.height+=s*2,this}fit(e){const s=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=s,this.width=Math.max(n-s,0),this.y=r,this.height=Math.max(i-r,0),this}ceil(e=1,s=.001){const n=Math.ceil((this.x+this.width-s)*e)/e,r=Math.ceil((this.y+this.height-s)*e)/e;return this.x=Math.floor((this.x+s)*e)/e,this.y=Math.floor((this.y+s)*e)/e,this.width=n-this.x,this.height=r-this.y,this}scale(e,s=e){return this.x*=e,this.y*=s,this.width*=e,this.height*=s,this}enlarge(e){const s=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=s,this.width=n-s,this.y=r,this.height=i-r,this}getBounds(e){return e||(e=new ve),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const s=e.x,n=e.y,r=e.x+e.width,i=e.y+e.height;return s>=this.x&&s<this.x+this.width&&n>=this.y&&n<this.y+this.height&&r>=this.x&&r<this.x+this.width&&i>=this.y&&i<this.y+this.height}set(e,s,n,r){return this.x=e,this.y=s,this.width=n,this.height=r,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Vl={default:-1};function je(t="default"){return Vl[t]===void 0&&(Vl[t]=-1),++Vl[t]}const Cf=new Set,ue="8.0.0",gb="8.3.4",nr={quiet:!1,noColor:!1},Z=(t,e,s=3)=>{if(nr.quiet||Cf.has(e))return;let n=new Error().stack;const r=`${e}
Deprecated since v${t}`,i=typeof console.groupCollapsed=="function"&&!nr.noColor;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",r):(n=n.split(`
`).splice(s).join(`
`),i?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",r),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",r),console.warn(n))),Cf.add(e)};Object.defineProperties(Z,{quiet:{get:()=>nr.quiet,set:t=>{nr.quiet=t},enumerable:!0,configurable:!1},noColor:{get:()=>nr.noColor,set:t=>{nr.noColor=t},enumerable:!0,configurable:!1}});const Sg=()=>{};function Sr(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function Mf(t){return!(t&t-1)&&!!t}function _g(t){const e={};for(const s in t)t[s]!==void 0&&(e[s]=t[s]);return e}const Nf=Object.create(null);function xb(t){const e=Nf[t];return e===void 0&&(Nf[t]=je("resource")),e}const kg=class Cg extends es{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...Cg.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Z(ue,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=xb(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};kg.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let _r=kg;const Mg=class Ng extends es{constructor(e={}){super(),this.options=e,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=je("textureSource"),this._resourceType="textureSource",this._resourceId=je("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...Ng.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new _r(_g(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var s,n;this.style!==e&&((s=this._style)==null||s.off("change",this._onStyleChange,this),this._style=e,(n=this._style)==null||n.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){var e,s;this._resourceId=je("resource"),this.emit("change",this),this.emit("unload",this);for(const n in this._gpuData)(s=(e=this._gpuData[n])==null?void 0:e.destroy)==null||s.call(e);this._gpuData=Object.create(null)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,s,n){n||(n=this._resolution),e||(e=this.width),s||(s=this.height);const r=Math.round(e*n),i=Math.round(s*n);return this.width=r/n,this.height=i/n,this._resolution=n,this.pixelWidth===r&&this.pixelHeight===i?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=i,this.emit("resize",this),this._resourceId=je("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Mf(this.pixelWidth)&&Mf(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};Mg.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let ts=Mg;class Ld extends ts{constructor(e){const s=e.resource||new Float32Array(e.width*e.height*4);let n=e.format;n||(s instanceof Float32Array?n="rgba32float":s instanceof Int32Array||s instanceof Uint32Array?n="rgba32uint":s instanceof Int16Array||s instanceof Uint16Array?n="rgba16uint":(s instanceof Int8Array,n="bgra8unorm")),super({...e,resource:s,format:n}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Ld.extension=Y.TextureSource;const Af=new se;class yb{constructor(e,s){this.mapCoord=new se,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof s>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=s,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var s;this.texture!==e&&((s=this._texture)==null||s.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,s){s===void 0&&(s=e);const n=this.mapCoord;for(let r=0;r<e.length;r+=2){const i=e[r],a=e[r+1];s[r]=i*n.a+a*n.c+n.tx,s[r+1]=i*n.b+a*n.d+n.ty}return s}update(){const e=this._texture;this._updateID++;const s=e.uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const n=e.orig,r=e.trim;r&&(Af.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Af));const i=e.source,a=this.uClampFrame,o=this.clampMargin/i._resolution,c=this.clampOffset/i._resolution;return a[0]=(e.frame.x+o+c)/i.width,a[1]=(e.frame.y+o+c)/i.height,a[2]=(e.frame.x+e.frame.width-o+c)/i.width,a[3]=(e.frame.y+e.frame.height-o+c)/i.height,this.uClampOffset[0]=this.clampOffset/i.pixelWidth,this.uClampOffset[1]=this.clampOffset/i.pixelHeight,this.isSimple=e.frame.width===i.width&&e.frame.height===i.height&&e.rotate===0,!0}}class te extends es{constructor({source:e,label:s,frame:n,orig:r,trim:i,defaultAnchor:a,defaultBorders:o,rotate:c,dynamic:u}={}){if(super(),this.uid=je("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ve,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=s,this.source=(e==null?void 0:e.source)??new ts,this.noFrame=!n,n)this.frame.copyFrom(n);else{const{width:d,height:h}=this._source;this.frame.width=d,this.frame.height=h}this.orig=r||this.frame,this.trim=i,this.rotate=c??0,this.defaultAnchor=a,this.defaultBorders=o,this.destroyed=!1,this.dynamic=u||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new yb(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:s}=this,{width:n,height:r}=this._source,i=s.x/n,a=s.y/r,o=s.width/n,c=s.height/r;let u=this.rotate;if(u){const d=o/2,h=c/2,f=i+d,p=a+h;u=he.add(u,he.NW),e.x0=f+d*he.uX(u),e.y0=p+h*he.uY(u),u=he.add(u,2),e.x1=f+d*he.uX(u),e.y1=p+h*he.uY(u),u=he.add(u,2),e.x2=f+d*he.uX(u),e.y2=p+h*he.uY(u),u=he.add(u,2),e.x3=f+d*he.uX(u),e.y3=p+h*he.uY(u)}else e.x0=i,e.y0=a,e.x1=i+o,e.y1=a,e.x2=i+o,e.y2=a+c,e.x3=i,e.y3=a+c}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Z(ue,"Texture.baseTexture is now Texture.source"),this._source}}te.EMPTY=new te({label:"EMPTY",source:new ts({label:"EMPTY"})});te.EMPTY.destroy=Sg;te.WHITE=new te({source:new Ld({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});te.WHITE.destroy=Sg;function vb(t,e,s){const{width:n,height:r}=s.orig,i=s.trim;if(i){const a=i.width,o=i.height;t.minX=i.x-e._x*n,t.maxX=t.minX+a,t.minY=i.y-e._y*r,t.maxY=t.minY+o}else t.minX=-e._x*n,t.maxX=t.minX+n,t.minY=-e._y*r,t.maxY=t.minY+r}const jf=new se;class Jt{constructor(e=1/0,s=1/0,n=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=jf,this.minX=e,this.minY=s,this.maxX=n,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ve);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=jf,this}set(e,s,n,r){this.minX=e,this.minY=s,this.maxX=n,this.maxY=r}addFrame(e,s,n,r,i){i||(i=this.matrix);const a=i.a,o=i.b,c=i.c,u=i.d,d=i.tx,h=i.ty;let f=this.minX,p=this.minY,g=this.maxX,v=this.maxY,b=a*e+c*s+d,x=o*e+u*s+h;b<f&&(f=b),x<p&&(p=x),b>g&&(g=b),x>v&&(v=x),b=a*n+c*s+d,x=o*n+u*s+h,b<f&&(f=b),x<p&&(p=x),b>g&&(g=b),x>v&&(v=x),b=a*e+c*r+d,x=o*e+u*r+h,b<f&&(f=b),x<p&&(p=x),b>g&&(g=b),x>v&&(v=x),b=a*n+c*r+d,x=o*n+u*r+h,b<f&&(f=b),x<p&&(p=x),b>g&&(g=b),x>v&&(v=x),this.minX=f,this.minY=p,this.maxX=g,this.maxY=v}addRect(e,s){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,s)}addBounds(e,s){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,s)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const s=this.minX,n=this.minY,r=this.maxX,i=this.maxY,{a,b:o,c,d:u,tx:d,ty:h}=e;let f=a*s+c*n+d,p=o*s+u*n+h;this.minX=f,this.minY=p,this.maxX=f,this.maxY=p,f=a*r+c*n+d,p=o*r+u*n+h,this.minX=f<this.minX?f:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=p>this.maxY?p:this.maxY,f=a*s+c*i+d,p=o*s+u*i+h,this.minX=f<this.minX?f:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=p>this.maxY?p:this.maxY,f=a*r+c*i+d,p=o*r+u*i+h,this.minX=f<this.minX?f:this.minX,this.minY=p<this.minY?p:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=p>this.maxY?p:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,s,n,r){return this.minX<e&&(this.minX=e),this.maxX>s&&(this.maxX=s),this.minY<n&&(this.minY=n),this.maxY>r&&(this.maxY=r),this}pad(e,s=e){return this.minX-=e,this.maxX+=e,this.minY-=s,this.maxY+=s,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Jt(this.minX,this.minY,this.maxX,this.maxY)}scale(e,s=e){return this.minX*=e,this.minY*=s,this.maxX*=e,this.maxY*=s,this}get x(){return this.minX}set x(e){const s=this.maxX-this.minX;this.minX=e,this.maxX=e+s}get y(){return this.minY}set y(e){const s=this.maxY-this.minY;this.minY=e,this.maxY=e+s}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,s,n,r){let i=this.minX,a=this.minY,o=this.maxX,c=this.maxY;r||(r=this.matrix);const u=r.a,d=r.b,h=r.c,f=r.d,p=r.tx,g=r.ty;for(let v=s;v<n;v+=2){const b=e[v],x=e[v+1],m=u*b+h*x+p,y=d*b+f*x+g;i=m<i?m:i,a=y<a?y:a,o=m>o?m:o,c=y>c?y:c}this.minX=i,this.minY=a,this.maxX=o,this.maxY=c}containsPoint(e,s){return this.minX<=e&&this.minY<=s&&this.maxX>=e&&this.maxY>=s}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var bb={grad:.9,turn:360,rad:360/(2*Math.PI)},vs=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Ge=function(t,e,s){return e===void 0&&(e=0),s===void 0&&(s=Math.pow(10,e)),Math.round(s*t)/s+0},Ot=function(t,e,s){return e===void 0&&(e=0),s===void 0&&(s=1),t>s?s:t>e?t:e},Ag=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Tf=function(t){return{r:Ot(t.r,0,255),g:Ot(t.g,0,255),b:Ot(t.b,0,255),a:Ot(t.a)}},Ul=function(t){return{r:Ge(t.r),g:Ge(t.g),b:Ge(t.b),a:Ge(t.a,3)}},wb=/^#([0-9a-f]{3,8})$/i,Ea=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},jg=function(t){var e=t.r,s=t.g,n=t.b,r=t.a,i=Math.max(e,s,n),a=i-Math.min(e,s,n),o=a?i===e?(s-n)/a:i===s?2+(n-e)/a:4+(e-s)/a:0;return{h:60*(o<0?o+6:o),s:i?a/i*100:0,v:i/255*100,a:r}},Tg=function(t){var e=t.h,s=t.s,n=t.v,r=t.a;e=e/360*6,s/=100,n/=100;var i=Math.floor(e),a=n*(1-s),o=n*(1-(e-i)*s),c=n*(1-(1-e+i)*s),u=i%6;return{r:255*[n,o,a,a,c,n][u],g:255*[c,n,n,o,a,a][u],b:255*[a,a,c,n,n,o][u],a:r}},Ef=function(t){return{h:Ag(t.h),s:Ot(t.s,0,100),l:Ot(t.l,0,100),a:Ot(t.a)}},Pf=function(t){return{h:Ge(t.h),s:Ge(t.s),l:Ge(t.l),a:Ge(t.a,3)}},Rf=function(t){return Tg((s=(e=t).s,{h:e.h,s:(s*=((n=e.l)<50?n:100-n)/100)>0?2*s/(n+s)*100:0,v:n+s,a:e.a}));var e,s,n},xi=function(t){return{h:(e=jg(t)).h,s:(r=(200-(s=e.s))*(n=e.v)/100)>0&&r<200?s*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,s,n,r},Sb=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_b=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Cb=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bu={string:[[function(t){var e=wb.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Ge(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Ge(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=kb.exec(t)||Cb.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Tf({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=Sb.exec(t)||_b.exec(t);if(!e)return null;var s,n,r=Ef({h:(s=e[1],n=e[2],n===void 0&&(n="deg"),Number(s)*(bb[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Rf(r)},"hsl"]],object:[[function(t){var e=t.r,s=t.g,n=t.b,r=t.a,i=r===void 0?1:r;return vs(e)&&vs(s)&&vs(n)?Tf({r:Number(e),g:Number(s),b:Number(n),a:Number(i)}):null},"rgb"],[function(t){var e=t.h,s=t.s,n=t.l,r=t.a,i=r===void 0?1:r;if(!vs(e)||!vs(s)||!vs(n))return null;var a=Ef({h:Number(e),s:Number(s),l:Number(n),a:Number(i)});return Rf(a)},"hsl"],[function(t){var e=t.h,s=t.s,n=t.v,r=t.a,i=r===void 0?1:r;if(!vs(e)||!vs(s)||!vs(n))return null;var a=function(o){return{h:Ag(o.h),s:Ot(o.s,0,100),v:Ot(o.v,0,100),a:Ot(o.a)}}({h:Number(e),s:Number(s),v:Number(n),a:Number(i)});return Tg(a)},"hsv"]]},Lf=function(t,e){for(var s=0;s<e.length;s++){var n=e[s][0](t);if(n)return[n,e[s][1]]}return[null,void 0]},Mb=function(t){return typeof t=="string"?Lf(t.trim(),bu.string):typeof t=="object"&&t!==null?Lf(t,bu.object):[null,void 0]},Wl=function(t,e){var s=xi(t);return{h:s.h,s:Ot(s.s+100*e,0,100),l:s.l,a:s.a}},Yl=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Df=function(t,e){var s=xi(t);return{h:s.h,s:s.s,l:Ot(s.l+100*e,0,100),a:s.a}},wu=function(){function t(e){this.parsed=Mb(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Ge(Yl(this.rgba),2)},t.prototype.isDark=function(){return Yl(this.rgba)<.5},t.prototype.isLight=function(){return Yl(this.rgba)>=.5},t.prototype.toHex=function(){return e=Ul(this.rgba),s=e.r,n=e.g,r=e.b,a=(i=e.a)<1?Ea(Ge(255*i)):"","#"+Ea(s)+Ea(n)+Ea(r)+a;var e,s,n,r,i,a},t.prototype.toRgb=function(){return Ul(this.rgba)},t.prototype.toRgbString=function(){return e=Ul(this.rgba),s=e.r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+s+", "+n+", "+r+", "+i+")":"rgb("+s+", "+n+", "+r+")";var e,s,n,r,i},t.prototype.toHsl=function(){return Pf(xi(this.rgba))},t.prototype.toHslString=function(){return e=Pf(xi(this.rgba)),s=e.h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+s+", "+n+"%, "+r+"%, "+i+")":"hsl("+s+", "+n+"%, "+r+"%)";var e,s,n,r,i},t.prototype.toHsv=function(){return e=jg(this.rgba),{h:Ge(e.h),s:Ge(e.s),v:Ge(e.v),a:Ge(e.a,3)};var e},t.prototype.invert=function(){return ls({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ls(Wl(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ls(Wl(this.rgba,-e))},t.prototype.grayscale=function(){return ls(Wl(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ls(Df(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ls(Df(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ls({r:(s=this.rgba).r,g:s.g,b:s.b,a:e}):Ge(this.rgba.a,3);var s},t.prototype.hue=function(e){var s=xi(this.rgba);return typeof e=="number"?ls({h:e,s:s.s,l:s.l,a:s.a}):Ge(s.h)},t.prototype.isEqual=function(e){return this.toHex()===ls(e).toHex()},t}(),ls=function(t){return t instanceof wu?t:new wu(t)},Bf=[],Nb=function(t){t.forEach(function(e){Bf.indexOf(e)<0&&(e(wu,bu),Bf.push(e))})};function Ab(t,e){var s={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in s)n[s[r]]=r;var i={};t.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,c,u=n[this.toHex()];if(u)return u;if(a!=null&&a.closest){var d=this.toRgb(),h=1/0,f="black";if(!i.length)for(var p in s)i[p]=new t(s[p]).toRgb();for(var g in s){var v=(o=d,c=i[g],Math.pow(o.r-c.r,2)+Math.pow(o.g-c.g,2)+Math.pow(o.b-c.b,2));v<h&&(h=v,f=g)}return f}},e.string.push([function(a){var o=a.toLowerCase(),c=o==="transparent"?"#0000":s[o];return c?new t(c).toRgb():null},"name"])}Nb([Ab]);const kr=class ni{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof ni)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,s){const n=typeof e;if(n!==typeof s)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===s;if(Array.isArray(e)&&Array.isArray(s)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(s))return e.length!==s.length?!1:e.every((i,a)=>i===s[a]);if(e!==null&&s!==null){const i=Object.keys(e),a=Object.keys(s);return i.length!==a.length?!1:i.every(o=>e[o]===s[o])}return e===s}toRgba(){const[e,s,n,r]=this._components;return{r:e,g:s,b:n,a:r}}toRgb(){const[e,s,n]=this._components;return{r:e,g:s,b:n}}toRgbaString(){const[e,s,n]=this.toUint8RgbArray();return`rgba(${e},${s},${n},${this.alpha})`}toUint8RgbArray(e){const[s,n,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(s*255),e[1]=Math.round(n*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[s,n,r,i]=this._components;return e[0]=s,e[1]=n,e[2]=r,e[3]=i,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[s,n,r]=this._components;return e[0]=s,e[1]=n,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){const[e,s,n]=this.toUint8RgbArray();return(n<<16)+(s<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[s,n,r,i]=ni._temp.setValue(e)._components;return this._components[0]*=s,this._components[1]*=n,this._components[2]*=r,this._components[3]*=i,this._refreshInt(),this._value=null,this}premultiply(e,s=!0){return s&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,s=!0){if(e===1)return(255<<24)+this._int;if(e===0)return s?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,i=this._int&255;return s&&(n=n*e+.5|0,r=r*e+.5|0,i=i*e+.5|0),(e*255<<24)+(n<<16)+(r<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const s=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-s.length)+s}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let s,n,r,i;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;s=(a>>16&255)/255,n=(a>>8&255)/255,r=(a&255)/255,i=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[s,n,r,i=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[s,n,r,i=255]=e,s/=255,n/=255,r/=255,i/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=ni.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const a=ls(e);a.isValid()&&({r:s,g:n,b:r,a:i}=a.rgba,s/=255,n/=255,r/=255)}if(s!==void 0)this._components[0]=s,this._components[1]=n,this._components[2]=r,this._components[3]=i,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,s,n]=this._components;this._int=(e*255<<16)+(s*255<<8)+(n*255|0)}_clamp(e,s=0,n=1){return typeof e=="number"?Math.min(Math.max(e,s),n):(e.forEach((r,i)=>{e[i]=Math.min(Math.max(r,s),n)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof ni||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};kr.shared=new kr;kr._temp=new kr;kr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Re=kr;const jb={cullArea:null,cullable:!1,cullableChildren:!0};let Xl=0;const If=500;function xe(...t){Xl!==If&&(Xl++,Xl===If?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}const ta={_registeredResources:new Set,register(t){this._registeredResources.add(t)},unregister(t){this._registeredResources.delete(t)},release(){this._registeredResources.forEach(t=>t.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(t){return this._registeredResources.has(t)},reset(){this._registeredResources.clear()}};class Tb{constructor(e,s){this._pool=[],this._count=0,this._index=0,this._classType=e,s&&this.prepopulate(s)}prepopulate(e){for(let s=0;s<e;s++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var n;let s;return this._index>0?s=this._pool[--this._index]:(s=new this._classType,this._count++),(n=s.init)==null||n.call(s,e),s}return(e){var s;(s=e.reset)==null||s.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class Eb{constructor(){this._poolsByClass=new Map}prepopulate(e,s){this.getPool(e).prepopulate(s)}get(e,s){return this.getPool(e).get(s)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Tb(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(s=>{const n=e[s._classType.name]?s._classType.name+s._classType.ID:s._classType.name;e[n]={free:s.totalFree,used:s.totalUsed,size:s.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const zt=new Eb;ta.register(zt);const Pb={get isCachedAsTexture(){var t;return!!((t=this.renderGroup)!=null&&t.isCachedAsTexture)},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){var t;(t=this.renderGroup)==null||t.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){Z("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};function Rb(t,e,s){const n=t.length;let r;if(e>=n||s===0)return;s=e+s>n?n-e:s;const i=n-s;for(r=e;r<i;++r)t[r]=t[r+s];t.length=i}const Lb={allowChildren:!0,removeChildren(t=0,e){var i;const s=e??this.children.length,n=s-t,r=[];if(n>0&&n<=s){for(let o=s-1;o>=t;o--){const c=this.children[o];c&&(r.push(c),c.parent=null)}Rb(this.children,t,s);const a=this.renderGroup||this.parentRenderGroup;a&&a.removeChildren(r);for(let o=0;o<r.length;++o){const c=r[o];(i=c.parentRenderLayer)==null||i.detach(c),this.emit("childRemoved",c,this,o),r[o].emit("removed",this)}return r.length>0&&this._didViewChangeTick++,r}else if(n===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||Z(ue,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:s}=this;if(e<0||e>s.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${s.length}`);if(t.parent){const r=t.parent.children.indexOf(t);if(t.parent===this&&r===e)return t;r!==-1&&t.parent.children.splice(r,1)}e===s.length?s.push(t):s.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const s=this.getChildIndex(t),n=this.getChildIndex(e);this.children[s]=e,this.children[n]=t;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const s=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const n=this.worldTransform.clone();return n.invert(),s.prepend(n),t.setFromMatrix(s),t},replaceChild(t,e){t.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(t)),e.setFromMatrix(t.localTransform),e.updateLocalTransform(),this.removeChild(t)}},Db={collectRenderables(t,e,s){this.parentRenderLayer&&this.parentRenderLayer!==s||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,s):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,s))},collectRenderablesSimple(t,e,s){const n=this.children,r=n.length;for(let i=0;i<r;i++)n[i].collectRenderables(t,e,s)},collectRenderablesWithEffects(t,e,s){const{renderPipes:n}=e;for(let r=0;r<this.effects.length;r++){const i=this.effects[r];n[i.pipe].push(i,this,t)}this.collectRenderablesSimple(t,e,s);for(let r=this.effects.length-1;r>=0;r--){const i=this.effects[r];n[i.pipe].pop(i,this,t)}}};class Of{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class Bb{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let s=0;s<this._tests.length;s++){const n=this._tests[s];if(n.test(e))return zt.get(n.maskClass,e)}return e}returnMaskEffect(e){zt.return(e)}}const Su=new Bb;Xe.handleByList(Y.MaskEffect,Su._effectClasses);const Ib={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((s,n)=>s.priority-n.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;(e==null?void 0:e.mask)!==t&&(e&&(this.removeEffect(e),Su.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=Su.getMaskEffect(t),this.addEffect(this._maskEffect)))},get mask(){var t;return(t=this._maskEffect)==null?void 0:t.mask},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},set filters(t){var i;!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new Of);t=t;const s=(t==null?void 0:t.length)>0,n=((i=e.filters)==null?void 0:i.length)>0,r=s!==n;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),r&&(s?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){var t;return(t=this._filterEffect)==null?void 0:t.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new Of),this._filterEffect.filterArea=t},get filterArea(){var t;return(t=this._filterEffect)==null?void 0:t.filterArea}},Ob={label:null,get name(){return Z(ue,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){Z(ue,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const s=this.children;for(let n=0;n<s.length;n++){const r=s[n];if(r.label===t||t instanceof RegExp&&t.test(r.label))return r}if(e)for(let n=0;n<s.length;n++){const i=s[n].getChildByLabel(t,!0);if(i)return i}return null},getChildrenByLabel(t,e=!1,s=[]){const n=this.children;for(let r=0;r<n.length;r++){const i=n[r];(i.label===t||t instanceof RegExp&&t.test(i.label))&&s.push(i)}if(e)for(let r=0;r<n.length;r++)n[r].getChildrenByLabel(t,!0,s);return s}},lt=zt.getPool(se),Ms=zt.getPool(Jt),Fb=new se,Hb={getFastGlobalBounds(t,e){e||(e=new Jt),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const s=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(s.worldTransform),e},_getGlobalBoundsRecursive(t,e,s){let n=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==s||this.localDisplayStatus!==7||!this.measurable)return;const r=!!this.effects.length;if((this.renderGroup||r)&&(n=Ms.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;n.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const i=this.children;for(let a=0;a<i.length;a++)i[a]._getGlobalBoundsRecursive(t,n,s)}if(r){let i=!1;const a=this.renderGroup||this.parentRenderGroup;for(let o=0;o<this.effects.length;o++)this.effects[o].addBounds&&(i||(i=!0,n.applyMatrix(a.worldTransform)),this.effects[o].addBounds(n,!0));i&&n.applyMatrix(a.worldTransform.copyTo(Fb).invert()),e.addBounds(n),Ms.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),Ms.return(n))}};function Eg(t,e,s){s.clear();let n,r;return t.parent?e?n=t.parent.worldTransform:(r=lt.get().identity(),n=Dd(t,r)):n=se.IDENTITY,Pg(t,s,n,e),r&&lt.return(r),s.isValid||s.set(0,0,0,0),s}function Pg(t,e,s,n){var o,c;if(!t.visible||!t.measurable)return;let r;n?r=t.worldTransform:(t.updateLocalTransform(),r=lt.get(),r.appendFrom(t.localTransform,s));const i=e,a=!!t.effects.length;if(a&&(e=Ms.get().clear()),t.boundsArea)e.addRect(t.boundsArea,r);else{const u=t.bounds;u&&!u.isEmpty()&&(e.matrix=r,e.addBounds(u));for(let d=0;d<t.children.length;d++)Pg(t.children[d],e,r,n)}if(a){for(let u=0;u<t.effects.length;u++)(c=(o=t.effects[u]).addBounds)==null||c.call(o,e);i.addBounds(e,se.IDENTITY),Ms.return(e)}n||lt.return(r)}function Dd(t,e){const s=t.parent;return s&&(Dd(s,e),s.updateLocalTransform(),e.append(s.localTransform)),e}function Rg(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;const s=t>>16&255,n=t>>8&255,r=t&255,i=e>>16&255,a=e>>8&255,o=e&255,c=s*i/255|0,u=n*a/255|0,d=r*o/255|0;return(c<<16)+(u<<8)+d}const Ff=16777215;function Hf(t,e){return t===Ff?e:e===Ff?t:Rg(t,e)}function ao(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}const Gb={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,s=this.parent;for(;s;)e*=s.alpha,s=s.parent;return e},getGlobalTransform(t=new se,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const s=Dd(this,lt.get().identity());return t.appendFrom(this.localTransform,s),lt.return(s),t},getGlobalTint(t){if(t)return this.renderGroup?ao(this.renderGroup.worldColor):this.parentRenderGroup?ao(Hf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,s=this.parent;for(;s;)e=Hf(e,s.localColor),s=s.parent;return ao(e)}};function Lg(t,e,s){return e.clear(),s||(s=se.IDENTITY),Dg(t,e,s,t,!0),e.isValid||e.set(0,0,0,0),e}function Dg(t,e,s,n,r){var c,u;let i;if(r)i=lt.get(),i=s.copyTo(i);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const d=t.localTransform;i=lt.get(),i.appendFrom(d,s)}const a=e,o=!!t.effects.length;if(o&&(e=Ms.get().clear()),t.boundsArea)e.addRect(t.boundsArea,i);else{t.renderPipeId&&(e.matrix=i,e.addBounds(t.bounds));const d=t.children;for(let h=0;h<d.length;h++)Dg(d[h],e,i,n,!1)}if(o){for(let d=0;d<t.effects.length;d++)(u=(c=t.effects[d]).addLocalBounds)==null||u.call(c,e,n);a.addBounds(e,se.IDENTITY),Ms.return(e)}lt.return(i)}function Bg(t,e){const s=t.children;for(let n=0;n<s.length;n++){const r=s[n],i=r.uid,a=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,o=e.index;(e.data[o]!==i||e.data[o+1]!==a)&&(e.data[e.index]=i,e.data[e.index+1]=a,e.didChange=!0),e.index=o+2,r.children.length&&Bg(r,e)}return e.didChange}const zb=new se,$b={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const s=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*s:this.scale.x=s},_setHeight(t,e){const s=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*s:this.scale.y=s},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Jt});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),Bg(this,t),t.didChange&&Lg(this,t.localBounds,zb),t.localBounds},getBounds(t,e){return Eg(this,t,e||new Jt)}},Vb={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},Ub={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Wb))}};function Wb(t,e){return t._zIndex-e._zIndex}const Yb={getGlobalPosition(t=new nt,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,s=!1){const n=this.getGlobalTransform(lt.get(),s);return e=n.apply(t,e),lt.return(n),e},toLocal(t,e,s,n){e&&(t=e.toGlobal(t,s,n));const r=this.getGlobalTransform(lt.get(),n);return s=r.applyInverse(t,s),lt.return(r),s}};class Ig{constructor(){this.uid=je("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Xb=0;class qb{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new _r(this.textureOptions)}createTexture(e,s,n){const r=new ts({...this.textureOptions,width:e,height:s,resolution:1,antialias:n,autoGarbageCollect:!1});return new te({source:r,label:`texturePool_${Xb++}`})}getOptimalTexture(e,s,n=1,r){let i=Math.ceil(e*n-1e-6),a=Math.ceil(s*n-1e-6);i=Sr(i),a=Sr(a);const o=(i<<17)+(a<<1)+(r?1:0);this._texturePool[o]||(this._texturePool[o]=[]);let c=this._texturePool[o].pop();return c||(c=this.createTexture(i,a,r)),c.source._resolution=n,c.source.width=i/n,c.source.height=a/n,c.source.pixelWidth=i,c.source.pixelHeight=a,c.frame.x=0,c.frame.y=0,c.frame.width=e,c.frame.height=s,c.updateUvs(),this._poolKeyHash[c.uid]=o,c}getSameSizeTexture(e,s=!1){const n=e.source;return this.getOptimalTexture(e.width,e.height,n._resolution,s)}returnTexture(e,s=!1){const n=this._poolKeyHash[e.uid];s&&(e.source.style=this.textureStyle),this._texturePool[n].push(e)}clear(e){if(e=e!==!1,e)for(const s in this._texturePool){const n=this._texturePool[s];if(n)for(let r=0;r<n.length;r++)n[r].destroy(!0)}this._texturePool={}}}const Og=new qb;ta.register(Og);class Kb{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new se,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Ig,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const s=e.children;for(let n=0;n<s.length;n++){const r=s[n];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Og.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const s=this.childrenToUpdate[e];s.list.fill(null),s.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const s=this.renderGroupChildren.indexOf(e);s>-1&&this.renderGroupChildren.splice(s,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const s=e.children;for(let n=0;n<s.length;n++)this.addChild(s[n])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const s=e.children;for(let n=0;n<s.length;n++)this.removeChild(s[n])}removeChildren(e){for(let s=0;s<e.length;s++)this.removeChild(e[s])}onChildUpdate(e){let s=this.childrenToUpdate[e.relativeRenderGroupDepth];s||(s=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),s.list[s.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let s=0;s<this._onRenderContainers.length;s++)this._onRenderContainers[s]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const s=this.root.children;for(let n=0;n<s.length;n++)this._getChildren(s[n],e);return e}_getChildren(e,s=[]){if(s.push(e),e.renderGroup)return s;const n=e.children;for(let r=0;r<n.length;r++)this._getChildren(n[r],s);return s}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new se),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new se),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new se),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Qb(t,e,s={}){for(const n in e)!s[n]&&e[n]!==void 0&&(t[n]=e[n])}const ql=new We(null),Pa=new We(null),Kl=new We(null,1,1),Ra=new We(null),Gf=1,Zb=2,Ql=4;class ot extends es{constructor(e={}){var s,n;super(),this.uid=je("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new se,this.relativeGroupTransform=new se,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new We(this,0,0),this._scale=Kl,this._pivot=Pa,this._origin=Ra,this._skew=ql,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Qb(this,e,{children:!0,parent:!0,effects:!0}),(s=e.children)==null||s.forEach(r=>this.addChild(r)),(n=e.parent)==null||n.addChild(this)}static mixin(e){Z("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Xe.mixin(ot,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Z(ue,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let r=0;r<e.length;r++)this.addChild(e[r]);return e[0]}const s=e[0],n=this.renderGroup||this.parentRenderGroup;return s.parent===this?(this.children.splice(this.children.indexOf(s),1),this.children.push(s),n&&(n.structureDidChange=!0),s):(s.parent&&s.parent.removeChild(s),this.children.push(s),this.sortableChildren&&(this.sortDirty=!0),s.parent=this,s.didChange=!0,s._updateFlags=15,n&&n.addChild(s),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this),this._didViewChangeTick++,s._zIndex!==0&&s.depthOfChildModified(),s)}removeChild(...e){if(e.length>1){for(let r=0;r<e.length;r++)this.removeChild(e[r]);return e[0]}const s=e[0],n=this.children.indexOf(s);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(s):this.parentRenderGroup&&this.parentRenderGroup.removeChild(s),s.parentRenderLayer&&s.parentRenderLayer.detach(s),s.parent=null,this.emit("childRemoved",s,this,n),s.emit("removed",this)),s}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=zt.get(Kb,this),this.groupTransform=se.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),zt.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new se),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*db}set angle(e){this.rotation=e*hb}get pivot(){return this._pivot===Pa&&(this._pivot=new We(this,0,0)),this._pivot}set pivot(e){this._pivot===Pa&&(this._pivot=new We(this,0,0),this._origin!==Ra&&xe("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===ql&&(this._skew=new We(this,0,0)),this._skew}set skew(e){this._skew===ql&&(this._skew=new We(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Kl&&(this._scale=new We(this,1,1)),this._scale}set scale(e){this._scale===Kl&&(this._scale=new We(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===Ra&&(this._origin=new We(this,0,0)),this._origin}set origin(e){this._origin===Ra&&(this._origin=new We(this,0,0),this._pivot!==Pa&&xe("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const s=this.getLocalBounds().width;this._setWidth(e,s)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const s=this.getLocalBounds().height;this._setHeight(e,s)}getSize(e){e||(e={});const s=this.getLocalBounds();return e.width=Math.abs(this.scale.x*s.width),e.height=Math.abs(this.scale.y*s.height),e}setSize(e,s){const n=this.getLocalBounds();typeof e=="object"?(s=e.height??e.width,e=e.width):s??(s=e),e!==void 0&&this._setWidth(e,n.width),s!==void 0&&this._setHeight(s,n.height)}_updateSkew(){const e=this._rotation,s=this._skew;this._cx=Math.cos(e+s._y),this._sx=Math.sin(e+s._y),this._cy=-Math.sin(e-s._x),this._sy=Math.cos(e-s._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const s=this.localTransform,n=this._scale,r=this._pivot,i=this._origin,a=this._position,o=n._x,c=n._y,u=r._x,d=r._y,h=-i._x,f=-i._y;s.a=this._cx*o,s.b=this._sx*o,s.c=this._cy*c,s.d=this._sy*c,s.tx=a._x-(u*s.a+d*s.c)+(h*s.a+f*s.c)-h,s.ty=a._y-(u*s.b+d*s.d)+(h*s.b+f*s.d)-f}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Gf,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const n=Re.shared.setValue(e??16777215).toBgrNumber();n!==this.localColor&&(this.localColor=n,this._updateFlags|=Gf,this._onUpdate())}get tint(){return ao(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Zb,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const s=e?2:0;(this.localDisplayStatus&2)!==s&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Ql,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const s=e?0:4;(this.localDisplayStatus&4)!==s&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Ql,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const s=e?1:0;(this.localDisplayStatus&1)!==s&&(this._updateFlags|=Ql,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var r;if(this.destroyed)return;this.destroyed=!0;let s;if(this.children.length&&(s=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&s)for(let i=0;i<s.length;++i)s[i].destroy(e);(r=this.renderGroup)==null||r.destroy(),this.renderGroup=null}}Xe.mixin(ot,Lb,Hb,Yb,Vb,$b,Ib,Ob,Ub,jb,Pb,Gb,Db);class Bd extends ot{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new Jt(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=e.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const s=this.bounds,{x:n,y:r}=e;return n>=s.minX&&n<=s.maxX&&r>=s.minY&&r<=s.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}unload(){var e;this.emit("unload",this);for(const s in this._gpuData)(e=this._gpuData[s])==null||e.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(e){this.unload(),super.destroy(e),this._bounds=null}collectRenderablesSimple(e,s,n){const{renderPipes:r}=s;r.blendMode.pushBlendMode(this,this.groupBlendMode,e),r[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const a=this.children,o=a.length;for(let c=0;c<o;c++)a[c].collectRenderables(e,s,n);r.blendMode.popBlendMode(e)}}class Qs extends Bd{constructor(e=te.EMPTY){e instanceof te&&(e={texture:e});const{texture:s=te.EMPTY,anchor:n,roundPixels:r,width:i,height:a,...o}=e;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:s.defaultAnchor&&(this.anchor=s.defaultAnchor),this.texture=s,this.allowChildren=!1,this.roundPixels=r??!1,i!==void 0&&(this.width=i),a!==void 0&&(this.height=a)}static from(e,s=!1){return e instanceof te?new Qs(e):new Qs(te.from(e,s))}set texture(e){e||(e=te.EMPTY);const s=this._texture;s!==e&&(s&&s.dynamic&&s.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return vb(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Z("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,s=this._texture,n=this._bounds,{width:r,height:i}=s.orig;n.minX=-e._x*r,n.maxX=n.minX+r,n.minY=-e._y*i,n.maxY=n.minY+i}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(n)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,s){typeof e=="object"?(s=e.height??e.width,e=e.width):s??(s=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),s!==void 0&&this._setHeight(s,this._texture.orig.height)}}const Jb=new Jt;function Fg(t,e,s){const n=Jb;t.measurable=!0,Eg(t,s,n),e.addBoundsMask(n),t.measurable=!1}function Hg(t,e,s){const n=Ms.get();t.measurable=!0;const r=lt.get().identity(),i=Gg(t,s,r);Lg(t,n,i),t.measurable=!1,e.addBoundsMask(n),lt.return(r),Ms.return(n)}function Gg(t,e,s){return t?(t!==e&&(Gg(t.parent,e,s),t.updateLocalTransform(),s.append(t.localTransform)),s):(xe("Mask bounds, renderable is not inside the root container"),s)}class zg{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Qs),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,s){this.inverse||Fg(this.mask,e,s)}addLocalBounds(e,s){Hg(this.mask,e,s)}containsPoint(e,s){const n=this.mask;return s(n,e)}destroy(){this.reset()}static test(e){return e instanceof Qs}}zg.extension=Y.MaskEffect;class $g{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}$g.extension=Y.MaskEffect;class Vg{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,s){Fg(this.mask,e,s)}addLocalBounds(e,s){Hg(this.mask,e,s)}containsPoint(e,s){const n=this.mask;return s(n,e)}destroy(){this.reset()}static test(e){return e instanceof ot}}Vg.extension=Y.MaskEffect;const ew={createCanvas:(t,e)=>{const s=document.createElement("canvas");return s.width=t,s.height=e,s},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")};let zf=ew;const pe={get(){return zf},set(t){zf=t}};class Ug extends ts{constructor(e){e.resource||(e.resource=pe.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,s=this.height,n=this._resolution){const r=super.resize(e,s,n);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Ug.extension=Y.TextureSource;class jn extends ts{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}jn.extension=Y.TextureSource;var _u=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(_u||{});class Zl{constructor(e,s=null,n=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=s,this.priority=n,this._once=r}match(e,s=null){return this._fn===e&&this._context===s}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const s=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),s}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const s=this.next;return this.next=e?null:s,this.previous=null,s}}const Wg=class vt{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Zl(null,null,1/0),this.deltaMS=1/vt.targetFPMS,this.elapsedMS=1/vt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,s,n=_u.NORMAL){return this._addListener(new Zl(e,s,n))}addOnce(e,s,n=_u.NORMAL){return this._addListener(new Zl(e,s,n,!0))}_addListener(e){let s=this._head.next,n=this._head;if(!s)e.connect(n);else{for(;s;){if(e.priority>s.priority){e.connect(n);break}n=s,s=s.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,s){let n=this._head.next;for(;n;)n.match(e,s)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,s=this._head;for(;s=s.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let s;if(e>this.lastTime){if(s=this.elapsedMS=e-this.lastTime,s>this._maxElapsedMS&&(s=this._maxElapsedMS),s*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=s,this.deltaTime=this.deltaMS*vt.targetFPMS;const n=this._head;let r=n.next;for(;r;)r=r.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const s=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,s)/1e3,vt.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const s=Math.max(this.minFPS,e);this._minElapsedMS=1/(s/1e3)}}static get shared(){if(!vt._shared){const e=vt._shared=new vt;e.autoStart=!0,e._protected=!0}return vt._shared}static get system(){if(!vt._system){const e=vt._system=new vt;e.autoStart=!0,e._protected=!0}return vt._system}};Wg.targetFPMS=.06;let La=Wg,Jl;async function Yg(){return Jl??(Jl=(async()=>{var a;const e=pe.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const s=await new Promise(o=>{const c=document.createElement("video");c.onloadeddata=()=>o(c),c.onerror=()=>o(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!s)return"premultiply-alpha-on-upload";const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s);const i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteFramebuffer(r),e.deleteTexture(n),(a=e.getExtension("WEBGL_lose_context"))==null||a.loseContext(),i[0]<=i[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Jl}const al=class Xg extends ts{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...Xg.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=La.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,s=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(s.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Yg(),this._load=new Promise((n,r)=>{this.isValid?n(this):(this._resolve=n,this._reject=r,s.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${s.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(La.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(La.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(La.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};al.extension=Y.TextureSource;al.defaultOptions={...ts.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};al.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let yi=al;const qt=(t,e,s=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||s?e(n):n):t);class tw{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const s=this._cache.get(e);return s||xe(`[Assets] Asset id ${e} was not found in the Cache`),s}set(e,s){const n=qt(e);let r;for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];if(u.test(s)){r=u.getCacheableAssets(n,s);break}}const i=new Map(Object.entries(r||{}));r||n.forEach(c=>{i.set(c,s)});const a=[...i.keys()],o={cacheKeys:a,keys:n};n.forEach(c=>{this._cacheMap.set(c,o)}),a.forEach(c=>{const u=r?r[c]:s;this._cache.has(c)&&this._cache.get(c)!==u&&xe("[Cache] already has key:",c),this._cache.set(c,i.get(c))})}remove(e){if(!this._cacheMap.has(e)){xe(`[Assets] Asset id ${e} was not found in the Cache`);return}const s=this._cacheMap.get(e);s.cacheKeys.forEach(r=>{this._cache.delete(r)}),s.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const ge=new tw,ku=[];Xe.handleByList(Y.TextureSource,ku);function qg(t={}){const e=t&&t.resource,s=e?t.resource:t,n=e?t:{resource:t};for(let r=0;r<ku.length;r++){const i=ku[r];if(i.test(s))return new i(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function sw(t={},e=!1){const s=t&&t.resource,n=s?t.resource:t,r=s?t:{resource:t};if(!e&&ge.has(n))return ge.get(n);const i=new te({source:qg(r)});return i.on("destroy",()=>{ge.has(n)&&ge.remove(n)}),e||ge.set(n,i),i}function nw(t,e=!1){return typeof t=="string"?ge.get(t):t instanceof ts?new te({source:t}):sw(t,e)}te.from=nw;ts.from=qg;Xe.add(zg,$g,Vg,yi,jn,Ug,Ld);var rn=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(rn||{});function Ut(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Ur(t){return t.split("?")[0].split("#")[0]}function rw(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function iw(t,e,s){return t.replace(new RegExp(rw(e),"g"),s)}function aw(t,e){let s="",n=0,r=-1,i=0,a=-1;for(let o=0;o<=t.length;++o){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||i===1))if(r!==o-1&&i===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){const c=s.lastIndexOf("/");if(c!==s.length-1){c===-1?(s="",n=0):(s=s.slice(0,c),n=s.length-1-s.lastIndexOf("/")),r=o,i=0;continue}}else if(s.length===2||s.length===1){s="",n=0,r=o,i=0;continue}}}else s.length>0?s+=`/${t.slice(r+1,o)}`:s=t.slice(r+1,o),n=o-r-1;r=o,i=0}else a===46&&i!==-1?++i:i=-1}return s}const kt={toPosix(t){return iw(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){Ut(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const s=/^[^/:]+:\/{0,2}/.exec(t);return s?s[0]:""},toAbsolute(t,e,s){if(Ut(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=Ur(this.toPosix(e??pe.get().getBaseUrl())),r=Ur(this.toPosix(s??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?kt.join(r,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(Ut(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const s=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=aw(t),t.length>0&&n&&(t+="/"),s?`/${t}`:e+t},isAbsolute(t){return Ut(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let s=0;s<t.length;++s){const n=t[s];if(Ut(n),n.length>0)if(e===void 0)e=n;else{const r=t[s-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(Ut(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const s=e===47;let n=-1,r=!0;const i=this.getProtocol(t),a=t;t=t.slice(i.length);for(let o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),e===47){if(!r){n=o;break}}else r=!1;return n===-1?s?"/":this.isUrl(a)?i+t:i:s&&n===1?"//":i+t.slice(0,n)},rootname(t){Ut(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const s=t.indexOf("/",e.length);s!==-1?e=t.slice(0,s):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){Ut(t),e&&Ut(e),t=Ur(this.toPosix(t));let s=0,n=-1,r=!0,i;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,o=-1;for(i=t.length-1;i>=0;--i){const c=t.charCodeAt(i);if(c===47){if(!r){s=i+1;break}}else o===-1&&(r=!1,o=i+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=i):(a=-1,n=o))}return s===n?n=o:n===-1&&(n=t.length),t.slice(s,n)}for(i=t.length-1;i>=0;--i)if(t.charCodeAt(i)===47){if(!r){s=i+1;break}}else n===-1&&(r=!1,n=i+1);return n===-1?"":t.slice(s,n)},extname(t){Ut(t),t=Ur(this.toPosix(t));let e=-1,s=0,n=-1,r=!0,i=0;for(let a=t.length-1;a>=0;--a){const o=t.charCodeAt(a);if(o===47){if(!r){s=a+1;break}continue}n===-1&&(r=!1,n=a+1),o===46?e===-1?e=a:i!==1&&(i=1):e!==-1&&(i=-1)}return e===-1||n===-1||i===0||i===1&&e===n-1&&e===s+1?"":t.slice(e,n)},parse(t){Ut(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Ur(this.toPosix(t));let s=t.charCodeAt(0);const n=this.isAbsolute(t);let r;e.root=this.rootname(t),n||this.hasProtocol(t)?r=1:r=0;let i=-1,a=0,o=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(s=t.charCodeAt(u),s===47){if(!c){a=u+1;break}continue}o===-1&&(c=!1,o=u+1),s===46?i===-1?i=u:d!==1&&(d=1):i!==-1&&(d=-1)}return i===-1||o===-1||d===0||d===1&&i===o-1&&i===a+1?o!==-1&&(a===0&&n?e.base=e.name=t.slice(1,o):e.base=e.name=t.slice(a,o)):(a===0&&n?(e.name=t.slice(1,i),e.base=t.slice(1,o)):(e.name=t.slice(a,i),e.base=t.slice(a,o)),e.ext=t.slice(i,o)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function Kg(t,e,s,n,r){const i=e[s];for(let a=0;a<i.length;a++){const o=i[a];s<e.length-1?Kg(t.replace(n[s],o),e,s+1,n,r):r.push(t.replace(n[s],o))}}function ow(t){const e=/\{(.*?)\}/g,s=t.match(e),n=[];if(s){const r=[];s.forEach(i=>{const a=i.substring(1,i.length-1).split(",");r.push(a)}),Kg(t,r,0,s,n)}else n.push(t);return n}const Io=t=>!Array.isArray(t);class Tr{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,s)=>`${e}${this._bundleIdConnector}${s}`,extractAssetIdFromBundle:(e,s)=>s.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(s=>{this._preferredOrder.push(s),s.priority||(s.priority=Object.keys(s.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const s=e;this._defaultSearchParams=Object.keys(s).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(s[n])}`).join("&")}}getAlias(e){const{alias:s,src:n}=e;return qt(s||n,i=>typeof i=="string"?i:Array.isArray(i)?i.map(a=>(a==null?void 0:a.src)??a):i!=null&&i.src?i.src:i,!0)}addManifest(e){this._manifest&&xe("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(s=>{this.addBundle(s.name,s.assets)})}addBundle(e,s){const n=[];let r=s;Array.isArray(s)||(r=Object.entries(s).map(([i,a])=>typeof a=="string"||Array.isArray(a)?{alias:i,src:a}:{alias:i,...a})),r.forEach(i=>{const a=i.src,o=i.alias;let c;if(typeof o=="string"){const u=this._createBundleAssetId(e,o);n.push(u),c=[o,u]}else{const u=o.map(d=>this._createBundleAssetId(e,d));n.push(...u),c=[...o,...u]}this.add({...i,alias:c,src:a})}),this._bundles[e]=n}add(e){const s=[];Array.isArray(e)?s.push(...e):s.push(e);let n;n=i=>{this.hasKey(i)&&xe(`[Resolver] already has key: ${i} overwriting`)},qt(s).forEach(i=>{const{src:a}=i;let{data:o,format:c,loadParser:u,parser:d}=i;const h=qt(a).map(v=>typeof v=="string"?ow(v):Array.isArray(v)?v:[v]),f=this.getAlias(i);Array.isArray(f)?f.forEach(n):n(f);const p=[],g=v=>{const b=this._parsers.find(x=>x.test(v));return{...b==null?void 0:b.parse(v),src:v}};h.forEach(v=>{v.forEach(b=>{let x={};if(typeof b!="object"?x=g(b):(o=b.data??o,c=b.format??c,(b.loadParser||b.parser)&&(u=b.loadParser??u,d=b.parser??d),x={...g(b.src),...b}),!f)throw new Error(`[Resolver] alias is undefined for this asset: ${x.src}`);x=this._buildResolvedAsset(x,{aliases:f,data:o,format:c,loadParser:u,parser:d,progressSize:i.progressSize}),p.push(x)})}),f.forEach(v=>{this._assetMap[v]=p})})}resolveBundle(e){const s=Io(e);e=qt(e);const n={};return e.forEach(r=>{const i=this._bundles[r];if(i){const a=this.resolve(i),o={};for(const c in a){const u=a[c];o[this._extractAssetIdFromBundle(r,c)]=u}n[r]=o}}),s?n[e[0]]:n}resolveUrl(e){const s=this.resolve(e);if(typeof e!="string"){const n={};for(const r in s)n[r]=s[r].src;return n}return s.src}resolve(e){const s=Io(e);e=qt(e);const n={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let i=this._assetMap[r];const a=this._getPreferredOrder(i);a==null||a.priority.forEach(o=>{a.params[o].forEach(c=>{const u=i.filter(d=>d[o]?d[o]===c:!1);u.length&&(i=u)})}),this._resolverHash[r]=i[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});n[r]=this._resolverHash[r]}),s?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let s=0;s<e.length;s++){const n=e[s],r=this._preferredOrder.find(i=>i.params.format.includes(n.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const s=/\?/.test(e)?"&":"?";return`${e}${s}${this._defaultSearchParams}`}_buildResolvedAsset(e,s){const{aliases:n,data:r,loadParser:i,parser:a,format:o,progressSize:c}=s;return(this._basePath||this._rootPath)&&(e.src=kt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=i??e.loadParser,e.parser=a??e.parser,e.format=o??e.format??lw(e.src),c!==void 0&&(e.progressSize=c),e}}Tr.RETINA_PREFIX=/@([0-9\.]+)x/;function lw(t){return t.split(".").pop().split("?").shift().split("#").shift()}const Cu=(t,e)=>{const s=e.split("?")[1];return s&&(t+=`?${s}`),t},Qg=class ri{constructor(e,s){this.linkedSheets=[];let n=e;(e==null?void 0:e.source)instanceof ts&&(n={texture:e,data:s});const{texture:r,data:i,cachePrefix:a=""}=n;this.cachePrefix=a,this._texture=r instanceof te?r:null,this.textureSource=r.source,this.textures={},this.animations={},this.data=i;const o=parseFloat(i.meta.scale);o?(this.resolution=o,r.source.resolution=this.resolution):this.resolution=r.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=ri.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let s=e;const n=ri.BATCH_SIZE;for(;s-e<n&&s<this._frameKeys.length;){const r=this._frameKeys[s],i=this._frames[r],a=i.frame;if(a){let o=null,c=null;const u=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,d=new ve(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);i.rotated?o=new ve(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new ve(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(c=new ve(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[r]=new te({source:this.textureSource,frame:o,orig:d,trim:c,rotate:i.rotated?2:0,defaultAnchor:i.anchor,defaultBorders:i.borders,label:r.toString()})}s++}}_processAnimations(){const e=this.data.animations||{};for(const s in e){this.animations[s]=[];for(let n=0;n<e[s].length;n++){const r=e[s][n];this.animations[s].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ri.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ri.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var s;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((s=this._texture)==null||s.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Qg.BATCH_SIZE=1e3;let $f=Qg;const cw=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Zg(t,e,s){const n={};if(t.forEach(r=>{n[r]=e}),Object.keys(e.textures).forEach(r=>{n[`${e.cachePrefix}${r}`]=e.textures[r]}),!s){const r=kt.dirname(t[0]);e.linkedSheets.forEach((i,a)=>{const o=Zg([`${r}/${e.data.meta.related_multi_packs[a]}`],i,!0);Object.assign(n,o)})}return n}const uw={extension:Y.Asset,cache:{test:t=>t instanceof $f,getCacheableAssets:(t,e)=>Zg(t,e,!1)},resolver:{extension:{type:Y.ResolveParser,name:"resolveSpritesheet"},test:t=>{const s=t.split("?")[0].split("."),n=s.pop(),r=s.pop();return n==="json"&&cw.includes(r)},parse:t=>{var s;const e=t.split(".");return{resolution:parseFloat(((s=Tr.RETINA_PREFIX.exec(t))==null?void 0:s[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:Y.LoadParser,priority:rn.Normal,name:"spritesheetLoader"},async testParse(t,e){return kt.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,s){var h,f;const{texture:n,imageFilename:r,textureOptions:i,cachePrefix:a}=(e==null?void 0:e.data)??{};let o=kt.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let c;if(n instanceof te)c=n;else{const p=Cu(o+(r??t.meta.image),e.src);c=(await s.load([{src:p,data:i}]))[p]}const u=new $f({texture:c.source,data:t,cachePrefix:a});await u.parse();const d=(h=t==null?void 0:t.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(d)){const p=[];for(const v of d){if(typeof v!="string")continue;let b=o+v;(f=e.data)!=null&&f.ignoreMultiPack||(b=Cu(b,e.src),p.push(s.load({src:b,data:{textureOptions:i,ignoreMultiPack:!0}})))}const g=await Promise.all(p);u.linkedSheets=g,g.forEach(v=>{v.linkedSheets=[u].concat(u.linkedSheets.filter(b=>b!==v))})}return u},async unload(t,e,s){await s.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};Xe.add(uw);const ec=Object.create(null),Vf=Object.create(null);function Id(t,e){let s=Vf[t];return s===void 0&&(ec[e]===void 0&&(ec[e]=1),Vf[t]=s=ec[e]++),s}let On;function Jg(){return(!On||On!=null&&On.isContextLost())&&(On=pe.get().createCanvas().getContext("webgl",{})),On}let Da;function dw(){if(!Da){Da="mediump";const t=Jg();t&&t.getShaderPrecisionFormat&&(Da=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return Da}function hw(t,e,s){return e?t:s?(t=t.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}function fw(t,e,s){const n=s?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let r=s?e.requestedFragmentPrecision:e.requestedVertexPrecision;return r==="highp"&&n!=="highp"&&(r="mediump"),`precision ${r} float;
${t}`}else if(n!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}function pw(t,e){return e?`#version 300 es
${t}`:t}const mw={},gw={};function xw(t,{name:e="pixi-program"},s=!0){e=e.replace(/\s+/g,"-"),e+=s?"-fragment":"-vertex";const n=s?mw:gw;return n[e]?(n[e]++,e+=`-${n[e]}`):n[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}function yw(t,e){return e?t.replace("#version 300 es",""):t}const tc={stripVersion:yw,ensurePrecision:fw,addProgramDefines:hw,setProgramName:xw,insertVersion:pw},Wr=Object.create(null),ex=class Mu{constructor(e){e={...Mu.defaultOptions,...e};const s=e.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:s,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:dw()},setProgramName:{name:e.name},addProgramDefines:s,insertVersion:s};let r=e.fragment,i=e.vertex;Object.keys(tc).forEach(a=>{const o=n[a];r=tc[a](r,o,!0),i=tc[a](i,o,!1)}),this.fragment=r,this.vertex=i,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Id(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Wr[this._cacheKey]=null}static from(e){const s=`${e.vertex}:${e.fragment}`;return Wr[s]||(Wr[s]=new Mu(e),Wr[s]._cacheKey=s),Wr[s]}};ex.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let tx=ex;const Uf={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function vw(t){return Uf[t]??Uf.float32}const bw={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function ww({source:t,entryPoint:e}){const s={},n=t.indexOf(`fn ${e}`);if(n!==-1){const r=t.indexOf("->",n);if(r!==-1){const i=t.substring(n,r),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=a.exec(i))!==null;){const c=bw[o[3]]??"float32";s[o[2]]={location:parseInt(o[1],10),format:c,stride:vw(c).stride,offset:0,instance:!1,start:0}}}}return s}function sc(t){var h,f;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,s=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,i=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,c=/struct\s+(\w+)/,u=(h=t.match(e))==null?void 0:h.map(p=>({group:parseInt(p.match(s)[1],10),binding:parseInt(p.match(n)[1],10),name:p.match(r)[2],isUniform:p.match(r)[1]==="<uniform>",type:p.match(i)[1]}));if(!u)return{groups:[],structs:[]};const d=((f=t.match(a))==null?void 0:f.map(p=>{const g=p.match(c)[1],v=p.match(o).reduce((b,x)=>{const[m,y]=x.split(":");return b[m.trim()]=y.trim(),b},{});return v?{name:g,members:v}:null}).filter(({name:p})=>u.some(g=>g.type===p)))??[];return{groups:u,structs:d}}var ii=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(ii||{});function Sw({groups:t}){const e=[];for(let s=0;s<t.length;s++){const n=t[s];e[n.group]||(e[n.group]=[]),n.isUniform?e[n.group].push({binding:n.binding,visibility:ii.VERTEX|ii.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?e[n.group].push({binding:n.binding,visibility:ii.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&e[n.group].push({binding:n.binding,visibility:ii.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function _w({groups:t}){const e=[];for(let s=0;s<t.length;s++){const n=t[s];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}function kw(t,e){const s=new Set,n=new Set,r=[...t.structs,...e.structs].filter(a=>s.has(a.name)?!1:(s.add(a.name),!0)),i=[...t.groups,...e.groups].filter(a=>{const o=`${a.name}-${a.binding}`;return n.has(o)?!1:(n.add(o),!0)});return{structs:r,groups:i}}const Yr=Object.create(null);class ol{constructor(e){var o,c;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:s,vertex:n,layout:r,gpuLayout:i,name:a}=e;if(this.name=a,this.fragment=s,this.vertex=n,s.source===n.source){const u=sc(s.source);this.structsAndGroups=u}else{const u=sc(n.source),d=sc(s.source);this.structsAndGroups=kw(u,d)}this.layout=r??_w(this.structsAndGroups),this.gpuLayout=i??Sw(this.structsAndGroups),this.autoAssignGlobalUniforms=((o=this.layout[0])==null?void 0:o.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((c=this.layout[1])==null?void 0:c.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:s}=this,n=e.source+s.source+e.entryPoint+s.entryPoint;this._layoutKey=Id(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=ww(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Yr[this._cacheKey]=null}static from(e){const s=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return Yr[s]||(Yr[s]=new ol(e),Yr[s]._cacheKey=s),Yr[s]}}const sx=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],Cw=sx.reduce((t,e)=>(t[e]=!0,t),{});function Mw(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const nx=class rx{constructor(e,s){this._touched=0,this.uid=je("uniform"),this._resourceType="uniformGroup",this._resourceId=je("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,s={...rx.defaultOptions,...s},this.uniformStructures=e;const n={};for(const r in e){const i=e[r];if(i.name=r,i.size=i.size??1,!Cw[i.type]){const a=i.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){const[,o,c]=a;throw new Error(`Uniform type ${i.type} is not supported. Use type: '${o}', size: ${c} instead.`)}throw new Error(`Uniform type ${i.type} is not supported. Supported uniform types are: ${sx.join(", ")}`)}i.value??(i.value=Mw(i.type,i.size)),n[r]=i.value}this.uniforms=n,this._dirtyId=1,this.ubo=s.ubo,this.isStatic=s.isStatic,this._signature=Id(Object.keys(n).map(r=>`${r}-${e[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};nx.defaultOptions={ubo:!1,isStatic:!1};let ix=nx;class oo{constructor(e){this.resources=Object.create(null),this._dirty=!0;let s=0;for(const n in e){const r=e[n];this.setResource(r,s++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let s=0;for(const n in this.resources)e[s++]=this.resources[n]._resourceId;this._key=e.join("|")}setResource(e,s){var r,i;const n=this.resources[s];e!==n&&(n&&((r=e.off)==null||r.call(e,"change",this.onResourceChange,this)),(i=e.on)==null||i.call(e,"change",this.onResourceChange,this),this.resources[s]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e,s){const n=this.resources;for(const r in n)n[r]._gcLastUsed=e,n[r]._touched=s}destroy(){var s;const e=this.resources;for(const n in e){const r=e[n];(s=r==null?void 0:r.off)==null||s.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const s=this.resources;for(const n in s)s[n]===e&&(s[n]=null)}else this._updateKey()}}var Nu=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(Nu||{});class Od extends es{constructor(e){super(),this.uid=je("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:s,glProgram:n,groups:r,resources:i,compatibleRenderers:a,groupMap:o}=e;this.gpuProgram=s,this.glProgram=n,a===void 0&&(a=0,s&&(a|=Nu.WEBGPU),n&&(a|=Nu.WEBGL)),this.compatibleRenderers=a;const c={};if(!i&&!r&&(i={}),i&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!s&&r&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!s&&r&&o)for(const u in o)for(const d in o[u]){const h=o[u][d];c[h]={group:u,binding:d,name:h}}else if(s&&r&&!o){const u=s.structsAndGroups.groups;o={},u.forEach(d=>{o[d.group]=o[d.group]||{},o[d.group][d.binding]=d.name,c[d.name]=d})}else if(i){r={},o={},s&&s.structsAndGroups.groups.forEach(h=>{o[h.group]=o[h.group]||{},o[h.group][h.binding]=h.name,c[h.name]=h});let u=0;for(const d in i)c[d]||(r[99]||(r[99]=new oo,this._ownedBindGroups.push(r[99])),c[d]={group:99,binding:u,name:d},o[99]=o[99]||{},o[99][u]=d,u++);for(const d in i){const h=d;let f=i[d];!f.source&&!f._resourceType&&(f=new ix(f));const p=c[h];p&&(r[p.group]||(r[p.group]=new oo,this._ownedBindGroups.push(r[p.group])),r[p.group].setResource(f,p.binding))}}this.groups=r,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(r,c)}addResource(e,s,n){var r,i;(r=this._uniformBindMap)[s]||(r[s]={}),(i=this._uniformBindMap[s])[n]||(i[n]=e),this.groups[s]||(this.groups[s]=new oo,this._ownedBindGroups.push(this.groups[s]))}_buildResourceAccessor(e,s){const n={};for(const r in s){const i=s[r];Object.defineProperty(n,i.name,{get(){return e[i.group].getResource(i.binding)},set(a){e[i.group].setResource(a,i.binding)}})}return n}destroy(e=!1){var s,n;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&((s=this.gpuProgram)==null||s.destroy(),(n=this.glProgram)==null||n.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(r=>{r.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:s,gl:n,...r}=e;let i,a;return s&&(i=ol.from(s)),n&&(a=tx.from(n)),new Od({gpuProgram:i,glProgram:a,...r})}}const Au=[];Xe.handleByNamedList(Y.Environment,Au);async function Nw(t){if(!t)for(let e=0;e<Au.length;e++){const s=Au[e];if(s.value.test()){await s.value.load();return}}}let Xr;function Aw(){if(typeof Xr=="boolean")return Xr;try{Xr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Xr=!1}return Xr}function Wf(t,e,s=2){const n=e&&e.length,r=n?e[0]*s:t.length;let i=ax(t,0,r,s,!0);const a=[];if(!i||i.next===i.prev)return a;let o,c,u;if(n&&(i=Rw(t,e,i,s)),t.length>80*s){o=t[0],c=t[1];let d=o,h=c;for(let f=s;f<r;f+=s){const p=t[f],g=t[f+1];p<o&&(o=p),g<c&&(c=g),p>d&&(d=p),g>h&&(h=g)}u=Math.max(d-o,h-c),u=u!==0?32767/u:0}return $i(i,a,s,o,c,u,0),a}function ax(t,e,s,n,r){let i;if(r===Vw(t,e,s,n)>0)for(let a=e;a<s;a+=n)i=Yf(a/n|0,t[a],t[a+1],i);else for(let a=s-n;a>=e;a-=n)i=Yf(a/n|0,t[a],t[a+1],i);return i&&Cr(i,i.next)&&(Ui(i),i=i.next),i}function Tn(t,e){if(!t)return t;e||(e=t);let s=t,n;do if(n=!1,!s.steiner&&(Cr(s,s.next)||_e(s.prev,s,s.next)===0)){if(Ui(s),s=e=s.prev,s===s.next)break;n=!0}else s=s.next;while(n||s!==e);return e}function $i(t,e,s,n,r,i,a){if(!t)return;!a&&i&&Ow(t,n,r,i);let o=t;for(;t.prev!==t.next;){const c=t.prev,u=t.next;if(i?Tw(t,n,r,i):jw(t)){e.push(c.i,t.i,u.i),Ui(t),t=u.next,o=u.next;continue}if(t=u,t===o){a?a===1?(t=Ew(Tn(t),e),$i(t,e,s,n,r,i,2)):a===2&&Pw(t,e,s,n,r,i):$i(Tn(t),e,s,n,r,i,1);break}}}function jw(t){const e=t.prev,s=t,n=t.next;if(_e(e,s,n)>=0)return!1;const r=e.x,i=s.x,a=n.x,o=e.y,c=s.y,u=n.y,d=Math.min(r,i,a),h=Math.min(o,c,u),f=Math.max(r,i,a),p=Math.max(o,c,u);let g=n.next;for(;g!==e;){if(g.x>=d&&g.x<=f&&g.y>=h&&g.y<=p&&ai(r,o,i,c,a,u,g.x,g.y)&&_e(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Tw(t,e,s,n){const r=t.prev,i=t,a=t.next;if(_e(r,i,a)>=0)return!1;const o=r.x,c=i.x,u=a.x,d=r.y,h=i.y,f=a.y,p=Math.min(o,c,u),g=Math.min(d,h,f),v=Math.max(o,c,u),b=Math.max(d,h,f),x=ju(p,g,e,s,n),m=ju(v,b,e,s,n);let y=t.prevZ,w=t.nextZ;for(;y&&y.z>=x&&w&&w.z<=m;){if(y.x>=p&&y.x<=v&&y.y>=g&&y.y<=b&&y!==r&&y!==a&&ai(o,d,c,h,u,f,y.x,y.y)&&_e(y.prev,y,y.next)>=0||(y=y.prevZ,w.x>=p&&w.x<=v&&w.y>=g&&w.y<=b&&w!==r&&w!==a&&ai(o,d,c,h,u,f,w.x,w.y)&&_e(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=x;){if(y.x>=p&&y.x<=v&&y.y>=g&&y.y<=b&&y!==r&&y!==a&&ai(o,d,c,h,u,f,y.x,y.y)&&_e(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=m;){if(w.x>=p&&w.x<=v&&w.y>=g&&w.y<=b&&w!==r&&w!==a&&ai(o,d,c,h,u,f,w.x,w.y)&&_e(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Ew(t,e){let s=t;do{const n=s.prev,r=s.next.next;!Cr(n,r)&&lx(n,s,s.next,r)&&Vi(n,r)&&Vi(r,n)&&(e.push(n.i,s.i,r.i),Ui(s),Ui(s.next),s=t=r),s=s.next}while(s!==t);return Tn(s)}function Pw(t,e,s,n,r,i){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Gw(a,o)){let c=cx(a,o);a=Tn(a,a.next),c=Tn(c,c.next),$i(a,e,s,n,r,i,0),$i(c,e,s,n,r,i,0);return}o=o.next}a=a.next}while(a!==t)}function Rw(t,e,s,n){const r=[];for(let i=0,a=e.length;i<a;i++){const o=e[i]*n,c=i<a-1?e[i+1]*n:t.length,u=ax(t,o,c,n,!1);u===u.next&&(u.steiner=!0),r.push(Hw(u))}r.sort(Lw);for(let i=0;i<r.length;i++)s=Dw(r[i],s);return s}function Lw(t,e){let s=t.x-e.x;if(s===0&&(s=t.y-e.y,s===0)){const n=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);s=n-r}return s}function Dw(t,e){const s=Bw(t,e);if(!s)return e;const n=cx(s,t);return Tn(n,n.next),Tn(s,s.next)}function Bw(t,e){let s=e;const n=t.x,r=t.y;let i=-1/0,a;if(Cr(t,s))return s;do{if(Cr(t,s.next))return s.next;if(r<=s.y&&r>=s.next.y&&s.next.y!==s.y){const h=s.x+(r-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(h<=n&&h>i&&(i=h,a=s.x<s.next.x?s:s.next,h===n))return a}s=s.next}while(s!==e);if(!a)return null;const o=a,c=a.x,u=a.y;let d=1/0;s=a;do{if(n>=s.x&&s.x>=c&&n!==s.x&&ox(r<u?n:i,r,c,u,r<u?i:n,r,s.x,s.y)){const h=Math.abs(r-s.y)/(n-s.x);Vi(s,t)&&(h<d||h===d&&(s.x>a.x||s.x===a.x&&Iw(a,s)))&&(a=s,d=h)}s=s.next}while(s!==o);return a}function Iw(t,e){return _e(t.prev,t,e.prev)<0&&_e(e.next,t,t.next)<0}function Ow(t,e,s,n){let r=t;do r.z===0&&(r.z=ju(r.x,r.y,e,s,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Fw(r)}function Fw(t){let e,s=1;do{let n=t,r;t=null;let i=null;for(e=0;n;){e++;let a=n,o=0;for(let u=0;u<s&&(o++,a=a.nextZ,!!a);u++);let c=s;for(;o>0||c>0&&a;)o!==0&&(c===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,c--),i?i.nextZ=r:t=r,r.prevZ=i,i=r;n=a}i.nextZ=null,s*=2}while(e>1);return t}function ju(t,e,s,n,r){return t=(t-s)*r|0,e=(e-n)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Hw(t){let e=t,s=t;do(e.x<s.x||e.x===s.x&&e.y<s.y)&&(s=e),e=e.next;while(e!==t);return s}function ox(t,e,s,n,r,i,a,o){return(r-a)*(e-o)>=(t-a)*(i-o)&&(t-a)*(n-o)>=(s-a)*(e-o)&&(s-a)*(i-o)>=(r-a)*(n-o)}function ai(t,e,s,n,r,i,a,o){return!(t===a&&e===o)&&ox(t,e,s,n,r,i,a,o)}function Gw(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!zw(t,e)&&(Vi(t,e)&&Vi(e,t)&&$w(t,e)&&(_e(t.prev,t,e.prev)||_e(t,e.prev,e))||Cr(t,e)&&_e(t.prev,t,t.next)>0&&_e(e.prev,e,e.next)>0)}function _e(t,e,s){return(e.y-t.y)*(s.x-e.x)-(e.x-t.x)*(s.y-e.y)}function Cr(t,e){return t.x===e.x&&t.y===e.y}function lx(t,e,s,n){const r=Ia(_e(t,e,s)),i=Ia(_e(t,e,n)),a=Ia(_e(s,n,t)),o=Ia(_e(s,n,e));return!!(r!==i&&a!==o||r===0&&Ba(t,s,e)||i===0&&Ba(t,n,e)||a===0&&Ba(s,t,n)||o===0&&Ba(s,e,n))}function Ba(t,e,s){return e.x<=Math.max(t.x,s.x)&&e.x>=Math.min(t.x,s.x)&&e.y<=Math.max(t.y,s.y)&&e.y>=Math.min(t.y,s.y)}function Ia(t){return t>0?1:t<0?-1:0}function zw(t,e){let s=t;do{if(s.i!==t.i&&s.next.i!==t.i&&s.i!==e.i&&s.next.i!==e.i&&lx(s,s.next,t,e))return!0;s=s.next}while(s!==t);return!1}function Vi(t,e){return _e(t.prev,t,t.next)<0?_e(t,e,t.next)>=0&&_e(t,t.prev,e)>=0:_e(t,e,t.prev)<0||_e(t,t.next,e)<0}function $w(t,e){let s=t,n=!1;const r=(t.x+e.x)/2,i=(t.y+e.y)/2;do s.y>i!=s.next.y>i&&s.next.y!==s.y&&r<(s.next.x-s.x)*(i-s.y)/(s.next.y-s.y)+s.x&&(n=!n),s=s.next;while(s!==t);return n}function cx(t,e){const s=Tu(t.i,t.x,t.y),n=Tu(e.i,e.x,e.y),r=t.next,i=e.prev;return t.next=e,e.prev=t,s.next=r,r.prev=s,n.next=s,s.prev=n,i.next=n,n.prev=i,n}function Yf(t,e,s,n){const r=Tu(t,e,s);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Ui(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Tu(t,e,s){return{i:t,x:e,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Vw(t,e,s,n){let r=0;for(let i=e,a=s-n;i<s;i+=n)r+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return r}const Uw=Wf.default||Wf;var ux=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(ux||{});class Ww{constructor(e){this.items=[],this._name=e}emit(e,s,n,r,i,a,o,c){const{name:u,items:d}=this;for(let h=0,f=d.length;h<f;h++)d[h][u](e,s,n,r,i,a,o,c);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const s=this.items.indexOf(e);return s!==-1&&this.items.splice(s,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Yw=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],dx=class hx extends es{constructor(e){super(),this.tick=0,this.uid=je("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const s=[...Yw,...this.config.runners??[]];this._addRunners(...s),this._unsafeEvalCheck()}async init(e={}){const s=e.skipExtensionImports===!0?!0:e.manageImports===!1;await Nw(s),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const n in this._systemsHash)e={...this._systemsHash[n].constructor.defaultOptions,...e};e={...hx.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let n=0;n<this.runners.init.items.length;n++)await this.runners.init.items[n].init(e);this._initOptions=e}render(e,s){this.tick++;let n=e;if(n instanceof ot&&(n={container:n},s&&(Z(ue,"passing a second argument is deprecated, please use render options instead"),n.target=s.renderTexture)),n.target||(n.target=this.view.renderTarget),n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor??(n.clearColor=this.background.colorRgba),n.clear??(n.clear=this.background.clearBeforeRender)),n.clearColor){const r=Array.isArray(n.clearColor)&&n.clearColor.length===4;n.clearColor=r?n.clearColor:Re.shared.setValue(n.clearColor).toArray()}n.transform||(n.container.updateLocalTransform(),n.transform=n.container.localTransform),n.container.visible&&(n.container.enableRenderGroup(),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n))}resize(e,s,n){const r=this.view.resolution;this.view.resize(e,s,n),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==r&&this.runners.resolutionChange.emit(n)}clear(e={}){const s=this;e.target||(e.target=s.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=ux.ALL);const{clear:n,clearColor:r,target:i}=e;Re.shared.setValue(r??this.background.colorRgba),s.renderTarget.clear(i,n,Re.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(s=>{this.runners[s]=new Ww(s)})}_addSystems(e){let s;for(s in e){const n=e[s];this._addSystem(n.value,n.name)}}_addSystem(e,s){const n=new e(this);if(this[s])throw new Error(`Whoops! The name "${s}" is already in use`);this[s]=n,this._systemsHash[s]=n;for(const r in this.runners)this.runners[r].add(n);return this}_addPipes(e,s){const n=s.reduce((r,i)=>(r[i.name]=i.value,r),{});e.forEach(r=>{const i=r.value,a=r.name,o=n[a];this.renderPipes[a]=new i(this,o?new o:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&ta.release(),Object.values(this.runners).forEach(s=>{s.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Aw())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};dx.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let fx=dx,Oa;function Xw(t){return Oa!==void 0||(Oa=(()=>{var s;const e={stencil:!0,failIfMajorPerformanceCaveat:t??fx.defaultOptions.failIfMajorPerformanceCaveat};try{if(!pe.get().getWebGLRenderingContext())return!1;let r=pe.get().createCanvas().getContext("webgl",e);const i=!!((s=r==null?void 0:r.getContextAttributes())!=null&&s.stencil);if(r){const a=r.getExtension("WEBGL_lose_context");a&&a.loseContext()}return r=null,i}catch{return!1}})()),Oa}let Fa;async function qw(t={}){return Fa!==void 0||(Fa=await(async()=>{const e=pe.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),Fa}const Xf=["webgl","webgpu","canvas"];async function Kw(t){let e=[];t.preference?(e.push(t.preference),Xf.forEach(i=>{i!==t.preference&&e.push(i)})):e=Xf.slice();let s,n={};for(let i=0;i<e.length;i++){const a=e[i];if(a==="webgpu"&&await qw()){const{WebGPURenderer:o}=await Bo(async()=>{const{WebGPURenderer:c}=await import("./WebGPURenderer-DavqKsrd.js");return{WebGPURenderer:c}},__vite__mapDeps([3,2,4]));s=o,n={...t,...t.webgpu};break}else if(a==="webgl"&&Xw(t.failIfMajorPerformanceCaveat??fx.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await Bo(async()=>{const{WebGLRenderer:c}=await import("./WebGLRenderer-BT8USeuB.js");return{WebGLRenderer:c}},__vite__mapDeps([5,2,4]));s=o,n={...t,...t.webgl};break}else if(a==="canvas")throw n={...t},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!s)throw new Error("No available renderer for the current environment");const r=new s;return await r.init(n),r}const px="8.15.0";class mx{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,px)}static destroy(){}}mx.extension=Y.Application;class Qw{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,px)}destroy(){this._renderer=null}}Qw.extension={type:[Y.WebGLSystem,Y.WebGPUSystem],name:"initHook",priority:-10};const gx=class Eu{constructor(...e){this.stage=new ot,e[0]!==void 0&&Z(ue,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new ot),this.renderer=await Kw(e),Eu._plugins.forEach(s=>{s.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Z(ue,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,s=!1){const n=Eu._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(s),this.stage=null,this.renderer.destroy(e),this.renderer=null}};gx._plugins=[];let xx=gx;Xe.handleByList(Y.Application,xx._plugins);Xe.add(mx);class yx extends es{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Z(ue,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Z(ue,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Z(ue,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Z(ue,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Z(ue,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var s;this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)(s=this.chars[n].texture)==null||s.destroy();this.chars=null,e&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2026 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.7
 */class Zw{constructor(e=0,s=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=n,this.size=0,this.ttl=s}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const s=this.items[e];delete this.items[e],this.size--,s.prev!==null&&(s.prev.next=s.next),s.next!==null&&(s.next.prev=s.prev),this.first===s&&(this.first=s.next),this.last===s&&(this.last=s.prev)}return this}entries(e=this.keys()){const s=new Array(e.length);for(let n=0;n<e.length;n++){const r=e[n];s[n]=[r,this.get(r)]}return s}evict(e=!1){if(e||this.size>0){const s=this.first;delete this.items[s.key],--this.size===0?(this.first=null,this.last=null):(this.first=s.next,this.first.prev=null)}return this}expiresAt(e){let s;return this.has(e)&&(s=this.items[e].expiry),s}get(e){const s=this.items[e];if(s!==void 0){if(this.ttl>0&&s.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(s),s.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=new Array(this.size);let s=this.first,n=0;for(;s!==null;)e[n++]=s.key,s=s.next;return e}setWithEvicted(e,s,n=this.resetTtl){let r=null;if(this.has(e))this.set(e,s,!0,n);else{this.max>0&&this.size===this.max&&(r={...this.first},this.evict(!0));let i=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:s};++this.size===1?this.first=i:this.last.next=i,this.last=i}return r}set(e,s,n=!1,r=this.resetTtl){let i=this.items[e];return n||i!==void 0?(i.value=s,n===!1&&r&&(i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(i)):(this.max>0&&this.size===this.max&&this.evict(!0),i=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:s},++this.size===1?this.first=i:this.last.next=i,this.last=i),this}values(e=this.keys()){const s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=this.get(e[n]);return s}}function vx(t=1e3,e=0,s=!1){if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof s!="boolean")throw new TypeError("Invalid resetTtl value");return new Zw(t,e,s)}const Jw=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Oo(t){const e=typeof t.fontSize=="number"?`${t.fontSize}px`:t.fontSize;let s=t.fontFamily;Array.isArray(t.fontFamily)||(s=t.fontFamily.split(","));for(let n=s.length-1;n>=0;n--){let r=s[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!Jw.includes(r)&&(r=`"${r}"`),s[n]=r}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${s.join(",")}`}const nc={willReadFrequently:!0},ss=class W{static get experimentalLetterSpacingSupported(){let e=W._experimentalLetterSpacingSupported;if(e===void 0){const s=pe.get().getCanvasRenderingContext2D().prototype;e=W._experimentalLetterSpacingSupported="letterSpacing"in s||"textLetterSpacing"in s}return e}constructor(e,s,n,r,i,a,o,c,u){this.text=e,this.style=s,this.width=n,this.height=r,this.lines=i,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=c,this.fontProperties=u}static measureText(e=" ",s,n=W._canvas,r=s.wordWrap){var m;const i=`${e}-${s.styleKey}-wordWrap-${r}`;if(W._measurementCache.has(i))return W._measurementCache.get(i);const a=Oo(s),o=W.measureFont(a);o.fontSize===0&&(o.fontSize=s.fontSize,o.ascent=s.fontSize);const c=W.__context;c.font=a;const d=(r?W._wordWrap(e,s,n):e).split(/(?:\r\n|\r|\n)/),h=new Array(d.length);let f=0;for(let y=0;y<d.length;y++){const w=W._measureText(d[y],s.letterSpacing,c);h[y]=w,f=Math.max(f,w)}const p=((m=s._stroke)==null?void 0:m.width)||0;let g=f+p;s.dropShadow&&(g+=s.dropShadow.distance);const v=s.lineHeight||o.fontSize;let b=Math.max(v,o.fontSize+p)+(d.length-1)*(v+s.leading);s.dropShadow&&(b+=s.dropShadow.distance);const x=new W(e,s,g,b,d,h,v+s.leading,f,o);return W._measurementCache.set(i,x),x}static _measureText(e,s,n){let r=!1;W.experimentalLetterSpacingSupported&&(W.experimentalLetterSpacing?(n.letterSpacing=`${s}px`,n.textLetterSpacing=`${s}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));const i=n.measureText(e);let a=i.width;const o=-i.actualBoundingBoxLeft;let u=i.actualBoundingBoxRight-o;if(a>0)if(r)a-=s,u-=s;else{const d=(W.graphemeSegmenter(e).length-1)*s;a+=d,u+=d}return Math.max(a,u)}static _wordWrap(e,s,n=W._canvas){const r=n.getContext("2d",nc);let i=0,a="",o="";const c=Object.create(null),{letterSpacing:u,whiteSpace:d}=s,h=W._collapseSpaces(d),f=W._collapseNewlines(d);let p=!h;const g=s.wordWrapWidth+u,v=W._tokenize(e);for(let b=0;b<v.length;b++){let x=v[b];if(W._isNewline(x)){if(!f){o+=W._addLine(a),p=!h,a="",i=0;continue}x=" "}if(h){const y=W.isBreakingSpace(x),w=W.isBreakingSpace(a[a.length-1]);if(y&&w)continue}const m=W._getFromCache(x,u,c,r);if(m>g)if(a!==""&&(o+=W._addLine(a),a="",i=0),W.canBreakWords(x,s.breakWords)){const y=W.wordWrapSplit(x);for(let w=0;w<y.length;w++){let k=y[w],_=k,S=1;for(;y[w+S];){const C=y[w+S];if(!W.canBreakChars(_,C,x,w,s.breakWords))k+=C;else break;_=C,S++}w+=S-1;const A=W._getFromCache(k,u,c,r);A+i>g&&(o+=W._addLine(a),p=!1,a="",i=0),a+=k,i+=A}}else{a.length>0&&(o+=W._addLine(a),a="",i=0);const y=b===v.length-1;o+=W._addLine(x,!y),p=!1,a="",i=0}else m+i>g&&(p=!1,o+=W._addLine(a),a="",i=0),(a.length>0||!W.isBreakingSpace(x)||p)&&(a+=x,i+=m)}return o+=W._addLine(a,!1),o}static _addLine(e,s=!0){return e=W._trimRight(e),e=s?`${e}
`:e,e}static _getFromCache(e,s,n,r){let i=n[e];return typeof i!="number"&&(i=W._measureText(e,s,r)+s,n[e]=i),i}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let s=e.length-1;s>=0;s--){const n=e[s];if(!W.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:W._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,s){return typeof e!="string"?!1:W._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const s=[];let n="";if(typeof e!="string")return s;for(let r=0;r<e.length;r++){const i=e[r],a=e[r+1];if(W.isBreakingSpace(i,a)||W._isNewline(i)){n!==""&&(s.push(n),n=""),i==="\r"&&a===`
`?(s.push(`\r
`),r++):s.push(i);continue}n+=i}return n!==""&&s.push(n),s}static canBreakWords(e,s){return s}static canBreakChars(e,s,n,r,i){return!0}static wordWrapSplit(e){return W.graphemeSegmenter(e)}static measureFont(e){if(W._fonts[e])return W._fonts[e];const s=W._context;s.font=e;const n=s.measureText(W.METRICS_STRING+W.BASELINE_SYMBOL),r={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return W._fonts[e]=r,r}static clearMetrics(e=""){e?delete W._fonts[e]:W._fonts={}}static get _canvas(){if(!W.__canvas){let e;try{const s=new OffscreenCanvas(0,0),n=s.getContext("2d",nc);if(n!=null&&n.measureText)return W.__canvas=s,s;e=pe.get().createCanvas()}catch{e=pe.get().createCanvas()}e.width=e.height=10,W.__canvas=e}return W.__canvas}static get _context(){return W.__context||(W.__context=W._canvas.getContext("2d",nc)),W.__context}};ss.METRICS_STRING="|q";ss.BASELINE_SYMBOL="M";ss.BASELINE_MULTIPLIER=1.4;ss.HEIGHT_MULTIPLIER=2;ss.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>{const s=t.segment(e),n=[];let r=0;for(const i of s)n[r++]=i.segment;return n}}return t=>[...t]})();ss.experimentalLetterSpacing=!1;ss._fonts={};ss._newlines=[10,13];ss._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];ss._measurementCache=vx(1e3);let ps=ss;const qf=[{offset:0,color:"white"},{offset:1,color:"black"}],Fd=class Pu{constructor(...e){this.uid=je("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let s=eS(e);s={...s.type==="radial"?Pu.defaultRadialOptions:Pu.defaultLinearOptions,..._g(s)},this._textureSize=s.textureSize,this._wrapMode=s.wrapMode,s.type==="radial"?(this.center=s.center,this.outerCenter=s.outerCenter??this.center,this.innerRadius=s.innerRadius,this.outerRadius=s.outerRadius,this.scale=s.scale,this.rotation=s.rotation):(this.start=s.start,this.end=s.end),this.textureSpace=s.textureSpace,this.type=s.type,s.colorStops.forEach(r=>{this.addColorStop(r.offset,r.color)})}addColorStop(e,s){return this.colorStops.push({offset:e,color:Re.shared.setValue(s).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:s}=this.start,{x:n,y:r}=this.end,i=n-e,a=r-s;const o=i<0||a<0;if(this._wrapMode==="clamp-to-edge"){if(i<0){const b=e;e=n,n=b,i*=-1}if(a<0){const b=s;s=r,r=b,a*=-1}}const c=this.colorStops.length?this.colorStops:qf,u=this._textureSize,{canvas:d,context:h}=Qf(u,1),f=o?h.createLinearGradient(this._textureSize,0,0,0):h.createLinearGradient(0,0,this._textureSize,0);Kf(f,c),h.fillStyle=f,h.fillRect(0,0,u,1),this.texture=new te({source:new jn({resource:d,addressMode:this._wrapMode})});const p=Math.sqrt(i*i+a*a),g=Math.atan2(a,i),v=new se;v.scale(p/u,1),v.rotate(g),v.translate(e,s),this.textureSpace==="local"&&v.scale(u,u),this.transform=v}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:qf,s=this._textureSize,{canvas:n,context:r}=Qf(s,s),{x:i,y:a}=this.center,{x:o,y:c}=this.outerCenter,u=this.innerRadius,d=this.outerRadius,h=o-d,f=c-d,p=s/(d*2),g=(i-h)*p,v=(a-f)*p,b=r.createRadialGradient(g,v,u*p,(o-h)*p,(c-f)*p,d*p);Kf(b,e),r.fillStyle=e[e.length-1].color,r.fillRect(0,0,s,s),r.fillStyle=b,r.translate(g,v),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-g,-v),r.fillRect(0,0,s,s),this.texture=new te({source:new jn({resource:n,addressMode:this._wrapMode})});const x=new se;x.scale(1/p,1/p),x.translate(h,f),this.textureSpace==="local"&&x.scale(s,s),this.transform=x}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Fd.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Fd.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Ps=Fd;function Kf(t,e){for(let s=0;s<e.length;s++){const n=e[s];t.addColorStop(n.offset,n.color)}}function Qf(t,e){const s=pe.get().createCanvas(t,e),n=s.getContext("2d");return{canvas:s,context:n}}function eS(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(Z("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??Ps.defaultLinearOptions.textureSize}),e}const Zf={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class ll{constructor(e,s){this.uid=je("fillPattern"),this._tick=0,this.transform=new se,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),s&&(e.source.style.addressModeU=Zf[s].addressModeU,e.source.style.addressModeV=Zf[s].addressModeV)}setTransform(e){const s=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/s.frame.width,1/s.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var tS=nS,rc={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},sS=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function nS(t){var e=[];return t.replace(sS,function(s,n,r){var i=n.toLowerCase();for(r=iS(r),i=="m"&&r.length>2&&(e.push([n].concat(r.splice(0,2))),i="l",n=n=="m"?"l":"L");;){if(r.length==rc[i])return r.unshift(n),e.push(r);if(r.length<rc[i])throw new Error("malformed path data");e.push([n].concat(r.splice(0,rc[i])))}}),e}var rS=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function iS(t){var e=t.match(rS);return e?e.map(Number):[]}const aS=Fu(tS);function oS(t,e){const s=aS(t),n=[];let r=null,i=0,a=0;for(let o=0;o<s.length;o++){const c=s[o],u=c[0],d=c;switch(u){case"M":i=d[1],a=d[2],e.moveTo(i,a);break;case"m":i+=d[1],a+=d[2],e.moveTo(i,a);break;case"H":i=d[1],e.lineTo(i,a);break;case"h":i+=d[1],e.lineTo(i,a);break;case"V":a=d[1],e.lineTo(i,a);break;case"v":a+=d[1],e.lineTo(i,a);break;case"L":i=d[1],a=d[2],e.lineTo(i,a);break;case"l":i+=d[1],a+=d[2],e.lineTo(i,a);break;case"C":i=d[5],a=d[6],e.bezierCurveTo(d[1],d[2],d[3],d[4],i,a);break;case"c":e.bezierCurveTo(i+d[1],a+d[2],i+d[3],a+d[4],i+d[5],a+d[6]),i+=d[5],a+=d[6];break;case"S":i=d[3],a=d[4],e.bezierCurveToShort(d[1],d[2],i,a);break;case"s":e.bezierCurveToShort(i+d[1],a+d[2],i+d[3],a+d[4]),i+=d[3],a+=d[4];break;case"Q":i=d[3],a=d[4],e.quadraticCurveTo(d[1],d[2],i,a);break;case"q":e.quadraticCurveTo(i+d[1],a+d[2],i+d[3],a+d[4]),i+=d[3],a+=d[4];break;case"T":i=d[1],a=d[2],e.quadraticCurveToShort(i,a);break;case"t":i+=d[1],a+=d[2],e.quadraticCurveToShort(i,a);break;case"A":i=d[6],a=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],i,a);break;case"a":i+=d[6],a+=d[7],e.arcToSvg(d[1],d[2],d[3],d[4],d[5],i,a);break;case"Z":case"z":e.closePath(),n.length>0&&(r=n.pop(),r?(i=r.startX,a=r.startY):(i=0,a=0)),r=null;break;default:xe(`Unknown SVG path command: ${u}`)}u!=="Z"&&u!=="z"&&r===null&&(r={startX:i,startY:a},n.push(r))}return e}class Hd{constructor(e=0,s=0,n=0){this.type="circle",this.x=e,this.y=s,this.radius=n}clone(){return new Hd(this.x,this.y,this.radius)}contains(e,s){if(this.radius<=0)return!1;const n=this.radius*this.radius;let r=this.x-e,i=this.y-s;return r*=r,i*=i,r+i<=n}strokeContains(e,s,n,r=.5){if(this.radius===0)return!1;const i=this.x-e,a=this.y-s,o=this.radius,c=(1-r)*n,u=Math.sqrt(i*i+a*a);return u<=o+c&&u>o-(n-c)}getBounds(e){return e||(e=new ve),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Gd{constructor(e=0,s=0,n=0,r=0){this.type="ellipse",this.x=e,this.y=s,this.halfWidth=n,this.halfHeight=r}clone(){return new Gd(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,s){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,r=(s-this.y)/this.halfHeight;return n*=n,r*=r,n+r<=1}strokeContains(e,s,n,r=.5){const{halfWidth:i,halfHeight:a}=this;if(i<=0||a<=0)return!1;const o=n*(1-r),c=n-o,u=i-c,d=a-c,h=i+o,f=a+o,p=e-this.x,g=s-this.y,v=p*p/(u*u)+g*g/(d*d),b=p*p/(h*h)+g*g/(f*f);return v>1&&b<=1}getBounds(e){return e||(e=new ve),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function lS(t,e,s,n,r,i){const a=t-s,o=e-n,c=r-s,u=i-n,d=a*c+o*u,h=c*c+u*u;let f=-1;h!==0&&(f=d/h);let p,g;f<0?(p=s,g=n):f>1?(p=r,g=i):(p=s+f*c,g=n+f*u);const v=t-p,b=e-g;return v*v+b*b}let cS,uS;class vi{constructor(...e){this.type="polygon";let s=Array.isArray(e[0])?e[0]:e;if(typeof s[0]!="number"){const n=[];for(let r=0,i=s.length;r<i;r++)n.push(s[r].x,s[r].y);s=n}this.points=s,this.closePath=!0}isClockwise(){let e=0;const s=this.points,n=s.length;for(let r=0;r<n;r+=2){const i=s[r],a=s[r+1],o=s[(r+2)%n],c=s[(r+3)%n];e+=(o-i)*(c+a)}return e<0}containsPolygon(e){const s=this.getBounds(cS),n=e.getBounds(uS);if(!s.containsRect(n))return!1;const r=e.points;for(let i=0;i<r.length;i+=2){const a=r[i],o=r[i+1];if(!this.contains(a,o))return!1}return!0}clone(){const e=this.points.slice(),s=new vi(e);return s.closePath=this.closePath,s}contains(e,s){let n=!1;const r=this.points.length/2;for(let i=0,a=r-1;i<r;a=i++){const o=this.points[i*2],c=this.points[i*2+1],u=this.points[a*2],d=this.points[a*2+1];c>s!=d>s&&e<(u-o)*((s-c)/(d-c))+o&&(n=!n)}return n}strokeContains(e,s,n,r=.5){const i=n*n,a=i*(1-r),o=i-a,{points:c}=this,u=c.length-(this.closePath?0:2);for(let d=0;d<u;d+=2){const h=c[d],f=c[d+1],p=c[(d+2)%c.length],g=c[(d+3)%c.length],v=lS(e,s,h,f,p,g),b=Math.sign((p-h)*(s-f)-(g-f)*(e-h));if(v<=(b<0?o:a))return!0}return!1}getBounds(e){e||(e=new ve);const s=this.points;let n=1/0,r=-1/0,i=1/0,a=-1/0;for(let o=0,c=s.length;o<c;o+=2){const u=s[o],d=s[o+1];n=u<n?u:n,r=u>r?u:r,i=d<i?d:i,a=d>a?d:a}return e.x=n,e.width=r-n,e.y=i,e.height=a-i,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,s)=>`${e}, ${s}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Z("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Z("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Ha=(t,e,s,n,r,i,a)=>{const o=t-s,c=e-n,u=Math.sqrt(o*o+c*c);return u>=r-i&&u<=r+a};class zd{constructor(e=0,s=0,n=0,r=0,i=20){this.type="roundedRectangle",this.x=e,this.y=s,this.width=n,this.height=r,this.radius=i}getBounds(e){return e||(e=new ve),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new zd(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,s){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&s>=this.y&&s<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(s>=this.y+n&&s<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let r=e-(this.x+n),i=s-(this.y+n);const a=n*n;if(r*r+i*i<=a||(r=e-(this.x+this.width-n),r*r+i*i<=a)||(i=s-(this.y+this.height-n),r*r+i*i<=a)||(r=e-(this.x+n),r*r+i*i<=a))return!0}return!1}strokeContains(e,s,n,r=.5){const{x:i,y:a,width:o,height:c,radius:u}=this,d=n*(1-r),h=n-d,f=i+u,p=a+u,g=o-u*2,v=c-u*2,b=i+o,x=a+c;return(e>=i-d&&e<=i+h||e>=b-h&&e<=b+d)&&s>=p&&s<=p+v||(s>=a-d&&s<=a+h||s>=x-h&&s<=x+d)&&e>=f&&e<=f+g?!0:e<f&&s<p&&Ha(e,s,f,p,u,h,d)||e>b-u&&s<p&&Ha(e,s,b-u,p,u,h,d)||e>b-u&&s>x-u&&Ha(e,s,b-u,x-u,u,h,d)||e<f&&s>x-u&&Ha(e,s,f,x-u,u,h,d)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const bx={};function dS(t,e,s){let n=2166136261;for(let r=0;r<e;r++)n^=t[r].uid,n=Math.imul(n,16777619),n>>>=0;return bx[n]||hS(t,e,n,s)}function hS(t,e,s,n){const r={};let i=0;for(let o=0;o<n;o++){const c=o<e?t[o]:te.EMPTY.source;r[i++]=c.source,r[i++]=c.style}const a=new oo(r);return bx[s]=a,a}class Jf{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function e0(t,e){const s=t.byteLength/8|0,n=new Float64Array(t,0,s);new Float64Array(e,0,s).set(n);const i=t.byteLength-s*8;if(i>0){const a=new Uint8Array(t,s*8,i);new Uint8Array(e,s*8,i).set(a)}}const fS={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var pS=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(pS||{});function t0(t,e){return e.alphaMode==="no-premultiply-alpha"&&fS[t]||t}const mS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function gS(t){let e="";for(let s=0;s<t;++s)s>0&&(e+=`
else `),s<t-1&&(e+=`if(test == ${s}.0){}`);return e}function xS(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const s=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const n=mS.replace(/%forloop%/gi,gS(t));if(e.shaderSource(s,n),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(s)}return t}let Fn=null;function yS(){var e;if(Fn)return Fn;const t=Jg();return Fn=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Fn=xS(Fn,t),(e=t.getExtension("WEBGL_lose_context"))==null||e.loseContext(),Fn}class vS{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const s=this.textures[e];this.textures[e]=null,this.ids[s.uid]=null}this.count=0}}class bS{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new vS,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const bi=[];let Fo=0;ta.register({clear:()=>{if(bi.length>0)for(const t of bi)t&&t.destroy();bi.length=0,Fo=0}});function s0(){return Fo>0?bi[--Fo]:new bS}function n0(t){bi[Fo++]=t}let qr=0;const wx=class Sx{constructor(e){this.uid=je("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...Sx.defaultOptions,...e},e.maxTextures||(Z("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=yS());const{maxTextures:s,attributesInitialSize:n,indicesInitialSize:r}=e;this.attributeBuffer=new Jf(n*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=s}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)n0(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,s){const n=e._batch.textures.ids[s._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=s,!0)}updateElement(e){this.dirty=!0;const s=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,s.float32View,s.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,s.float32View,s.uint32View,e._attributeStart,e._textureId)}break(e){const s=this._elements;if(!s[this.elementStart])return;let n=s0(),r=n.textures;r.clear();const i=s[this.elementStart];let a=t0(i.blendMode,i.texture._source),o=i.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const c=this.attributeBuffer.float32View,u=this.attributeBuffer.uint32View,d=this.indexBuffer;let h=this._batchIndexSize,f=this._batchIndexStart,p="startBatch";const g=this.maxTextures;for(let v=this.elementStart;v<this.elementSize;++v){const b=s[v];s[v]=null;const m=b.texture._source,y=t0(b.blendMode,m),w=a!==y||o!==b.topology;if(m._batchTick===qr&&!w){b._textureId=m._textureBindLocation,h+=b.indexSize,b.packAsQuad?(this.packQuadAttributes(b,c,u,b._attributeStart,b._textureId),this.packQuadIndex(d,b._indexStart,b._attributeStart/this.vertexSize)):(this.packAttributes(b,c,u,b._attributeStart,b._textureId),this.packIndex(b,d,b._indexStart,b._attributeStart/this.vertexSize)),b._batch=n;continue}m._batchTick=qr,(r.count>=g||w)&&(this._finishBatch(n,f,h-f,r,a,o,e,p),p="renderBatch",f=h,a=y,o=b.topology,n=s0(),r=n.textures,r.clear(),++qr),b._textureId=m._textureBindLocation=r.count,r.ids[m.uid]=r.count,r.textures[r.count++]=m,b._batch=n,h+=b.indexSize,b.packAsQuad?(this.packQuadAttributes(b,c,u,b._attributeStart,b._textureId),this.packQuadIndex(d,b._indexStart,b._attributeStart/this.vertexSize)):(this.packAttributes(b,c,u,b._attributeStart,b._textureId),this.packIndex(b,d,b._indexStart,b._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(n,f,h-f,r,a,o,e,p),f=h,++qr),this.elementStart=this.elementSize,this._batchIndexStart=f,this._batchIndexSize=h}_finishBatch(e,s,n,r,i,a,o,c){e.gpuBindGroup=null,e.bindGroup=null,e.action=c,e.batcher=this,e.textures=r,e.blendMode=i,e.topology=a,e.start=s,e.size=n,++qr,this.batches[this.batchIndex++]=e,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const s=Math.max(e,this.attributeBuffer.size*2),n=new Jf(s);e0(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(e){const s=this.indexBuffer;let n=Math.max(e,s.length*1.5);n+=n%2;const r=n>65535?new Uint32Array(n):new Uint16Array(n);if(r.BYTES_PER_ELEMENT!==s.BYTES_PER_ELEMENT)for(let i=0;i<s.length;i++)r[i]=s[i];else e0(s.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,s,n){e[s]=n+0,e[s+1]=n+1,e[s+2]=n+2,e[s+3]=n+0,e[s+4]=n+2,e[s+5]=n+3}packIndex(e,s,n,r){const i=e.indices,a=e.indexSize,o=e.indexOffset,c=e.attributeOffset;for(let u=0;u<a;u++)s[n++]=r+i[u+o]-c}destroy(e={}){var s;if(this.batches!==null){for(let n=0;n<this.batchIndex;n++)n0(this.batches[n]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&((s=this.shader)==null||s.destroy(),this.shader=null);for(let n=0;n<this._elements.length;n++)this._elements[n]&&(this._elements[n]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};wx.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let wS=wx;var pt=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(pt||{});class Wi extends es{constructor(e){let{data:s,size:n}=e;const{usage:r,label:i,shrinkToFit:a}=e;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=je("buffer"),this._resourceType="buffer",this._resourceId=je("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,s instanceof Array&&(s=new Float32Array(s)),this._data=s,n??(n=s==null?void 0:s.byteLength);const o=!!s;this.descriptor={size:n,usage:r,mappedAtCreation:o,label:i},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&pt.STATIC)}set static(e){e?this.descriptor.usage|=pt.STATIC:this.descriptor.usage&=~pt.STATIC}setDataWithSize(e,s,n){if(this._updateID++,this._updateSize=s*e.BYTES_PER_ELEMENT,this._data===e){n&&this.emit("update",this);return}const r=this._data;if(this._data=e,this._dataInt32=null,!r||r.length!==e.length){!this.shrinkToFit&&r&&e.byteLength<r.byteLength?n&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=je("resource"),this.emit("change",this));return}n&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}unload(){var e;this.emit("unload",this);for(const s in this._gpuData)(e=this._gpuData[s])==null||e.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function _x(t,e){if(!(t instanceof Wi)){let s=e?pt.INDEX:pt.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),s=pt.INDEX|pt.COPY_DST):(t=new Float32Array(t),s=pt.VERTEX|pt.COPY_DST)),t=new Wi({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:s})}return t}function SS(t,e,s){const n=t.getAttribute(e);if(!n)return s.minX=0,s.minY=0,s.maxX=0,s.maxY=0,s;const r=n.buffer.data;let i=1/0,a=1/0,o=-1/0,c=-1/0;const u=r.BYTES_PER_ELEMENT,d=(n.offset||0)/u,h=(n.stride||2*4)/u;for(let f=d;f<r.length;f+=h){const p=r[f],g=r[f+1];p>o&&(o=p),g>c&&(c=g),p<i&&(i=p),g<a&&(a=g)}return s.minX=i,s.minY=a,s.maxX=o,s.maxY=c,s}function _S(t){return(t instanceof Wi||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=_x(t.buffer,!1),t}class kS extends es{constructor(e={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=je("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Jt,this._boundsDirty=!0;const{attributes:s,indexBuffer:n,topology:r}=e;if(this.buffers=[],this.attributes={},s)for(const i in s)this.addAttribute(i,s[i]);this.instanceCount=e.instanceCount??1,n&&this.addIndex(n),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const s=this.attributes[e];return s.buffer.data.length/(s.stride/4||s.size)}return 0}addAttribute(e,s){const n=_S(s);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on("update",this.onBufferUpdate,this),n.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=n}addIndex(e){this.indexBuffer=_x(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,SS(this,"aPosition",this._bounds)):this._bounds}unload(){var e;this.emit("unload",this);for(const s in this._gpuData)(e=this._gpuData[s])==null||e.destroy();this._gpuData=Object.create(null)}destroy(e=!1){var s;this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(n=>n.destroy()),this.unload(),(s=this.indexBuffer)==null||s.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const CS=new Float32Array(1),MS=new Uint32Array(1);class NS extends kS{constructor(){const s=new Wi({data:CS,label:"attribute-batch-buffer",usage:pt.VERTEX|pt.COPY_DST,shrinkToFit:!1}),n=new Wi({data:MS,label:"index-batch-buffer",usage:pt.INDEX|pt.COPY_DST,shrinkToFit:!1}),r=6*4;super({attributes:{aPosition:{buffer:s,format:"float32x2",stride:r,offset:0},aUV:{buffer:s,format:"float32x2",stride:r,offset:2*4},aColor:{buffer:s,format:"unorm8x4",stride:r,offset:4*4},aTextureIdAndRound:{buffer:s,format:"uint16x2",stride:r,offset:5*4}},indexBuffer:n})}}function r0(t,e,s){if(t)for(const n in t){const r=n.toLocaleLowerCase(),i=e[r];if(i){let a=t[n];n==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),s&&i.push(`//----${s}----//`),i.push(a)}else xe(`${n} placement hook does not exist in shader`)}}const AS=/\{\{(.*?)\}\}/g;function i0(t){var n;const e={};return(((n=t.match(AS))==null?void 0:n.map(r=>r.replace(/[{()}]/g,"")))??[]).forEach(r=>{e[r]=[]}),e}function a0(t,e){let s;const n=/@in\s+([^;]+);/g;for(;(s=n.exec(t))!==null;)e.push(s[1])}function o0(t,e,s=!1){const n=[];a0(e,n),t.forEach(o=>{o.header&&a0(o.header,n)});const r=n;s&&r.sort();const i=r.map((o,c)=>`       @location(${c}) ${o},`).join(`
`);let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${i}
`),a}function l0(t,e){let s;const n=/@out\s+([^;]+);/g;for(;(s=n.exec(t))!==null;)e.push(s[1])}function jS(t){const s=/\b(\w+)\s*:/g.exec(t);return s?s[1]:""}function TS(t){const e=/@.*?\s+/g;return t.replace(e,"")}function ES(t,e){const s=[];l0(e,s),t.forEach(c=>{c.header&&l0(c.header,s)});let n=0;const r=s.sort().map(c=>c.indexOf("builtin")>-1?c:`@location(${n++}) ${c}`).join(`,
`),i=s.sort().map(c=>`       var ${TS(c)};`).join(`
`),a=`return VSOutput(
            ${s.sort().map(c=>` ${jS(c)}`).join(`,
`)});`;let o=e.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${r}
`),o=o.replace("{{start}}",`
${i}
`),o=o.replace("{{return}}",`
${a}
`),o}function c0(t,e){let s=t;for(const n in e){const r=e[n];r.join(`
`).length?s=s.replace(`{{${n}}}`,`//-----${n} START-----//
${r.join(`
`)}
//----${n} FINISH----//`):s=s.replace(`{{${n}}}`,"")}return s}const zs=Object.create(null),ic=new Map;let PS=0;function RS({template:t,bits:e}){const s=kx(t,e);if(zs[s])return zs[s];const{vertex:n,fragment:r}=DS(t,e);return zs[s]=Cx(n,r,e),zs[s]}function LS({template:t,bits:e}){const s=kx(t,e);return zs[s]||(zs[s]=Cx(t.vertex,t.fragment,e)),zs[s]}function DS(t,e){const s=e.map(a=>a.vertex).filter(a=>!!a),n=e.map(a=>a.fragment).filter(a=>!!a);let r=o0(s,t.vertex,!0);r=ES(s,r);const i=o0(n,t.fragment,!0);return{vertex:r,fragment:i}}function kx(t,e){return e.map(s=>(ic.has(s)||ic.set(s,PS++),ic.get(s))).sort((s,n)=>s-n).join("-")+t.vertex+t.fragment}function Cx(t,e,s){const n=i0(t),r=i0(e);return s.forEach(i=>{r0(i.vertex,n,i.name),r0(i.fragment,r,i.name)}),{vertex:c0(t,n),fragment:c0(e,r)}}const BS=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,IS=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,OS=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,FS=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,HS={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},GS={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function zS({bits:t,name:e}){const s=RS({template:{fragment:IS,vertex:BS},bits:[HS,...t]});return ol.from({name:e,vertex:{source:s.vertex,entryPoint:"main"},fragment:{source:s.fragment,entryPoint:"main"}})}function $S({bits:t,name:e}){return new tx({name:e,...LS({template:{vertex:OS,fragment:FS},bits:[GS,...t]})})}const VS={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},US={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},ac={};function WS(t){const e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let s=0;for(let n=0;n<t;n++)e.push(`@group(1) @binding(${s++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${s++}) var textureSampler${n+1}: sampler;`)}return e.join(`
`)}function YS(t){const e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let s=0;s<t;s++)s===t-1?e.push("  default:{"):e.push(`  case ${s}:{`),e.push(`      outColor = textureSampleGrad(textureSource${s+1}, textureSampler${s+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function XS(t){return ac[t]||(ac[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${WS(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${YS(t)}
            `}}),ac[t]}const oc={};function qS(t){const e=[];for(let s=0;s<t;s++)s>0&&e.push("else"),s<t-1&&e.push(`if(vTextureId < ${s}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${s}], vUV);`),e.push("}");return e.join(`
`)}function KS(t){return oc[t]||(oc[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${qS(t)}
            `}}),oc[t]}const QS={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},ZS={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},u0={};function JS(t){let e=u0[t];if(e)return e;const s=new Int32Array(t);for(let n=0;n<t;n++)s[n]=n;return e=u0[t]=new ix({uTextures:{value:s,type:"i32",size:t}},{isStatic:!0}),e}class d0 extends Od{constructor(e){const s=$S({name:"batch",bits:[US,KS(e),ZS]}),n=zS({name:"batch",bits:[VS,XS(e),QS]});super({glProgram:s,gpuProgram:n,resources:{batchSamplers:JS(e)}}),this.maxTextures=e}}let Kr=null;const Mx=class Nx extends wS{constructor(e){super(e),this.geometry=new NS,this.name=Nx.extension.name,this.vertexSize=6,Kr??(Kr=new d0(e.maxTextures)),this.shader=Kr}packAttributes(e,s,n,r,i){const a=i<<16|e.roundPixels&65535,o=e.transform,c=o.a,u=o.b,d=o.c,h=o.d,f=o.tx,p=o.ty,{positions:g,uvs:v}=e,b=e.color,x=e.attributeOffset,m=x+e.attributeSize;for(let y=x;y<m;y++){const w=y*2,k=g[w],_=g[w+1];s[r++]=c*k+d*_+f,s[r++]=h*_+u*k+p,s[r++]=v[w],s[r++]=v[w+1],n[r++]=b,n[r++]=a}}packQuadAttributes(e,s,n,r,i){const a=e.texture,o=e.transform,c=o.a,u=o.b,d=o.c,h=o.d,f=o.tx,p=o.ty,g=e.bounds,v=g.maxX,b=g.minX,x=g.maxY,m=g.minY,y=a.uvs,w=e.color,k=i<<16|e.roundPixels&65535;s[r+0]=c*b+d*m+f,s[r+1]=h*m+u*b+p,s[r+2]=y.x0,s[r+3]=y.y0,n[r+4]=w,n[r+5]=k,s[r+6]=c*v+d*m+f,s[r+7]=h*m+u*v+p,s[r+8]=y.x1,s[r+9]=y.y1,n[r+10]=w,n[r+11]=k,s[r+12]=c*v+d*x+f,s[r+13]=h*x+u*v+p,s[r+14]=y.x2,s[r+15]=y.y2,n[r+16]=w,n[r+17]=k,s[r+18]=c*b+d*x+f,s[r+19]=h*x+u*b+p,s[r+20]=y.x3,s[r+21]=y.y3,n[r+22]=w,n[r+23]=k}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Kr=new d0(e),this.shader=Kr)}destroy(){this.shader=null,super.destroy()}};Mx.extension={type:[Y.Batcher],name:"default"};let e_=Mx;class t_{constructor(e){this.items=Object.create(null);const{renderer:s,type:n,onUnload:r,priority:i,name:a}=e;this._renderer=s,s.gc.addResourceHash(this,"items",n,i??0),this._onUnload=r,this.name=a}add(e){return this.items[e.uid]?!1:(this.items[e.uid]=e,e.once("unload",this.remove,this),e._gcLastUsed=this._renderer.gc.now,!0)}remove(e,...s){var r;if(!this.items[e.uid])return;const n=e._gpuData[this._renderer.uid];n&&((r=this._onUnload)==null||r.call(this,e,...s),n.destroy(),e._gpuData[this._renderer.uid]=null,this.items[e.uid]=null)}removeAll(...e){Object.values(this.items).forEach(s=>s&&this.remove(s,...e))}destroy(...e){this.removeAll(...e),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function s_(t,e,s,n,r,i,a,o=null){let c=0;s*=e,r*=i;const u=o.a,d=o.b,h=o.c,f=o.d,p=o.tx,g=o.ty;for(;c<a;){const v=t[s],b=t[s+1];n[r]=u*v+h*b+p,n[r+1]=d*v+f*b+g,r+=i,s+=e,c++}}function n_(t,e,s,n){let r=0;for(e*=s;r<n;)t[e]=0,t[e+1]=0,e+=s,r++}function Ax(t,e,s,n,r){const i=e.a,a=e.b,o=e.c,c=e.d,u=e.tx,d=e.ty;s||(s=0),n||(n=2),r||(r=t.length/n-s);let h=s*n;for(let f=0;f<r;f++){const p=t[h],g=t[h+1];t[h]=i*p+o*g+u,t[h+1]=a*p+c*g+d,h+=n}}const r_=new se;class jx{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,s=e>>16|e&65280|(e&255)<<16,n=this.renderable;return n?Rg(s,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):s+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||r_}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Yi={extension:{type:Y.ShapeBuilder,name:"circle"},build(t,e){let s,n,r,i,a,o;if(t.type==="circle"){const w=t;if(a=o=w.radius,a<=0)return!1;s=w.x,n=w.y,r=i=0}else if(t.type==="ellipse"){const w=t;if(a=w.halfWidth,o=w.halfHeight,a<=0||o<=0)return!1;s=w.x,n=w.y,r=i=0}else{const w=t,k=w.width/2,_=w.height/2;s=w.x+k,n=w.y+_,a=o=Math.max(0,Math.min(w.radius,Math.min(k,_))),r=k-a,i=_-o}if(r<0||i<0)return!1;const c=Math.ceil(2.3*Math.sqrt(a+o)),u=c*8+(r?4:0)+(i?4:0);if(u===0)return!1;if(c===0)return e[0]=e[6]=s+r,e[1]=e[3]=n+i,e[2]=e[4]=s-r,e[5]=e[7]=n-i,!0;let d=0,h=c*4+(r?2:0)+2,f=h,p=u,g=r+a,v=i,b=s+g,x=s-g,m=n+v;if(e[d++]=b,e[d++]=m,e[--h]=m,e[--h]=x,i){const w=n-v;e[f++]=x,e[f++]=w,e[--p]=w,e[--p]=b}for(let w=1;w<c;w++){const k=Math.PI/2*(w/c),_=r+Math.cos(k)*a,S=i+Math.sin(k)*o,A=s+_,C=s-_,M=n+S,j=n-S;e[d++]=A,e[d++]=M,e[--h]=M,e[--h]=C,e[f++]=C,e[f++]=j,e[--p]=j,e[--p]=A}g=r,v=i+o,b=s+g,x=s-g,m=n+v;const y=n-v;return e[d++]=b,e[d++]=m,e[--p]=y,e[--p]=b,r&&(e[d++]=x,e[d++]=m,e[--p]=y,e[--p]=x),!0},triangulate(t,e,s,n,r,i){if(t.length===0)return;let a=0,o=0;for(let d=0;d<t.length;d+=2)a+=t[d],o+=t[d+1];a/=t.length/2,o/=t.length/2;let c=n;e[c*s]=a,e[c*s+1]=o;const u=c++;for(let d=0;d<t.length;d+=2)e[c*s]=t[d],e[c*s+1]=t[d+1],d>0&&(r[i++]=c,r[i++]=u,r[i++]=c-1),c++;r[i++]=u+1,r[i++]=u,r[i++]=c-1}},i_={...Yi,extension:{...Yi.extension,name:"ellipse"}},a_={...Yi,extension:{...Yi.extension,name:"roundedRectangle"}},Tx=1e-4,h0=1e-4;function o_(t){const e=t.length;if(e<6)return 1;let s=0;for(let n=0,r=t[e-2],i=t[e-1];n<e;n+=2){const a=t[n],o=t[n+1];s+=(a-r)*(o+i),r=a,i=o}return s<0?-1:1}function f0(t,e,s,n,r,i,a,o){const c=t-s*r,u=e-n*r,d=t+s*i,h=e+n*i;let f,p;a?(f=n,p=-s):(f=-n,p=s);const g=c+f,v=u+p,b=d+f,x=h+p;return o.push(g,v),o.push(b,x),2}function ln(t,e,s,n,r,i,a,o){const c=s-t,u=n-e;let d=Math.atan2(c,u),h=Math.atan2(r-t,i-e);o&&d<h?d+=Math.PI*2:!o&&d>h&&(h+=Math.PI*2);let f=d;const p=h-d,g=Math.abs(p),v=Math.sqrt(c*c+u*u),b=(15*g*Math.sqrt(v)/Math.PI>>0)+1,x=p/b;if(f+=x,o){a.push(t,e),a.push(s,n);for(let m=1,y=f;m<b;m++,y+=x)a.push(t,e),a.push(t+Math.sin(y)*v,e+Math.cos(y)*v);a.push(t,e),a.push(r,i)}else{a.push(s,n),a.push(t,e);for(let m=1,y=f;m<b;m++,y+=x)a.push(t+Math.sin(y)*v,e+Math.cos(y)*v),a.push(t,e);a.push(r,i),a.push(t,e)}return b*2}function l_(t,e,s,n,r,i){const a=Tx;if(t.length===0)return;const o=e;let c=o.alignment;if(e.alignment!==.5){let L=o_(t);c=(c-.5)*L+.5}const u=new nt(t[0],t[1]),d=new nt(t[t.length-2],t[t.length-1]),h=n,f=Math.abs(u.x-d.x)<a&&Math.abs(u.y-d.y)<a;if(h){t=t.slice(),f&&(t.pop(),t.pop(),d.set(t[t.length-2],t[t.length-1]));const L=(u.x+d.x)*.5,T=(d.y+u.y)*.5;t.unshift(L,T),t.push(L,T)}const p=r,g=t.length/2;let v=t.length;const b=p.length/2,x=o.width/2,m=x*x,y=o.miterLimit*o.miterLimit;let w=t[0],k=t[1],_=t[2],S=t[3],A=0,C=0,M=-(k-S),j=w-_,D=0,N=0,E=Math.sqrt(M*M+j*j);M/=E,j/=E,M*=x,j*=x;const O=c,B=(1-O)*2,F=O*2;h||(o.cap==="round"?v+=ln(w-M*(B-F)*.5,k-j*(B-F)*.5,w-M*B,k-j*B,w+M*F,k+j*F,p,!0)+2:o.cap==="square"&&(v+=f0(w,k,M,j,B,F,!0,p))),p.push(w-M*B,k-j*B),p.push(w+M*F,k+j*F);for(let L=1;L<g-1;++L){w=t[(L-1)*2],k=t[(L-1)*2+1],_=t[L*2],S=t[L*2+1],A=t[(L+1)*2],C=t[(L+1)*2+1],M=-(k-S),j=w-_,E=Math.sqrt(M*M+j*j),M/=E,j/=E,M*=x,j*=x,D=-(S-C),N=_-A,E=Math.sqrt(D*D+N*N),D/=E,N/=E,D*=x,N*=x;const T=_-w,R=k-S,P=_-A,$=C-S,z=T*P+R*$,V=R*P-$*T,X=V<0;if(Math.abs(V)<.001*Math.abs(z)){p.push(_-M*B,S-j*B),p.push(_+M*F,S+j*F),z>=0&&(o.join==="round"?v+=ln(_,S,_-M*B,S-j*B,_-D*B,S-N*B,p,!1)+4:v+=2,p.push(_-D*F,S-N*F),p.push(_+D*B,S+N*B));continue}const K=(-M+w)*(-j+S)-(-M+_)*(-j+k),Me=(-D+A)*(-N+S)-(-D+_)*(-N+C),re=(T*Me-P*K)/V,Qe=($*K-R*Me)/V,Ie=(re-_)*(re-_)+(Qe-S)*(Qe-S),Te=_+(re-_)*B,ns=S+(Qe-S)*B,ht=_-(re-_)*F,Ze=S-(Qe-S)*F,rs=Math.min(T*T+R*R,P*P+$*$),Dn=X?B:F,Rr=rs+Dn*Dn*m;Ie<=Rr?o.join==="bevel"||Ie/m>y?(X?(p.push(Te,ns),p.push(_+M*F,S+j*F),p.push(Te,ns),p.push(_+D*F,S+N*F)):(p.push(_-M*B,S-j*B),p.push(ht,Ze),p.push(_-D*B,S-N*B),p.push(ht,Ze)),v+=2):o.join==="round"?X?(p.push(Te,ns),p.push(_+M*F,S+j*F),v+=ln(_,S,_+M*F,S+j*F,_+D*F,S+N*F,p,!0)+4,p.push(Te,ns),p.push(_+D*F,S+N*F)):(p.push(_-M*B,S-j*B),p.push(ht,Ze),v+=ln(_,S,_-M*B,S-j*B,_-D*B,S-N*B,p,!1)+4,p.push(_-D*B,S-N*B),p.push(ht,Ze)):(p.push(Te,ns),p.push(ht,Ze)):(p.push(_-M*B,S-j*B),p.push(_+M*F,S+j*F),o.join==="round"?X?v+=ln(_,S,_+M*F,S+j*F,_+D*F,S+N*F,p,!0)+2:v+=ln(_,S,_-M*B,S-j*B,_-D*B,S-N*B,p,!1)+2:o.join==="miter"&&Ie/m<=y&&(X?(p.push(ht,Ze),p.push(ht,Ze)):(p.push(Te,ns),p.push(Te,ns)),v+=2),p.push(_-D*B,S-N*B),p.push(_+D*F,S+N*F),v+=2)}w=t[(g-2)*2],k=t[(g-2)*2+1],_=t[(g-1)*2],S=t[(g-1)*2+1],M=-(k-S),j=w-_,E=Math.sqrt(M*M+j*j),M/=E,j/=E,M*=x,j*=x,p.push(_-M*B,S-j*B),p.push(_+M*F,S+j*F),h||(o.cap==="round"?v+=ln(_-M*(B-F)*.5,S-j*(B-F)*.5,_-M*B,S-j*B,_+M*F,S+j*F,p,!1)+2:o.cap==="square"&&(v+=f0(_,S,M,j,B,F,!1,p)));const H=h0*h0;for(let L=b;L<v+b-2;++L)w=p[L*2],k=p[L*2+1],_=p[(L+1)*2],S=p[(L+1)*2+1],A=p[(L+2)*2],C=p[(L+2)*2+1],!(Math.abs(w*(S-C)+_*(C-k)+A*(k-S))<H)&&i.push(L,L+1,L+2)}function c_(t,e,s,n){const r=Tx;if(t.length===0)return;const i=t[0],a=t[1],o=t[t.length-2],c=t[t.length-1],u=e||Math.abs(i-o)<r&&Math.abs(a-c)<r,d=s,h=t.length/2,f=d.length/2;for(let p=0;p<h;p++)d.push(t[p*2]),d.push(t[p*2+1]);for(let p=0;p<h-1;p++)n.push(f+p,f+p+1);u&&n.push(f+h-1,f)}function Ex(t,e,s,n,r,i,a){const o=Uw(t,e,2);if(!o)return;for(let u=0;u<o.length;u+=3)i[a++]=o[u]+r,i[a++]=o[u+1]+r,i[a++]=o[u+2]+r;let c=r*n;for(let u=0;u<t.length;u+=2)s[c]=t[u],s[c+1]=t[u+1],c+=n}const u_=[],d_={extension:{type:Y.ShapeBuilder,name:"polygon"},build(t,e){for(let s=0;s<t.points.length;s++)e[s]=t.points[s];return!0},triangulate(t,e,s,n,r,i){Ex(t,u_,e,s,n,r,i)}},h_={extension:{type:Y.ShapeBuilder,name:"rectangle"},build(t,e){const s=t,n=s.x,r=s.y,i=s.width,a=s.height;return i>0&&a>0?(e[0]=n,e[1]=r,e[2]=n+i,e[3]=r,e[4]=n+i,e[5]=r+a,e[6]=n,e[7]=r+a,!0):!1},triangulate(t,e,s,n,r,i){let a=0;n*=s,e[n+a]=t[0],e[n+a+1]=t[1],a+=s,e[n+a]=t[2],e[n+a+1]=t[3],a+=s,e[n+a]=t[6],e[n+a+1]=t[7],a+=s,e[n+a]=t[4],e[n+a+1]=t[5],a+=s;const o=n/s;r[i++]=o,r[i++]=o+1,r[i++]=o+2,r[i++]=o+1,r[i++]=o+3,r[i++]=o+2}},f_={extension:{type:Y.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,!0},triangulate(t,e,s,n,r,i){let a=0;n*=s,e[n+a]=t[0],e[n+a+1]=t[1],a+=s,e[n+a]=t[2],e[n+a+1]=t[3],a+=s,e[n+a]=t[4],e[n+a+1]=t[5];const o=n/s;r[i++]=o,r[i++]=o+1,r[i++]=o+2}},p_=new se,m_=new ve;function g_(t,e,s,n){const r=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){const a=s.getBounds(m_);e.width&&a.pad(e.width);const{x:o,y:c}=a,u=1/a.width,d=1/a.height,h=-o*u,f=-c*d,p=r.a,g=r.b,v=r.c,b=r.d;r.a*=u,r.b*=u,r.c*=d,r.d*=d,r.tx=h*p+f*v+r.tx,r.ty=h*g+f*b+r.ty}else r.translate(e.texture.frame.x,e.texture.frame.y),r.scale(1/e.texture.source.width,1/e.texture.source.height);const i=e.texture.source.style;return!(e.fill instanceof Ps)&&i.addressMode==="clamp-to-edge"&&(i.addressMode="repeat",i.update()),n&&r.append(p_.copyFrom(n).invert()),r}const cl={};Xe.handleByMap(Y.ShapeBuilder,cl);Xe.add(h_,d_,f_,Yi,i_,a_);const x_=new ve,y_=new se;function v_(t,e){const{geometryData:s,batches:n}=e;n.length=0,s.indices.length=0,s.vertices.length=0,s.uvs.length=0;for(let r=0;r<t.instructions.length;r++){const i=t.instructions[r];if(i.action==="texture")b_(i.data,n,s);else if(i.action==="fill"||i.action==="stroke"){const a=i.action==="stroke",o=i.data.path.shapePath,c=i.data.style,u=i.data.hole;a&&u&&p0(u.shapePath,c,!0,n,s),u&&(o.shapePrimitives[o.shapePrimitives.length-1].holes=u.shapePath.shapePrimitives),p0(o,c,a,n,s)}}}function b_(t,e,s){const n=[],r=cl.rectangle,i=x_;i.x=t.dx,i.y=t.dy,i.width=t.dw,i.height=t.dh;const a=t.transform;if(!r.build(i,n))return;const{vertices:o,uvs:c,indices:u}=s,d=u.length,h=o.length/2;a&&Ax(n,a),r.triangulate(n,o,2,h,u,d);const f=t.image,p=f.uvs;c.push(p.x0,p.y0,p.x1,p.y1,p.x3,p.y3,p.x2,p.y2);const g=zt.get(jx);g.indexOffset=d,g.indexSize=u.length-d,g.attributeOffset=h,g.attributeSize=o.length/2-h,g.baseColor=t.style,g.alpha=t.alpha,g.texture=f,g.geometryData=s,e.push(g)}function p0(t,e,s,n,r){const{vertices:i,uvs:a,indices:o}=r;t.shapePrimitives.forEach(({shape:c,transform:u,holes:d})=>{const h=[],f=cl[c.type];if(!f.build(c,h))return;const p=o.length,g=i.length/2;let v="triangle-list";if(u&&Ax(h,u),s){const y=c.closePath??!0,w=e;w.pixelLine?(c_(h,y,i,o),v="line-list"):l_(h,w,!1,y,i,o)}else if(d){const y=[],w=h.slice();w_(d).forEach(_=>{y.push(w.length/2),w.push(..._)}),Ex(w,y,i,2,g,o,p)}else f.triangulate(h,i,2,g,o,p);const b=a.length/2,x=e.texture;if(x!==te.WHITE){const y=g_(y_,e,c,u);s_(i,2,g,a,b,2,i.length/2-g,y)}else n_(a,b,2,i.length/2-g);const m=zt.get(jx);m.indexOffset=p,m.indexSize=o.length-p,m.attributeOffset=g,m.attributeSize=i.length/2-g,m.baseColor=e.color,m.alpha=e.alpha,m.texture=x,m.geometryData=r,m.topology=v,n.push(m)})}function w_(t){const e=[];for(let s=0;s<t.length;s++){const n=t[s].shape,r=[];cl[n.type].build(n,r)&&e.push(r)}return e}class S_{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(e=>{zt.return(e)}),this.graphicsData&&zt.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class __{constructor(){this.instructions=new Ig}init(e){const s=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(s):this.batcher=new e_({maxTextures:s}),this.instructions.reset()}get geometry(){return Z(gb,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const $d=class Ru{constructor(e){this._renderer=e,this._managedContexts=new t_({renderer:e,type:"resource",name:"graphicsContext"})}init(e){Ru.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Ru.defaultOptions.bezierSmoothness}getContextRenderData(e){return e._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const s=!!e._gpuData[this._renderer.uid],n=e._gpuData[this._renderer.uid]||this._initContext(e);if(e.dirty||!s){s&&n.reset(),v_(e,n);const r=e.batchMode;e.customShader||r==="no-batch"?n.isBatchable=!1:r==="auto"?n.isBatchable=n.geometryData.vertices.length<400:n.isBatchable=!0,e.dirty=!1}return n}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const s=zt.get(__,{maxTextures:this._renderer.limits.maxBatchableTextures}),n=e._gpuData[this._renderer.uid],{batches:r,geometryData:i}=n;n.graphicsData=s;const a=i.vertices.length,o=i.indices.length;for(let h=0;h<r.length;h++)r[h].applyTransform=!1;const c=s.batcher;c.ensureAttributeBuffer(a),c.ensureIndexBuffer(o),c.begin();for(let h=0;h<r.length;h++){const f=r[h];c.add(f)}c.finish(s.instructions);const u=c.geometry;u.indexBuffer.setDataWithSize(c.indexBuffer,c.indexSize,!0),u.buffers[0].setDataWithSize(c.attributeBuffer.float32View,c.attributeSize,!0);const d=c.batches;for(let h=0;h<d.length;h++){const f=d[h];f.bindGroup=dS(f.textures.textures,f.textures.count,this._renderer.limits.maxBatchableTextures)}return s}_initContext(e){const s=new S_;return s.context=e,e._gpuData[this._renderer.uid]=s,this._managedContexts.add(e),s}destroy(){this._managedContexts.destroy(),this._renderer=null}};$d.extension={type:[Y.WebGLSystem,Y.WebGPUSystem,Y.CanvasSystem],name:"graphicsContext"};$d.defaultOptions={bezierSmoothness:.5};let Px=$d;const k_=8,Ga=11920929e-14,C_=1;function Rx(t,e,s,n,r,i,a,o,c,u){const h=Math.min(.99,Math.max(0,u??Px.defaultOptions.bezierSmoothness));let f=(C_-h)/1;return f*=f,M_(e,s,n,r,i,a,o,c,t,f),t}function M_(t,e,s,n,r,i,a,o,c,u){Lu(t,e,s,n,r,i,a,o,c,u,0),c.push(a,o)}function Lu(t,e,s,n,r,i,a,o,c,u,d){if(d>k_)return;const h=(t+s)/2,f=(e+n)/2,p=(s+r)/2,g=(n+i)/2,v=(r+a)/2,b=(i+o)/2,x=(h+p)/2,m=(f+g)/2,y=(p+v)/2,w=(g+b)/2,k=(x+y)/2,_=(m+w)/2;if(d>0){let S=a-t,A=o-e;const C=Math.abs((s-a)*A-(n-o)*S),M=Math.abs((r-a)*A-(i-o)*S);if(C>Ga&&M>Ga){if((C+M)*(C+M)<=u*(S*S+A*A)){c.push(k,_);return}}else if(C>Ga){if(C*C<=u*(S*S+A*A)){c.push(k,_);return}}else if(M>Ga){if(M*M<=u*(S*S+A*A)){c.push(k,_);return}}else if(S=k-(t+a)/2,A=_-(e+o)/2,S*S+A*A<=u){c.push(k,_);return}}Lu(t,e,h,f,x,m,k,_,c,u,d+1),Lu(k,_,y,w,v,b,a,o,c,u,d+1)}const N_=8,A_=11920929e-14,j_=1;function T_(t,e,s,n,r,i,a,o){const u=Math.min(.99,Math.max(0,o??Px.defaultOptions.bezierSmoothness));let d=(j_-u)/1;return d*=d,E_(e,s,n,r,i,a,t,d),t}function E_(t,e,s,n,r,i,a,o){Du(a,t,e,s,n,r,i,o,0),a.push(r,i)}function Du(t,e,s,n,r,i,a,o,c){if(c>N_)return;const u=(e+n)/2,d=(s+r)/2,h=(n+i)/2,f=(r+a)/2,p=(u+h)/2,g=(d+f)/2;let v=i-e,b=a-s;const x=Math.abs((n-i)*b-(r-a)*v);if(x>A_){if(x*x<=o*(v*v+b*b)){t.push(p,g);return}}else if(v=p-(e+i)/2,b=g-(s+a)/2,v*v+b*b<=o){t.push(p,g);return}Du(t,e,s,u,d,p,g,o,c+1),Du(t,p,g,h,f,i,a,o,c+1)}function Lx(t,e,s,n,r,i,a,o){let c=Math.abs(r-i);(!a&&r>i||a&&i>r)&&(c=2*Math.PI-c),o||(o=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(c/Math.PI)))),o=Math.max(o,3);let u=c/o,d=r;u*=a?-1:1;for(let h=0;h<o+1;h++){const f=Math.cos(d),p=Math.sin(d),g=e+f*n,v=s+p*n;t.push(g,v),d+=u}}function P_(t,e,s,n,r,i){const a=t[t.length-2],c=t[t.length-1]-s,u=a-e,d=r-s,h=n-e,f=Math.abs(c*h-u*d);if(f<1e-8||i===0){(t[t.length-2]!==e||t[t.length-1]!==s)&&t.push(e,s);return}const p=c*c+u*u,g=d*d+h*h,v=c*d+u*h,b=i*Math.sqrt(p)/f,x=i*Math.sqrt(g)/f,m=b*v/p,y=x*v/g,w=b*h+x*u,k=b*d+x*c,_=u*(x+m),S=c*(x+m),A=h*(b+y),C=d*(b+y),M=Math.atan2(S-k,_-w),j=Math.atan2(C-k,A-w);Lx(t,w+e,k+s,i,M,j,u*d>h*c)}const wi=Math.PI*2,lc={centerX:0,centerY:0,ang1:0,ang2:0},cc=({x:t,y:e},s,n,r,i,a,o,c)=>{t*=s,e*=n;const u=r*t-i*e,d=i*t+r*e;return c.x=u+a,c.y=d+o,c};function R_(t,e){const s=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=e===1.5707963267948966?.551915024494:s,r=Math.cos(t),i=Math.sin(t),a=Math.cos(t+e),o=Math.sin(t+e);return[{x:r-i*n,y:i+r*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]}const m0=(t,e,s,n)=>{const r=t*n-e*s<0?-1:1;let i=t*s+e*n;return i>1&&(i=1),i<-1&&(i=-1),r*Math.acos(i)},L_=(t,e,s,n,r,i,a,o,c,u,d,h,f)=>{const p=Math.pow(r,2),g=Math.pow(i,2),v=Math.pow(d,2),b=Math.pow(h,2);let x=p*g-p*b-g*v;x<0&&(x=0),x/=p*b+g*v,x=Math.sqrt(x)*(a===o?-1:1);const m=x*r/i*h,y=x*-i/r*d,w=u*m-c*y+(t+s)/2,k=c*m+u*y+(e+n)/2,_=(d-m)/r,S=(h-y)/i,A=(-d-m)/r,C=(-h-y)/i,M=m0(1,0,_,S);let j=m0(_,S,A,C);o===0&&j>0&&(j-=wi),o===1&&j<0&&(j+=wi),f.centerX=w,f.centerY=k,f.ang1=M,f.ang2=j};function D_(t,e,s,n,r,i,a,o=0,c=0,u=0){if(i===0||a===0)return;const d=Math.sin(o*wi/360),h=Math.cos(o*wi/360),f=h*(e-n)/2+d*(s-r)/2,p=-d*(e-n)/2+h*(s-r)/2;if(f===0&&p===0)return;i=Math.abs(i),a=Math.abs(a);const g=Math.pow(f,2)/Math.pow(i,2)+Math.pow(p,2)/Math.pow(a,2);g>1&&(i*=Math.sqrt(g),a*=Math.sqrt(g)),L_(e,s,n,r,i,a,c,u,d,h,f,p,lc);let{ang1:v,ang2:b}=lc;const{centerX:x,centerY:m}=lc;let y=Math.abs(b)/(wi/4);Math.abs(1-y)<1e-7&&(y=1);const w=Math.max(Math.ceil(y),1);b/=w;let k=t[t.length-2],_=t[t.length-1];const S={x:0,y:0};for(let A=0;A<w;A++){const C=R_(v,b),{x:M,y:j}=cc(C[0],i,a,h,d,x,m,S),{x:D,y:N}=cc(C[1],i,a,h,d,x,m,S),{x:E,y:O}=cc(C[2],i,a,h,d,x,m,S);Rx(t,k,_,M,j,D,N,E,O),k=E,_=O,v+=b}}function B_(t,e,s){const n=(a,o)=>{const c=o.x-a.x,u=o.y-a.y,d=Math.sqrt(c*c+u*u),h=c/d,f=u/d;return{len:d,nx:h,ny:f}},r=(a,o)=>{a===0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)};let i=e[e.length-1];for(let a=0;a<e.length;a++){const o=e[a%e.length],c=o.radius??s;if(c<=0){r(a,o),i=o;continue}const u=e[(a+1)%e.length],d=n(o,i),h=n(o,u);if(d.len<1e-4||h.len<1e-4){r(a,o),i=o;continue}let f=Math.asin(d.nx*h.ny-d.ny*h.nx),p=1,g=!1;d.nx*h.nx-d.ny*-h.ny<0?f<0?f=Math.PI+f:(f=Math.PI-f,p=-1,g=!0):f>0&&(p=-1,g=!0);const v=f/2;let b,x=Math.abs(Math.cos(v)*c/Math.sin(v));x>Math.min(d.len/2,h.len/2)?(x=Math.min(d.len/2,h.len/2),b=Math.abs(x*Math.sin(v)/Math.cos(v))):b=c;const m=o.x+h.nx*x+-h.ny*b*p,y=o.y+h.ny*x+h.nx*b*p,w=Math.atan2(d.ny,d.nx)+Math.PI/2*p,k=Math.atan2(h.ny,h.nx)-Math.PI/2*p;a===0&&t.moveTo(m+Math.cos(w)*b,y+Math.sin(w)*b),t.arc(m,y,b,w,k,g),i=o}}function I_(t,e,s,n){const r=(o,c)=>Math.sqrt((o.x-c.x)**2+(o.y-c.y)**2),i=(o,c,u)=>({x:o.x+(c.x-o.x)*u,y:o.y+(c.y-o.y)*u}),a=e.length;for(let o=0;o<a;o++){const c=e[(o+1)%a],u=c.radius??s;if(u<=0){o===0?t.moveTo(c.x,c.y):t.lineTo(c.x,c.y);continue}const d=e[o],h=e[(o+2)%a],f=r(d,c);let p;if(f<1e-4)p=c;else{const b=Math.min(f/2,u);p=i(c,d,b/f)}const g=r(h,c);let v;if(g<1e-4)v=c;else{const b=Math.min(g/2,u);v=i(c,h,b/g)}o===0?t.moveTo(p.x,p.y):t.lineTo(p.x,p.y),t.quadraticCurveTo(c.x,c.y,v.x,v.y,n)}}const O_=new ve;class F_{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Jt,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,s){return this.startPoly(e,s),this}lineTo(e,s){this._ensurePoly();const n=this._currentPoly.points,r=n[n.length-2],i=n[n.length-1];return(r!==e||i!==s)&&n.push(e,s),this}arc(e,s,n,r,i,a){this._ensurePoly(!1);const o=this._currentPoly.points;return Lx(o,e,s,n,r,i,a),this}arcTo(e,s,n,r,i){this._ensurePoly();const a=this._currentPoly.points;return P_(a,e,s,n,r,i),this}arcToSvg(e,s,n,r,i,a,o){const c=this._currentPoly.points;return D_(c,this._currentPoly.lastX,this._currentPoly.lastY,a,o,e,s,n,r,i),this}bezierCurveTo(e,s,n,r,i,a,o){this._ensurePoly();const c=this._currentPoly;return Rx(this._currentPoly.points,c.lastX,c.lastY,e,s,n,r,i,a,o),this}quadraticCurveTo(e,s,n,r,i){this._ensurePoly();const a=this._currentPoly;return T_(this._currentPoly.points,a.lastX,a.lastY,e,s,n,r,i),this}closePath(){return this.endPoly(!0),this}addPath(e,s){this.endPoly(),s&&!s.isIdentity()&&(e=e.clone(!0),e.transform(s));const n=this.shapePrimitives,r=n.length;for(let i=0;i<e.instructions.length;i++){const a=e.instructions[i];this[a.action](...a.data)}if(e.checkForHoles&&n.length-r>1){let i=null;for(let a=r;a<n.length;a++){const o=n[a];if(o.shape.type==="polygon"){const c=o.shape,u=i==null?void 0:i.shape;u&&u.containsPolygon(c)?(i.holes||(i.holes=[]),i.holes.push(o),n.copyWithin(a,a+1),n.length--,a--):i=o}}}return this}finish(e=!1){this.endPoly(e)}rect(e,s,n,r,i){return this.drawShape(new ve(e,s,n,r),i),this}circle(e,s,n,r){return this.drawShape(new Hd(e,s,n),r),this}poly(e,s,n){const r=new vi(e);return r.closePath=s,this.drawShape(r,n),this}regularPoly(e,s,n,r,i=0,a){r=Math.max(r|0,3);const o=-1*Math.PI/2+i,c=Math.PI*2/r,u=[];for(let d=0;d<r;d++){const h=o-d*c;u.push(e+n*Math.cos(h),s+n*Math.sin(h))}return this.poly(u,!0,a),this}roundPoly(e,s,n,r,i,a=0,o){if(r=Math.max(r|0,3),i<=0)return this.regularPoly(e,s,n,r,a);const c=n*Math.sin(Math.PI/r)-.001;i=Math.min(i,c);const u=-1*Math.PI/2+a,d=Math.PI*2/r,h=(r-2)*Math.PI/r/2;for(let f=0;f<r;f++){const p=f*d+u,g=e+n*Math.cos(p),v=s+n*Math.sin(p),b=p+Math.PI+h,x=p-Math.PI-h,m=g+i*Math.cos(b),y=v+i*Math.sin(b),w=g+i*Math.cos(x),k=v+i*Math.sin(x);f===0?this.moveTo(m,y):this.lineTo(m,y),this.quadraticCurveTo(g,v,w,k,o)}return this.closePath()}roundShape(e,s,n=!1,r){return e.length<3?this:(n?I_(this,e,s,r):B_(this,e,s),this.closePath())}filletRect(e,s,n,r,i){if(i===0)return this.rect(e,s,n,r);const a=Math.min(n,r)/2,o=Math.min(a,Math.max(-a,i)),c=e+n,u=s+r,d=o<0?-o:0,h=Math.abs(o);return this.moveTo(e,s+h).arcTo(e+d,s+d,e+h,s,h).lineTo(c-h,s).arcTo(c-d,s+d,c,s+h,h).lineTo(c,u-h).arcTo(c-d,u-d,e+n-h,u,h).lineTo(e+h,u).arcTo(e+d,u-d,e,u-h,h).closePath()}chamferRect(e,s,n,r,i,a){if(i<=0)return this.rect(e,s,n,r);const o=Math.min(i,Math.min(n,r)/2),c=e+n,u=s+r,d=[e+o,s,c-o,s,c,s+o,c,u-o,c-o,u,e+o,u,e,u-o,e,s+o];for(let h=d.length-1;h>=2;h-=2)d[h]===d[h-2]&&d[h-1]===d[h-3]&&d.splice(h-1,2);return this.poly(d,!0,a)}ellipse(e,s,n,r,i){return this.drawShape(new Gd(e,s,n,r),i),this}roundRect(e,s,n,r,i,a){return this.drawShape(new zd(e,s,n,r,i),a),this}drawShape(e,s){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:s}),this}startPoly(e,s){let n=this._currentPoly;return n&&this.endPoly(),n=new vi,n.points.push(e,s),this._currentPoly=n,this}endPoly(e=!1){const s=this._currentPoly;return s&&s.points.length>2&&(s.closePath=e,this.shapePrimitives.push({shape:s})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new vi,e)){const s=this.shapePrimitives[this.shapePrimitives.length-1];if(s){let n=s.shape.x,r=s.shape.y;if(s.transform&&!s.transform.isIdentity()){const i=s.transform,a=n;n=i.a*n+i.c*r+i.tx,r=i.b*a+i.d*r+i.ty}this._currentPoly.points.push(n,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let s=0;s<e.instructions.length;s++){const n=e.instructions[s];this[n.action](...n.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const s=this.shapePrimitives;for(let n=0;n<s.length;n++){const r=s[n],i=r.shape.getBounds(O_);r.transform?e.addRect(i,r.transform):e.addRect(i)}return e}}class Ns{constructor(e,s=!1){this.instructions=[],this.uid=je("graphicsPath"),this._dirty=!0,this.checkForHoles=s,typeof e=="string"?oS(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new F_(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,s){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,s]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,s,n,r,i){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(nt.shared);let c=0,u=0;if(!a||a.action!=="bezierCurveTo")c=o.x,u=o.y;else{c=a.data[2],u=a.data[3];const d=o.x,h=o.y;c=d+(d-c),u=h+(h-u)}return this.instructions.push({action:"bezierCurveTo",data:[c,u,e,s,n,r,i]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,s,n){const r=this.instructions[this.instructions.length-1],i=this.getLastPoint(nt.shared);let a=0,o=0;if(!r||r.action!=="quadraticCurveTo")a=i.x,o=i.y;else{a=r.data[0],o=r.data[1];const c=i.x,u=i.y;a=c+(c-a),o=u+(u-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,e,s,n]}),this._dirty=!0,this}rect(e,s,n,r,i){return this.instructions.push({action:"rect",data:[e,s,n,r,i]}),this._dirty=!0,this}circle(e,s,n,r){return this.instructions.push({action:"circle",data:[e,s,n,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,s,n,r,i,a,o){i||(i=r/2);const c=-1*Math.PI/2+a,u=n*2,d=Math.PI*2/u,h=[];for(let f=0;f<u;f++){const p=f%2?i:r,g=f*d+c;h.push(e+p*Math.cos(g),s+p*Math.sin(g))}return this.poly(h,!0,o),this}clone(e=!1){const s=new Ns;if(s.checkForHoles=this.checkForHoles,!e)s.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){const r=this.instructions[n];s.instructions.push({action:r.action,data:r.data.slice()})}return s}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const s=e.a,n=e.b,r=e.c,i=e.d,a=e.tx,o=e.ty;let c=0,u=0,d=0,h=0,f=0,p=0,g=0,v=0;for(let b=0;b<this.instructions.length;b++){const x=this.instructions[b],m=x.data;switch(x.action){case"moveTo":case"lineTo":c=m[0],u=m[1],m[0]=s*c+r*u+a,m[1]=n*c+i*u+o;break;case"bezierCurveTo":d=m[0],h=m[1],f=m[2],p=m[3],c=m[4],u=m[5],m[0]=s*d+r*h+a,m[1]=n*d+i*h+o,m[2]=s*f+r*p+a,m[3]=n*f+i*p+o,m[4]=s*c+r*u+a,m[5]=n*c+i*u+o;break;case"quadraticCurveTo":d=m[0],h=m[1],c=m[2],u=m[3],m[0]=s*d+r*h+a,m[1]=n*d+i*h+o,m[2]=s*c+r*u+a,m[3]=n*c+i*u+o;break;case"arcToSvg":c=m[5],u=m[6],g=m[0],v=m[1],m[0]=s*g+r*v,m[1]=n*g+i*v,m[5]=s*c+r*u+a,m[6]=n*c+i*u+o;break;case"circle":m[4]=Qr(m[3],e);break;case"rect":m[4]=Qr(m[4],e);break;case"ellipse":m[8]=Qr(m[8],e);break;case"roundRect":m[5]=Qr(m[5],e);break;case"addPath":m[0].transform(e);break;case"poly":m[2]=Qr(m[2],e);break;default:xe("unknown transform action",x.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let s=this.instructions.length-1,n=this.instructions[s];if(!n)return e.x=0,e.y=0,e;for(;n.action==="closePath";){if(s--,s<0)return e.x=0,e.y=0,e;n=this.instructions[s]}switch(n.action){case"moveTo":case"lineTo":e.x=n.data[0],e.y=n.data[1];break;case"quadraticCurveTo":e.x=n.data[2],e.y=n.data[3];break;case"bezierCurveTo":e.x=n.data[4],e.y=n.data[5];break;case"arc":case"arcToSvg":e.x=n.data[5],e.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(e);break}return e}}function Qr(t,e){return t?t.prepend(e):e.clone()}function Ne(t,e,s){const n=t.getAttribute(e);return n?Number(n):s}function H_(t,e){const s=t.querySelectorAll("defs");for(let n=0;n<s.length;n++){const r=s[n];for(let i=0;i<r.children.length;i++){const a=r.children[i];switch(a.nodeName.toLowerCase()){case"lineargradient":e.defs[a.id]=G_(a);break;case"radialgradient":e.defs[a.id]=z_();break}}}}function G_(t){const e=Ne(t,"x1",0),s=Ne(t,"y1",0),n=Ne(t,"x2",1),r=Ne(t,"y2",0),i=t.getAttribute("gradientUnits")||"objectBoundingBox",a=new Ps(e,s,n,r,i==="objectBoundingBox"?"local":"global");for(let o=0;o<t.children.length;o++){const c=t.children[o],u=Ne(c,"offset",0),d=Re.shared.setValue(c.getAttribute("stop-color")).toNumber();a.addColorStop(u,d)}return a}function z_(t){return xe("[SVG Parser] Radial gradients are not yet supported"),new Ps(0,0,1,0)}function g0(t){const e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const x0={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Dx(t,e){const s=t.getAttribute("style"),n={},r={},i={strokeStyle:n,fillStyle:r,useFill:!1,useStroke:!1};for(const a in x0){const o=t.getAttribute(a);o&&y0(e,i,a,o.trim())}if(s){const a=s.split(";");for(let o=0;o<a.length;o++){const c=a[o].trim(),[u,d]=c.split(":");x0[u]&&y0(e,i,u,d.trim())}}return{strokeStyle:i.useStroke?n:null,fillStyle:i.useFill?r:null,useFill:i.useFill,useStroke:i.useStroke}}function y0(t,e,s,n){switch(s){case"stroke":if(n!=="none"){if(n.startsWith("url(")){const r=g0(n);e.strokeStyle.fill=t.defs[r]}else e.strokeStyle.color=Re.shared.setValue(n).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(n);break;case"fill":if(n!=="none"){if(n.startsWith("url(")){const r=g0(n);e.fillStyle.fill=t.defs[r]}else e.fillStyle.color=Re.shared.setValue(n).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(n);break;case"stroke-opacity":e.strokeStyle.alpha=Number(n);break;case"opacity":e.fillStyle.alpha=Number(n),e.strokeStyle.alpha=Number(n);break}}function $_(t){if(t.length<=2)return!0;const e=t.map(o=>o.area).sort((o,c)=>c-o),[s,n]=e,r=e[e.length-1],i=s/n,a=n/r;return!(i>3&&a<2)}function V_(t){return t.split(/(?=[Mm])/).filter(n=>n.trim().length>0)}function U_(t){const e=t.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const s=e.map(Number),n=[],r=[];for(let d=0;d<s.length;d+=2)d+1<s.length&&(n.push(s[d]),r.push(s[d+1]));if(n.length===0||r.length===0)return 0;const i=Math.min(...n),a=Math.max(...n),o=Math.min(...r),c=Math.max(...r);return(a-i)*(c-o)}function v0(t,e){const s=new Ns(t,!1);for(const n of s.instructions)e.instructions.push(n)}function W_(t,e){if(typeof t=="string"){const a=document.createElement("div");a.innerHTML=t.trim(),t=a.querySelector("svg")}const s={context:e,defs:{},path:new Ns};H_(t,s);const n=t.children,{fillStyle:r,strokeStyle:i}=Dx(t,s);for(let a=0;a<n.length;a++){const o=n[a];o.nodeName.toLowerCase()!=="defs"&&Bx(o,s,r,i)}return e}function Bx(t,e,s,n){const r=t.children,{fillStyle:i,strokeStyle:a}=Dx(t,e);i&&s?s={...s,...i}:i&&(s=i),a&&n?n={...n,...a}:a&&(n=a);const o=!s&&!n;o&&(s={color:0});let c,u,d,h,f,p,g,v,b,x,m,y,w,k,_,S,A;switch(t.nodeName.toLowerCase()){case"path":{k=t.getAttribute("d");const C=t.getAttribute("fill-rule"),M=V_(k),j=C==="evenodd",D=M.length>1;if(j&&D){const E=M.map(B=>({path:B,area:U_(B)}));if(E.sort((B,F)=>F.area-B.area),M.length>3||!$_(E))for(let B=0;B<E.length;B++){const F=E[B],H=B===0;e.context.beginPath();const L=new Ns(void 0,!0);v0(F.path,L),e.context.path(L),H?(s&&e.context.fill(s),n&&e.context.stroke(n)):e.context.cut()}else for(let B=0;B<E.length;B++){const F=E[B],H=B%2===1;e.context.beginPath();const L=new Ns(void 0,!0);v0(F.path,L),e.context.path(L),H?e.context.cut():(s&&e.context.fill(s),n&&e.context.stroke(n))}}else{const E=C?C==="evenodd":!0;_=new Ns(k,E),e.context.path(_),s&&e.context.fill(s),n&&e.context.stroke(n)}break}case"circle":g=Ne(t,"cx",0),v=Ne(t,"cy",0),b=Ne(t,"r",0),e.context.ellipse(g,v,b,b),s&&e.context.fill(s),n&&e.context.stroke(n);break;case"rect":c=Ne(t,"x",0),u=Ne(t,"y",0),S=Ne(t,"width",0),A=Ne(t,"height",0),x=Ne(t,"rx",0),m=Ne(t,"ry",0),x||m?e.context.roundRect(c,u,S,A,x||m):e.context.rect(c,u,S,A),s&&e.context.fill(s),n&&e.context.stroke(n);break;case"ellipse":g=Ne(t,"cx",0),v=Ne(t,"cy",0),x=Ne(t,"rx",0),m=Ne(t,"ry",0),e.context.beginPath(),e.context.ellipse(g,v,x,m),s&&e.context.fill(s),n&&e.context.stroke(n);break;case"line":d=Ne(t,"x1",0),h=Ne(t,"y1",0),f=Ne(t,"x2",0),p=Ne(t,"y2",0),e.context.beginPath(),e.context.moveTo(d,h),e.context.lineTo(f,p),n&&e.context.stroke(n);break;case"polygon":w=t.getAttribute("points"),y=w.match(/-?\d+/g).map(C=>parseInt(C,10)),e.context.poly(y,!0),s&&e.context.fill(s),n&&e.context.stroke(n);break;case"polyline":w=t.getAttribute("points"),y=w.match(/-?\d+/g).map(C=>parseInt(C,10)),e.context.poly(y,!1),n&&e.context.stroke(n);break;case"g":case"svg":break;default:{xe(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}o&&(s=null);for(let C=0;C<r.length;C++)Bx(r[C],e,s,n)}function Y_(t){return Re.isColorLike(t)}function b0(t){return t instanceof ll}function w0(t){return t instanceof Ps}function X_(t){return t instanceof te}function q_(t,e,s){const n=Re.shared.setValue(e??0);return t.color=n.toNumber(),t.alpha=n.alpha===1?s.alpha:n.alpha,t.texture=te.WHITE,{...s,...t}}function K_(t,e,s){return t.texture=e,{...s,...t}}function S0(t,e,s){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...s,...t}}function _0(t,e,s){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...s,...t}}function Q_(t,e){const s={...e,...t},n=Re.shared.setValue(s.color);return s.alpha*=n.alpha,s.color=n.toNumber(),s}function wn(t,e){if(t==null)return null;const s={},n=t;return Y_(t)?q_(s,t,e):X_(t)?K_(s,t,e):b0(t)?S0(s,t,e):w0(t)?_0(s,t,e):n.fill&&b0(n.fill)?S0(n,n.fill,e):n.fill&&w0(n.fill)?_0(n,n.fill,e):Q_(n,e)}function Ho(t,e){const{width:s,alignment:n,miterLimit:r,cap:i,join:a,pixelLine:o,...c}=e,u=wn(t,c);return u?{width:s,alignment:n,miterLimit:r,cap:i,join:a,pixelLine:o,...u}:null}const Z_=new nt,k0=new se,Vd=class cs extends es{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=je("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new Ns,this._transform=new se,this._fillStyle={...cs.defaultFillStyle},this._strokeStyle={...cs.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Jt,this._boundsDirty=!0}clone(){const e=new cs;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=wn(e,cs.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Ho(e,cs.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=wn(e,cs.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=wn(e,cs.defaultStrokeStyle),this}texture(e,s,n,r,i,a){return this.instructions.push({action:"texture",data:{image:e,dx:n||0,dy:r||0,dw:i||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:s?Re.shared.setValue(s).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ns,this}fill(e,s){let n;const r=this.instructions[this.instructions.length-1];return this._tick===0&&(r==null?void 0:r.action)==="stroke"?n=r.data.path:n=this._activePath.clone(),n?(e!=null&&(s!==void 0&&typeof e=="number"&&(Z(ue,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:s}),this._fillStyle=wn(e,cs.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:s}=this._activePath.getLastPoint(nt.shared);this._activePath.clear(),this._activePath.moveTo(e,s)}stroke(e){let s;const n=this.instructions[this.instructions.length-1];return this._tick===0&&(n==null?void 0:n.action)==="fill"?s=n.data.path:s=this._activePath.clone(),s?(e!=null&&(this._strokeStyle=Ho(e,cs.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const s=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(s&&(s.action==="stroke"||s.action==="fill"))if(s.data.hole)s.data.hole.addPath(n);else{s.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,s,n,r,i,a){this._tick++;const o=this._transform;return this._activePath.arc(o.a*e+o.c*s+o.tx,o.b*e+o.d*s+o.ty,n,r,i,a),this}arcTo(e,s,n,r,i){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*e+a.c*s+a.tx,a.b*e+a.d*s+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,i),this}arcToSvg(e,s,n,r,i,a,o){this._tick++;const c=this._transform;return this._activePath.arcToSvg(e,s,n,r,i,c.a*a+c.c*o+c.tx,c.b*a+c.d*o+c.ty),this}bezierCurveTo(e,s,n,r,i,a,o){this._tick++;const c=this._transform;return this._activePath.bezierCurveTo(c.a*e+c.c*s+c.tx,c.b*e+c.d*s+c.ty,c.a*n+c.c*r+c.tx,c.b*n+c.d*r+c.ty,c.a*i+c.c*a+c.tx,c.b*i+c.d*a+c.ty,o),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,s,n,r){return this._tick++,this._activePath.ellipse(e,s,n,r,this._transform.clone()),this}circle(e,s,n){return this._tick++,this._activePath.circle(e,s,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,s){this._tick++;const n=this._transform;return this._activePath.lineTo(n.a*e+n.c*s+n.tx,n.b*e+n.d*s+n.ty),this}moveTo(e,s){this._tick++;const n=this._transform,r=this._activePath.instructions,i=n.a*e+n.c*s+n.tx,a=n.b*e+n.d*s+n.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=i,r[0].data[1]=a,this):(this._activePath.moveTo(i,a),this)}quadraticCurveTo(e,s,n,r,i){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*s+a.tx,a.b*e+a.d*s+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,i),this}rect(e,s,n,r){return this._tick++,this._activePath.rect(e,s,n,r,this._transform.clone()),this}roundRect(e,s,n,r,i){return this._tick++,this._activePath.roundRect(e,s,n,r,i,this._transform.clone()),this}poly(e,s){return this._tick++,this._activePath.poly(e,s,this._transform.clone()),this}regularPoly(e,s,n,r,i=0,a){return this._tick++,this._activePath.regularPoly(e,s,n,r,i,a),this}roundPoly(e,s,n,r,i,a){return this._tick++,this._activePath.roundPoly(e,s,n,r,i,a),this}roundShape(e,s,n,r){return this._tick++,this._activePath.roundShape(e,s,n,r),this}filletRect(e,s,n,r,i){return this._tick++,this._activePath.filletRect(e,s,n,r,i),this}chamferRect(e,s,n,r,i,a){return this._tick++,this._activePath.chamferRect(e,s,n,r,i,a),this}star(e,s,n,r,i=0,a=0){return this._tick++,this._activePath.star(e,s,n,r,i,a,this._transform.clone()),this}svg(e){return this._tick++,W_(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,s=e){return this._transform.scale(e,s),this}setTransform(e,s,n,r,i,a){return e instanceof se?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,s,n,r,i,a),this)}transform(e,s,n,r,i,a){return e instanceof se?(this._transform.append(e),this):(k0.set(e,s,n,r,i,a),this._transform.append(k0),this)}translate(e,s=e){return this._transform.translate(e,s),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let s=0;s<this.instructions.length;s++){const n=this.instructions[s],r=n.action;if(r==="fill"){const i=n.data;e.addBounds(i.path.bounds)}else if(r==="texture"){const i=n.data;e.addFrame(i.dx,i.dy,i.dx+i.dw,i.dy+i.dh,i.transform)}if(r==="stroke"){const i=n.data,a=i.style.alignment,o=i.style.width*(1-a),c=i.path.bounds;e.addFrame(c.minX-o,c.minY-o,c.maxX+o,c.maxY+o)}}return e}containsPoint(e){var r;if(!this.bounds.containsPoint(e.x,e.y))return!1;const s=this.instructions;let n=!1;for(let i=0;i<s.length;i++){const a=s[i],o=a.data,c=o.path;if(!a.action||!c)continue;const u=o.style,d=c.shapePath.shapePrimitives;for(let h=0;h<d.length;h++){const f=d[h].shape;if(!u||!f)continue;const p=d[h].transform,g=p?p.applyInverse(e,Z_):e;if(a.action==="fill")n=f.contains(g.x,g.y);else{const b=u;n=f.strokeContains(g.x,g.y,b.width,b.alignment)}const v=o.hole;if(v){const b=(r=v.shapePath)==null?void 0:r.shapePrimitives;if(b)for(let x=0;x<b.length;x++)b[x].shape.contains(g.x,g.y)&&(n=!1)}if(n)return!0}}return n}unload(){var e;this.emit("unload",this);for(const s in this._gpuData)(e=this._gpuData[s])==null||e.destroy();this._gpuData=Object.create(null)}destroy(e=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(n)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(n))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Vd.defaultFillStyle={color:16777215,alpha:1,texture:te.WHITE,matrix:null,fill:null,textureSpace:"local"};Vd.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:te.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Dt=Vd;const Ud=class Vn extends es{constructor(e={}){super(),this.uid=je("textStyle"),this._tick=0,J_(e);const s={...Vn.defaultTextStyle,...e};for(const n in s){const r=n;this[r]=s[n]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Vn.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Vn.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Dt.defaultFillStyle,...e},()=>{this._fill=wn({...this._originalFill},Dt.defaultFillStyle)})),this._fill=wn(e===0?"black":e,Dt.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Dt.defaultStrokeStyle,...e},()=>{this._stroke=Ho({...this._originalStroke},Dt.defaultStrokeStyle)})),this._stroke=Ho(e,Dt.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=Vn.defaultTextStyle;for(const s in e)this[s]=e[s]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Vn({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let s=0;s<this._filters.length;s++)e+=this._filters[s].padding;return Math.max(this._padding,e)}destroy(e=!1){var n,r,i,a;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const o=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(n=this._fill)!=null&&n.texture&&this._fill.texture.destroy(o),(r=this._originalFill)!=null&&r.texture&&this._originalFill.texture.destroy(o),(i=this._stroke)!=null&&i.texture&&this._stroke.texture.destroy(o),(a=this._originalStroke)!=null&&a.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,s){return new Proxy(e,{set:(n,r,i)=>(n[r]===i||(n[r]=i,s==null||s(r,i),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Re.isColorLike(e)||e instanceof Ps||e instanceof ll)}};Ud.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Ud.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ys=Ud;function J_(t){const e=t;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const s=ys.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??s.alpha,angle:e.dropShadowAngle??s.angle,blur:e.dropShadowBlur??s.blur,color:e.dropShadowColor??s.color,distance:e.dropShadowDistance??s.distance}}if(e.strokeThickness!==void 0){Z(ue,"strokeThickness is now a part of stroke");const s=e.stroke;let n={};if(Re.isColorLike(s))n.color=s;else if(s instanceof Ps||s instanceof ll)n.fill=s;else if(Object.hasOwnProperty.call(s,"color")||Object.hasOwnProperty.call(s,"fill"))n=s;else throw new Error("Invalid stroke value.");t.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Z(ue,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&xe("The number of fill colors must match the number of fill gradient stops.");const s=new Ps({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),n=e.fillGradientStops.slice(),r=e.fill.map(i=>Re.shared.setValue(i).toNumber());n.forEach((i,a)=>{s.addColorStop(i,r[a])}),t.fill={fill:s}}}class e2{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,s){const n=pe.get().createCanvas();n.width=e,n.height=s;const r=n.getContext("2d");return{canvas:n,context:r}}getOptimalCanvasAndContext(e,s,n=1){e=Math.ceil(e*n-1e-6),s=Math.ceil(s*n-1e-6),e=Sr(e),s=Sr(s);const r=(e<<17)+(s<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let i=this._canvasPool[r].pop();return i||(i=this._createCanvasAndContext(e,s)),i}returnCanvasAndContext(e){const s=e.canvas,{width:n,height:r}=s,i=(n<<17)+(r<<1);e.context.resetTransform(),e.context.clearRect(0,0,n,r),this._canvasPool[i].push(e)}clear(){this._canvasPool={}}}const Xi=new e2;ta.register(Xi);const C0=1e5;function Go(t,e,s,n=0){if(t.texture===te.WHITE&&!t.fill)return Re.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof ll){const r=t.fill,i=e.createPattern(r.texture.source.resource,"repeat"),a=r.transform.copyTo(se.shared);return a.scale(r.texture.frame.width,r.texture.frame.height),i.setTransform(a),i}else if(t.fill instanceof Ps){const r=t.fill,i=r.type==="linear",a=r.textureSpace==="local";let o=1,c=1;a&&s&&(o=s.width+n,c=s.height+n);let u,d=!1;if(i){const{start:h,end:f}=r;u=e.createLinearGradient(h.x*o,h.y*c,f.x*o,f.y*c),d=Math.abs(f.x-h.x)<Math.abs((f.y-h.y)*.1)}else{const{center:h,innerRadius:f,outerCenter:p,outerRadius:g}=r;u=e.createRadialGradient(h.x*o,h.y*c,f*o,p.x*o,p.y*c,g*o)}if(d&&a&&s){const h=s.lineHeight/c;for(let f=0;f<s.lines.length;f++){const p=(f*s.lineHeight+n/2)/c;r.colorStops.forEach(g=>{const v=p+g.offset*h;u.addColorStop(Math.floor(v*C0)/C0,Re.shared.setValue(g.color).toHex())})}}else r.colorStops.forEach(h=>{u.addColorStop(h.offset,Re.shared.setValue(h.color).toHex())});return u}}else{const r=e.createPattern(t.texture.source.resource,"repeat"),i=t.matrix.copyTo(se.shared);return i.scale(t.texture.frame.width,t.texture.frame.height),r.setTransform(i),r}return xe("FillStyle not recognised",t),"red"}const Ix=class Ox extends yx{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const s={...Ox.defaultOptions,...e};this._textureSize=s.textureSize,this._mipmap=s.mipmap;const n=s.style.clone();s.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=te.WHITE,n._fill.fill=null),this.applyFillAsTint=s.overrideFill;const r=n.fontSize;n.fontSize=this.baseMeasurementFontSize;const i=Oo(n);s.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/r):n.fontSize=this.baseRenderedFontSize=r,this._style=n,this._skipKerning=s.skipKerning??!1,this.resolution=s.resolution??1,this._padding=s.padding??4,s.textureStyle&&(this._textureStyle=s.textureStyle instanceof _r?s.textureStyle:new _r(s.textureStyle)),this.fontMetrics=ps.measureFont(i),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){var b,x;const s=ps.graphemeSegmenter(e).filter(m=>!this._currentChars.includes(m)).filter((m,y,w)=>w.indexOf(m)===y);if(!s.length)return;this._currentChars=[...this._currentChars,...s];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:r,context:i}=n.canvasAndContext,a=n.texture.source;const o=this._style;let c=this._currentX,u=this._currentY,d=this._currentMaxCharHeight;const h=this.baseRenderedFontSize/this.baseMeasurementFontSize,f=this._padding*h;let p=!1;const g=r.width/this.resolution,v=r.height/this.resolution;for(let m=0;m<s.length;m++){const y=s[m],w=ps.measureText(y,o,r,!1);w.lineHeight=w.height;const k=w.width*h,_=Math.ceil((o.fontStyle==="italic"?2:1)*k),S=w.height*h,A=_+f*2,C=S+f*2;if(p=!1,y!==`
`&&y!=="\r"&&y!=="	"&&y!==" "&&(p=!0,d=Math.ceil(Math.max(C,d))),c+A>g&&(u+=d,d=C,c=0,u+d>v)){a.update();const j=this._nextPage();r=j.canvasAndContext.canvas,i=j.canvasAndContext.context,a=j.texture.source,c=0,u=0,d=0}const M=k/h-(((b=o.dropShadow)==null?void 0:b.distance)??0)-(((x=o._stroke)==null?void 0:x.width)??0);if(this.chars[y]={id:y.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:M,kerning:{}},p){this._drawGlyph(i,w,c+f,u+f,h,o);const j=a.width*h,D=a.height*h,N=new ve(c/j*a.width,u/D*a.height,A/j*a.width,C/D*a.height);this.chars[y].texture=new te({source:a,frame:N}),c+=Math.ceil(A)}}a.update(),this._currentX=c,this._currentY=u,this._currentMaxCharHeight=d,this._skipKerning&&this._applyKerning(s,i)}get pageTextures(){return Z(ue,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,s){const n=this._measureCache;for(let r=0;r<e.length;r++){const i=e[r];for(let a=0;a<this._currentChars.length;a++){const o=this._currentChars[a];let c=n[i];c||(c=n[i]=s.measureText(i).width);let u=n[o];u||(u=n[o]=s.measureText(o).width);let d=s.measureText(i+o).width,h=d-(c+u);h&&(this.chars[i].kerning[o]=h),d=s.measureText(i+o).width,h=d-(c+u),h&&(this.chars[o].kerning[i]=h)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,s=Xi.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(s.context,this._style,e);const n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new te({source:new jn({resource:s.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(r.source.style=this._textureStyle);const i={canvasAndContext:s,texture:r};return this.pages[this._currentPageIndex]=i,i}_setupContext(e,s,n){s.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=Oo(s),s.fontSize=this.baseMeasurementFontSize,e.textBaseline=s.textBaseline;const r=s._stroke,i=(r==null?void 0:r.width)??0;if(r&&(e.lineWidth=i,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=Go(r,e)),s._fill&&(e.fillStyle=Go(s._fill,e)),s.dropShadow){const a=s.dropShadow,o=Re.shared.setValue(a.color).toArray(),c=a.blur*n,u=a.distance*n;e.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${a.alpha})`,e.shadowBlur=c,e.shadowOffsetX=Math.cos(a.angle)*u,e.shadowOffsetY=Math.sin(a.angle)*u}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,s,n,r,i,a){const o=s.text,c=s.fontProperties,u=a._stroke,d=((u==null?void 0:u.width)??0)*i,h=n+d/2,f=r-d/2,p=c.descent*i,g=s.lineHeight*i;let v=!1;a.stroke&&d&&(v=!0,e.strokeText(o,h,f+g-p));const{shadowBlur:b,shadowOffsetX:x,shadowOffsetY:m}=e;a._fill&&(v&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(o,h,f+g-p)),v&&(e.shadowBlur=b,e.shadowOffsetX=x,e.shadowOffsetY=m)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:s,texture:n}=this.pages[e];Xi.returnCanvasAndContext(s),n.destroy(!0)}this.pages=null}};Ix.defaultOptions={textureSize:512,style:new ys,mipmap:!0};let M0=Ix;function t2(t,e,s,n){const r={width:0,height:0,offsetY:0,scale:e.fontSize/s.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=s.baseLineOffset;let i=r.lines[0],a=null,o=!0;const c={width:0,start:0,index:0,positions:[],chars:[]},u=s.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*u,h=e.wordWrapWidth*u,f=e.lineHeight?e.lineHeight*u:s.lineHeight,p=e.wordWrap&&e.breakWords,g=x=>{const m=i.width;for(let y=0;y<c.index;y++){const w=x.positions[y];i.chars.push(x.chars[y]),i.charPositions.push(w+m)}i.width+=x.width,o=!1,c.width=0,c.index=0,c.chars.length=0},v=()=>{let x=i.chars.length-1;if(n){let m=i.chars[x];for(;m===" ";)i.width-=s.chars[m].xAdvance,m=i.chars[--x]}r.width=Math.max(r.width,i.width),i={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,r.lines.push(i),r.height+=f},b=x=>x-d>h;for(let x=0;x<t.length+1;x++){let m;const y=x===t.length;y||(m=t[x]);const w=s.chars[m]||s.chars[" "];if(/(?:\s)/.test(m)||m==="\r"||m===`
`||y){if(!o&&e.wordWrap&&b(i.width+c.width)?(v(),g(c),y||i.charPositions.push(0)):(c.start=i.width,g(c),y||i.charPositions.push(0)),m==="\r"||m===`
`)v();else if(!y){const A=w.xAdvance+(w.kerning[a]||0)+d;i.width+=A,i.spaceWidth=A,i.spacesIndex.push(i.charPositions.length),i.chars.push(m)}}else{const S=w.kerning[a]||0,A=w.xAdvance+S+d;p&&b(i.width+c.width+A)&&(g(c),v()),c.positions[c.index++]=c.width+S,c.chars.push(m),c.width+=A}a=m}return v(),e.align==="center"?s2(r):e.align==="right"?n2(r):e.align==="justify"&&r2(r),r}function s2(t){for(let e=0;e<t.lines.length;e++){const s=t.lines[e],n=t.width/2-s.width/2;for(let r=0;r<s.charPositions.length;r++)s.charPositions[r]+=n}}function n2(t){for(let e=0;e<t.lines.length;e++){const s=t.lines[e],n=t.width-s.width;for(let r=0;r<s.charPositions.length;r++)s.charPositions[r]+=n}}function r2(t){const e=t.width;for(let s=0;s<t.lines.length;s++){const n=t.lines[s];let r=0,i=n.spacesIndex[r++],a=0;const o=n.spacesIndex.length,u=(e-n.width)/o;for(let d=0;d<n.charPositions.length;d++)d===i&&(i=n.spacesIndex[r++],a+=u),n.charPositions[d]+=a}}function i2(t){if(t==="")return[];typeof t=="string"&&(t=[t]);const e=[];for(let s=0,n=t.length;s<n;s++){const r=t[s];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const i=r[0].charCodeAt(0),a=r[1].charCodeAt(0);if(a<i)throw new Error("[BitmapFont]: Invalid character range.");for(let o=i,c=a;o<=c;o++)e.push(String.fromCharCode(o))}else e.push(...Array.from(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let za=0;class a2{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=vx(1e3)}getFont(e,s){var a;let n=`${s.fontFamily}-bitmap`,r=!0;if(s._fill.fill&&!s._stroke?(n+=s._fill.fill.styleKey,r=!1):(s._stroke||s.dropShadow)&&(n=`${s.styleKey}-bitmap`,r=!1),!ge.has(n)){const o=Object.create(s);o.lineHeight=0;const c=new M0({style:o,overrideFill:r,overrideSize:!0,...this.defaultOptions});za++,za>50&&xe("BitmapText",`You have dynamically created ${za} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),c.once("destroy",()=>{za--,ge.remove(n)}),ge.set(n,c)}const i=ge.get(n);return(a=i.ensureCharacters)==null||a.call(i,e),i}getLayout(e,s,n=!0){const r=this.getFont(e,s),i=`${e}-${s.styleKey}-${n}`;if(this.measureCache.has(i))return this.measureCache.get(i);const a=ps.graphemeSegmenter(e),o=t2(a,s,r,n);return this.measureCache.set(i,o),o}measureText(e,s,n=!0){return this.getLayout(e,s,n)}install(...e){var u,d,h,f;let s=e[0];typeof s=="string"&&(s={name:s,style:e[1],chars:(u=e[2])==null?void 0:u.chars,resolution:(d=e[2])==null?void 0:d.resolution,padding:(h=e[2])==null?void 0:h.padding,skipKerning:(f=e[2])==null?void 0:f.skipKerning},Z(ue,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const n=s==null?void 0:s.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");s={...this.defaultOptions,...s};const r=s.style,i=r instanceof ys?r:new ys(r),a=s.dynamicFill??this._canUseTintForStyle(i),o=new M0({style:i,overrideFill:a,skipKerning:s.skipKerning,padding:s.padding,resolution:s.resolution,overrideSize:!1,textureStyle:s.textureStyle}),c=i2(s.chars);return o.ensureCharacters(c.join("")),ge.set(`${n}-bitmap`,o),o.once("destroy",()=>ge.remove(`${n}-bitmap`)),o}uninstall(e){const s=`${e}-bitmap`,n=ge.get(s);n&&n.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const N0=new a2;class Fx extends yx{constructor(e,s){super();const{textures:n,data:r}=e;Object.keys(r.pages).forEach(i=>{const a=r.pages[parseInt(i,10)],o=n[a.id];this.pages.push({texture:o})}),Object.keys(r.chars).forEach(i=>{const a=r.chars[i],{frame:o,source:c,rotate:u}=n[a.page],d=he.transformRectCoords(a,o,u,new ve),h=new te({frame:d,orig:new ve(0,0,a.width,a.height),source:c,rotate:u});this.chars[i]={id:i.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:h}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=s}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:s}=this.pages[e];s.destroy(!0)}this.pages=null}static install(e){N0.install(e)}static uninstall(e){N0.uninstall(e)}}const uc={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const h in e){const f=e[h].match(/^[a-z]+/gm)[0],p=e[h].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),g={};for(const v in p){const b=p[v].split("="),x=b[0],m=b[1].replace(/"/gm,""),y=parseFloat(m),w=isNaN(y)?m:y;g[x]=w}s[f].push(g)}const n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=s.info,[i]=s.common,[a]=s.distanceField??[];a&&(n.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),n.fontSize=parseInt(r.size,10),n.fontFamily=r.face,n.lineHeight=parseInt(i.lineHeight,10);const o=s.page;for(let h=0;h<o.length;h++)n.pages.push({id:parseInt(o[h].id,10)||0,file:o[h].file});const c={};n.baseLineOffset=n.lineHeight-parseInt(i.base,10);const u=s.char;for(let h=0;h<u.length;h++){const f=u[h],p=parseInt(f.id,10);let g=f.letter??f.char??String.fromCharCode(p);g==="space"&&(g=" "),c[p]=g,n.chars[g]={id:p,page:parseInt(f.page,10)||0,x:parseInt(f.x,10),y:parseInt(f.y,10),width:parseInt(f.width,10),height:parseInt(f.height,10),xOffset:parseInt(f.xoffset,10),yOffset:parseInt(f.yoffset,10),xAdvance:parseInt(f.xadvance,10),kerning:{}}}const d=s.kerning||[];for(let h=0;h<d.length;h++){const f=parseInt(d[h].first,10),p=parseInt(d[h].second,10),g=parseInt(d[h].amount,10);n.chars[c[p]].kerning[c[f]]=g}return n}},A0={test(t){const e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},s=t.getElementsByTagName("info")[0],n=t.getElementsByTagName("common")[0],r=t.getElementsByTagName("distanceField")[0];r&&(e.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});const i=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning");e.fontSize=parseInt(s.getAttribute("size"),10),e.fontFamily=s.getAttribute("face"),e.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let u=0;u<i.length;u++)e.pages.push({id:parseInt(i[u].getAttribute("id"),10)||0,file:i[u].getAttribute("file")});const c={};e.baseLineOffset=e.lineHeight-parseInt(n.getAttribute("base"),10);for(let u=0;u<a.length;u++){const d=a[u],h=parseInt(d.getAttribute("id"),10);let f=d.getAttribute("letter")??d.getAttribute("char")??String.fromCharCode(h);f==="space"&&(f=" "),c[h]=f,e.chars[f]={id:h,page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{}}}for(let u=0;u<o.length;u++){const d=parseInt(o[u].getAttribute("first"),10),h=parseInt(o[u].getAttribute("second"),10),f=parseInt(o[u].getAttribute("amount"),10);e.chars[c[h]].kerning[c[d]]=f}return e}},j0={test(t){return typeof t=="string"&&t.match(/<font(\s|>)/)?A0.test(pe.get().parseXML(t)):!1},parse(t){return A0.parse(pe.get().parseXML(t))}},o2=[".xml",".fnt"],l2={extension:{type:Y.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof Fx,getCacheableAssets(t,e){const s={};return t.forEach(n=>{s[n]=e,s[`${n}-bitmap`]=e}),s[`${e.fontFamily}-bitmap`]=e,s}},c2={extension:{type:Y.LoadParser,priority:rn.Normal},name:"loadBitmapFont",id:"bitmap-font",test(t){return o2.includes(kt.extname(t).toLowerCase())},async testParse(t){return uc.test(t)||j0.test(t)},async parse(t,e,s){const n=uc.test(t)?uc.parse(t):j0.parse(t),{src:r}=e,{pages:i}=n,a=[],o=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let h=0;h<i.length;++h){const f=i[h].file;let p=kt.join(kt.dirname(r),f);p=Cu(p,r),a.push({src:p,data:o})}const c=await s.load(a),u=a.map(h=>c[h.src]);return new Fx({data:n,textures:u},r)},async load(t,e){return await(await pe.get().fetch(t)).text()},async unload(t,e,s){await Promise.all(t.pages.map(n=>s.unload(n.texture.source._sourceOrigin))),t.destroy()}};class u2{constructor(e,s=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=s}add(e){e.forEach(s=>{this._assetList.push(s)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],s=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<s;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const d2={extension:{type:Y.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof te),getCacheableAssets:(t,e)=>{const s={};return t.forEach(n=>{e.forEach((r,i)=>{s[n+(i===0?"":i+1)]=r})}),s}};async function Hx(t){if("Image"in globalThis)return new Promise(e=>{const s=new Image;s.onload=()=>{e(!0)},s.onerror=()=>{e(!1)},s.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const h2={extension:{type:Y.DetectionParser,priority:1},test:async()=>Hx("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")},T0=["png","jpg","jpeg"],f2={extension:{type:Y.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...T0],remove:async t=>t.filter(e=>!T0.includes(e))},p2="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ul(t){return p2?!1:document.createElement("video").canPlayType(t)!==""}const m2={extension:{type:Y.DetectionParser,priority:0},test:async()=>ul("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")},g2={extension:{type:Y.DetectionParser,priority:0},test:async()=>ul("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")},x2={extension:{type:Y.DetectionParser,priority:0},test:async()=>ul("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")},y2={extension:{type:Y.DetectionParser,priority:0},test:async()=>Hx("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")},Gx=class lo{constructor(){this.loadOptions={...lo.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,s,n)=>(this._parsersValidated=!1,e[s]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,s){const n={promise:null,parser:null};return n.promise=(async()=>{var a,o;let r=null,i=null;if((s.parser||s.loadParser)&&(i=this._parserHash[s.parser||s.loadParser],s.loadParser&&xe(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),i||xe(`[Assets] specified load parser "${s.parser||s.loadParser}" not found while loading ${e}`)),!i){for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];if(u.load&&((a=u.test)!=null&&a.call(u,e,s,this))){i=u;break}}if(!i)return xe(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await i.load(e,s,this),n.parser=i;for(let c=0;c<this.parsers.length;c++){const u=this.parsers[c];u.parse&&u.parse&&await((o=u.testParse)==null?void 0:o.call(u,r,s,this))&&(r=await u.parse(r,s,this)||r,n.parser=u)}return r})(),n}async load(e,s){this._parsersValidated||this._validateParsers();const n=typeof s=="function"?{...lo.defaultOptions,...this.loadOptions,onProgress:s}:{...lo.defaultOptions,...this.loadOptions,...s||{}},{onProgress:r,onError:i,strategy:a,retryCount:o,retryDelay:c}=n;let u=0;const d={},h=Io(e),f=qt(e,v=>({alias:[v],src:v,data:{}})),p=f.reduce((v,b)=>v+(b.progressSize||1),0),g=f.map(async v=>{const b=kt.toAbsolute(v.src);d[v.src]||(await this._loadAssetWithRetry(b,v,{onProgress:r,onError:i,strategy:a,retryCount:o,retryDelay:c},d),u+=v.progressSize||1,r&&r(u/p))});return await Promise.all(g),h?d[f[0].src]:d}async unload(e){const n=qt(e,r=>({alias:[r],src:r})).map(async r=>{var o,c;const i=kt.toAbsolute(r.src),a=this.promiseCache[i];if(a){const u=await a.promise;delete this.promiseCache[i],await((c=(o=a.parser)==null?void 0:o.unload)==null?void 0:c.call(o,u,r,this))}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,s)=>(!s.name&&!s.id?xe("[Assets] parser should have an id"):(e[s.name]||e[s.id])&&xe(`[Assets] parser id conflict "${s.id}"`),e[s.name]=s,s.id&&(e[s.id]=s),e),{})}async _loadAssetWithRetry(e,s,n,r){let i=0;const{onError:a,strategy:o,retryCount:c,retryDelay:u}=n,d=h=>new Promise(f=>setTimeout(f,h));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,s)),r[s.src]=await this.promiseCache[e].promise;return}catch(h){delete this.promiseCache[e],delete r[s.src],i++;const f=o!=="retry"||i>c;if(o==="retry"&&!f){a&&a(h,s),await d(u);continue}if(o==="skip"){a&&a(h,s);return}a&&a(h,s);const p=new Error(`[Loader.load] Failed to load ${e}.
${h}`);throw h instanceof Error&&h.stack&&(p.stack=h.stack),p}}};Gx.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let v2=Gx;function Er(t,e){if(Array.isArray(e)){for(const s of e)if(t.startsWith(`data:${s}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Pr(t,e){const s=t.split("?")[0],n=kt.extname(s).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const b2=".json",w2="application/json",S2={extension:{type:Y.LoadParser,priority:rn.Low},name:"loadJson",id:"json",test(t){return Er(t,w2)||Pr(t,b2)},async load(t){return await(await pe.get().fetch(t)).json()}},_2=".txt",k2="text/plain",C2={name:"loadTxt",id:"text",extension:{type:Y.LoadParser,priority:rn.Low,name:"loadTxt"},test(t){return Er(t,k2)||Pr(t,_2)},async load(t){return await(await pe.get().fetch(t)).text()}},M2=["normal","bold","100","200","300","400","500","600","700","800","900"],N2=[".ttf",".otf",".woff",".woff2"],A2=["font/ttf","font/otf","font/woff","font/woff2"],j2=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function T2(t){const e=kt.extname(t),r=kt.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let i=r.length>0;for(const o of r)if(!o.match(j2)){i=!1;break}let a=r.join(" ");return i||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const E2=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function P2(t){return E2.test(t)?t:encodeURI(t)}const R2={extension:{type:Y.LoadParser,priority:rn.Low},name:"loadWebFont",id:"web-font",test(t){return Er(t,A2)||Pr(t,N2)},async load(t,e){var n,r,i;const s=pe.get().getFontFaceSet();if(s){const a=[],o=((n=e.data)==null?void 0:n.family)??T2(t),c=((i=(r=e.data)==null?void 0:r.weights)==null?void 0:i.filter(d=>M2.includes(d)))??["normal"],u=e.data??{};for(let d=0;d<c.length;d++){const h=c[d],f=new FontFace(o,`url(${P2(t)})`,{...u,weight:h});await f.load(),s.add(f),a.push(f)}return ge.has(`${o}-and-url`)?ge.get(`${o}-and-url`).entries.push({url:t,faces:a}):ge.set(`${o}-and-url`,{entries:[{url:t,faces:a}]}),a.length===1?a[0]:a}return xe("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){const e=Array.isArray(t)?t:[t],s=e[0].family,n=ge.get(`${s}-and-url`),r=n.entries.find(i=>i.faces.some(a=>e.indexOf(a)!==-1));r.faces=r.faces.filter(i=>e.indexOf(i)===-1),r.faces.length===0&&(n.entries=n.entries.filter(i=>i!==r)),e.forEach(i=>{pe.get().getFontFaceSet().delete(i)}),n.entries.length===0&&ge.remove(`${s}-and-url`)}};function Wd(t,e=1){var n;const s=(n=Tr.RETINA_PREFIX)==null?void 0:n.exec(t);return s?parseFloat(s[1]):e}function Yd(t,e,s){t.label=s,t._sourceOrigin=s;const n=new te({source:t,label:s}),r=()=>{delete e.promiseCache[s],ge.has(s)&&ge.remove(s)};return n.source.once("destroy",()=>{e.promiseCache[s]&&(xe("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),n.once("destroy",()=>{t.destroyed||(xe("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),n}const L2=".svg",D2="image/svg+xml",B2={extension:{type:Y.LoadParser,priority:rn.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return Er(t,D2)||Pr(t,L2)},async load(t,e,s){var n;return((n=e.data)==null?void 0:n.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?O2(t):I2(t,e,s,this.config.crossOrigin)},unload(t){t.destroy(!0)}};async function I2(t,e,s,n){var b,x,m;const r=await pe.get().fetch(t),i=pe.get().createImage();i.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await r.text())}`,i.crossOrigin=n,await i.decode();const a=((b=e.data)==null?void 0:b.width)??i.width,o=((x=e.data)==null?void 0:x.height)??i.height,c=((m=e.data)==null?void 0:m.resolution)||Wd(t),u=Math.ceil(a*c),d=Math.ceil(o*c),h=pe.get().createCanvas(u,d),f=h.getContext("2d");f.imageSmoothingEnabled=!0,f.imageSmoothingQuality="high",f.drawImage(i,0,0,a*c,o*c);const{parseAsGraphicsContext:p,...g}=e.data??{},v=new jn({resource:h,alphaMode:"premultiply-alpha-on-upload",resolution:c,...g});return Yd(v,s,t)}async function O2(t){const s=await(await pe.get().fetch(t)).text(),n=new Dt;return n.svg(s),n}const F2=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let hr=null,Bu=class{constructor(){hr||(hr=URL.createObjectURL(new Blob([F2],{type:"application/javascript"}))),this.worker=new Worker(hr)}};Bu.revokeObjectURL=function(){hr&&(URL.revokeObjectURL(hr),hr=null)};const H2=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let fr=null;class zx{constructor(){fr||(fr=URL.createObjectURL(new Blob([H2],{type:"application/javascript"}))),this.worker=new Worker(fr)}}zx.revokeObjectURL=function(){fr&&(URL.revokeObjectURL(fr),fr=null)};let E0=0,dc;class G2{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:s}=new Bu;s.addEventListener("message",n=>{s.terminate(),Bu.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,s){var n;return this._run("loadImageBitmap",[e,(n=s==null?void 0:s.data)==null?void 0:n.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){dc===void 0&&(dc=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<dc&&(this._createdWorkers++,e=new zx().worker,e.addEventListener("message",s=>{this._complete(s.data),this._returnWorker(s.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,s){await this._initWorkers();const n=new Promise((r,i)=>{this._queue.push({id:e,arguments:s,resolve:r,reject:i})});return this._next(),n}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const s=this._queue.pop(),n=s.id;this._resolveHash[E0]={resolve:s.resolve,reject:s.reject},e.postMessage({data:s.arguments,uuid:E0++,id:n})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e==null||e(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const P0=new G2,z2=[".jpeg",".jpg",".png",".webp",".avif"],$2=["image/jpeg","image/png","image/webp","image/avif"];async function V2(t,e){var r;const s=await pe.get().fetch(t);if(!s.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${s.status} ${s.statusText}`);const n=await s.blob();return((r=e==null?void 0:e.data)==null?void 0:r.alphaMode)==="premultiplied-alpha"?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}const $x={name:"loadTextures",id:"texture",extension:{type:Y.LoadParser,priority:rn.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Er(t,$2)||Pr(t,z2)},async load(t,e,s){var i;let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await P0.isImageBitmapSupported()?n=await P0.loadImageBitmap(t,e):n=await V2(t,e):n=await new Promise((a,o)=>{n=pe.get().createImage(),n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?a(n):(n.onload=()=>{a(n)},n.onerror=o)});const r=new jn({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:((i=e.data)==null?void 0:i.resolution)||Wd(t),...e.data});return Yd(r,s,t)},unload(t){t.destroy(!0)}},U2=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let hc,fc;function W2(t,e,s){s===void 0&&!e.startsWith("data:")?t.crossOrigin=X2(e):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}function Y2(t){return new Promise((e,s)=>{t.addEventListener("canplaythrough",n),t.addEventListener("error",r),t.load();function n(){i(),e()}function r(a){i(),s(a)}function i(){t.removeEventListener("canplaythrough",n),t.removeEventListener("error",r)}})}function X2(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const s=new URL(t,document.baseURI);return s.hostname!==e.hostname||s.port!==e.port||s.protocol!==e.protocol?"anonymous":""}function q2(){const t=[],e=[];for(const s of U2){const n=yi.MIME_TYPES[s.substring(1)]||`video/${s.substring(1)}`;ul(n)&&(t.push(s),e.includes(n)||e.push(n))}return{validVideoExtensions:t,validVideoMime:e}}const K2={name:"loadVideo",id:"video",extension:{type:Y.LoadParser,name:"loadVideo"},test(t){if(!hc||!fc){const{validVideoExtensions:n,validVideoMime:r}=q2();hc=n,fc=r}const e=Er(t,fc),s=Pr(t,hc);return e||s},async load(t,e,s){var c,u;const n={...yi.defaultOptions,resolution:((c=e.data)==null?void 0:c.resolution)||Wd(t),alphaMode:((u=e.data)==null?void 0:u.alphaMode)||await Yg(),...e.data},r=document.createElement("video"),i={preload:n.autoLoad!==!1?"auto":void 0,"webkit-playsinline":n.playsinline!==!1?"":void 0,playsinline:n.playsinline!==!1?"":void 0,muted:n.muted===!0?"":void 0,loop:n.loop===!0?"":void 0,autoplay:n.autoPlay!==!1?"":void 0};Object.keys(i).forEach(d=>{const h=i[d];h!==void 0&&r.setAttribute(d,h)}),n.muted===!0&&(r.muted=!0),W2(r,t,n.crossorigin);const a=document.createElement("source");let o;if(n.mime)o=n.mime;else if(t.startsWith("data:"))o=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const d=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();o=yi.MIME_TYPES[d]||`video/${d}`}return a.src=t,o&&(a.type=o),new Promise(d=>{const h=async()=>{const f=new yi({...n,resource:r});r.removeEventListener("canplay",h),e.data.preload&&await Y2(r),d(Yd(f,s,t))};n.preload&&!n.autoPlay&&r.load(),r.addEventListener("canplay",h),r.appendChild(a)})},unload(t){t.destroy(!0)}},Vx={extension:{type:Y.ResolveParser,name:"resolveTexture"},test:$x.test,parse:t=>{var e;return{resolution:parseFloat(((e=Tr.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}},Q2={extension:{type:Y.ResolveParser,priority:-2,name:"resolveJson"},test:t=>Tr.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:Vx.parse};class Z2{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Tr,this.loader=new v2,this.cache=ge,this._backgroundLoader=new u2(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var i,a;if(this._initialized){xe("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const s=((i=e.texturePreference)==null?void 0:i.resolution)??1,n=typeof s=="number"?[s]:s,r=await this._detectFormats({preferredFormats:(a=e.texturePreference)==null?void 0:a.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:n}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,s){this._initialized||await this.init();const n=Io(e),r=qt(e).map(o=>{if(typeof o!="string"){const c=this.resolver.getAlias(o);return c.some(u=>!this.resolver.hasKey(u))&&this.add(o),Array.isArray(c)?c[0]:c}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),i=this.resolver.resolve(r),a=await this._mapLoadToResolve(i,s);return n?a[r[0]]:a}addBundle(e,s){this.resolver.addBundle(e,s)}async loadBundle(e,s){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const r=this.resolver.resolveBundle(e),i={},a=Object.keys(r);let o=0;const c=[],u=()=>{s==null||s(c.reduce((h,f)=>h+f,0)/o)},d=a.map((h,f)=>{const p=r[h],g=Object.values(p),b=[...new Set(g.flat())].reduce((x,m)=>x+(m.progressSize||1),0);return c.push(0),o+=b,this._mapLoadToResolve(p,x=>{c[f]=x*b,u()}).then(x=>{i[h]=x})});return await Promise.all(d),n?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const s=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(s))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const s=this.resolver.resolveBundle(e);Object.values(s).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return ge.get(e);const s={};for(let n=0;n<e.length;n++)s[n]=ge.get(e[n]);return s}async _mapLoadToResolve(e,s){const n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const r=await this.loader.load(n,s);this._backgroundLoader.active=!0;const i={};return n.forEach(a=>{const o=r[a.src],c=[a.src];a.alias&&c.push(...a.alias),c.forEach(u=>{i[u]=o}),ge.set(c,o)}),i}async unload(e){this._initialized||await this.init();const s=qt(e).map(r=>typeof r!="string"?r.src:r),n=this.resolver.resolve(s);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=qt(e);const s=this.resolver.resolveBundle(e),n=Object.keys(s).map(r=>this._unloadFromResolved(s[r]));await Promise.all(n)}async _unloadFromResolved(e){const s=Object.values(e);s.forEach(n=>{ge.remove(n.src)}),await this.loader.unload(s)}async _detectFormats(e){let s=[];e.preferredFormats&&(s=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?s=await n.add(s):e.skipDetections||(s=await n.remove(s));return s=s.filter((n,r)=>s.indexOf(n)===r),s}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(s=>{s.config&&Object.keys(s.config).filter(n=>n in e).forEach(n=>{s.config[n]=e[n]})})}}const hs=new Z2;Xe.handleByList(Y.LoadParser,hs.loader.parsers).handleByList(Y.ResolveParser,hs.resolver.parsers).handleByList(Y.CacheParser,hs.cache.parsers).handleByList(Y.DetectionParser,hs.detections);Xe.add(d2,f2,h2,y2,m2,g2,x2,S2,C2,R2,B2,$x,K2,c2,l2,Vx,Q2);const R0={loader:Y.LoadParser,resolver:Y.ResolveParser,cache:Y.CacheParser,detection:Y.DetectionParser};Xe.handle(Y.Asset,t=>{const e=t.ref;Object.entries(R0).filter(([s])=>!!e[s]).forEach(([s,n])=>Xe.add(Object.assign(e[s],{extension:e[s].extension??n})))},t=>{const e=t.ref;Object.keys(R0).filter(s=>!!e[s]).forEach(s=>Xe.remove(e[s]))});class Fe extends Bd{constructor(e){e instanceof Dt&&(e={context:e});const{context:s,roundPixels:n,...r}=e||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",s?this.context=s:(this.context=this._ownedContext=new Dt,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=n??!1}set context(e){e!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=e,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_onTouch(e){this._gcLastUsed=e,this._context._gcLastUsed=e}_callContextMethod(e,s){return this.context[e](...s),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Fe(this._context.clone()):(this._ownedContext=null,new Fe(this._context))}lineStyle(e,s,n){Z(ue,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return e&&(r.width=e),s&&(r.color=s),n&&(r.alpha=n),this.context.strokeStyle=r,this}beginFill(e,s){Z(ue,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const n={};return e!==void 0&&(n.color=e),s!==void 0&&(n.alpha=s),this.context.fillStyle=n,this}endFill(){Z(ue,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Dt.defaultStrokeStyle.width||e.color!==Dt.defaultStrokeStyle.color||e.alpha!==Dt.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Z(ue,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Z(ue,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Z(ue,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Z(ue,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Z(ue,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Z(ue,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}class J2 extends Bd{constructor(e,s){const{text:n,resolution:r,style:i,anchor:a,width:o,height:c,roundPixels:u,...d}=e;super({...d}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=s,this.text=n??"",this.style=i,this.resolution=r??null,this.allowChildren=!1,this._anchor=new We({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=u??!1,o!==void 0&&(this.width=o),c!==void 0&&(this.height=c)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var s;e||(e={}),(s=this._style)==null||s.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,s){typeof e=="object"?(s=e.height??e.width,e=e.width):s??(s=e),e!==void 0&&this._setWidth(e,this.bounds.width),s!==void 0&&this._setHeight(s,this.bounds.height)}containsPoint(e){const s=this.bounds.width,n=this.bounds.height,r=-s*this.anchor.x;let i=0;return e.x>=r&&e.x<=r+s&&(i=-n*this.anchor.y,e.y>=i&&e.y<=i+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function ek(t,e){let s=t[0]??{};return(typeof s=="string"||t[1])&&(Z(ue,`use new ${e}({ text: "hi!", style }) instead`),s={text:s,style:t[1]}),s}let cn=null,Ss=null;function tk(t,e){cn||(cn=pe.get().createCanvas(256,128),Ss=cn.getContext("2d",{willReadFrequently:!0}),Ss.globalCompositeOperation="copy",Ss.globalAlpha=1),(cn.width<t||cn.height<e)&&(cn.width=Sr(t),cn.height=Sr(e))}function L0(t,e,s){for(let n=0,r=4*s*e;n<e;++n,r+=4)if(t[r+3]!==0)return!1;return!0}function D0(t,e,s,n,r){const i=4*e;for(let a=n,o=n*i+4*s;a<=r;++a,o+=i)if(t[o+3]!==0)return!1;return!0}function sk(...t){let e=t[0];e.canvas||(e={canvas:t[0],resolution:t[1]});const{canvas:s}=e,n=Math.min(e.resolution??1,1),r=e.width??s.width,i=e.height??s.height;let a=e.output;if(tk(r,i),!Ss)throw new TypeError("Failed to get canvas 2D context");Ss.drawImage(s,0,0,r,i,0,0,r*n,i*n);const c=Ss.getImageData(0,0,r,i).data;let u=0,d=0,h=r-1,f=i-1;for(;d<i&&L0(c,r,d);)++d;if(d===i)return ve.EMPTY;for(;L0(c,r,f);)--f;for(;D0(c,r,u,d,f);)++u;for(;D0(c,r,h,d,f);)--h;return++h,++f,Ss.globalCompositeOperation="source-over",Ss.strokeRect(u,d,h-u,f-d),Ss.globalCompositeOperation="copy",a??(a=new ve),a.set(u/n,d/n,(h-u)/n,(f-d)/n),a}const B0=new ve;class nk{getCanvasAndContext(e){const{text:s,style:n,resolution:r=1}=e,i=n._getFinalPadding(),a=ps.measureText(s||" ",n),o=Math.ceil(Math.ceil(Math.max(1,a.width)+i*2)*r),c=Math.ceil(Math.ceil(Math.max(1,a.height)+i*2)*r),u=Xi.getOptimalCanvasAndContext(o,c);this._renderTextToCanvas(s,n,i,r,u);const d=n.trim?sk({canvas:u.canvas,width:o,height:c,resolution:1,output:B0}):B0.set(0,0,o,c);return{canvasAndContext:u,frame:d}}returnCanvasAndContext(e){Xi.returnCanvasAndContext(e)}_renderTextToCanvas(e,s,n,r,i){var y,w,k,_;const{canvas:a,context:o}=i,c=Oo(s),u=ps.measureText(e||" ",s),d=u.lines,h=u.lineHeight,f=u.lineWidths,p=u.maxLineWidth,g=u.fontProperties,v=a.height;if(o.resetTransform(),o.scale(r,r),o.textBaseline=s.textBaseline,(y=s._stroke)!=null&&y.width){const S=s._stroke;o.lineWidth=S.width,o.miterLimit=S.miterLimit,o.lineJoin=S.join,o.lineCap=S.cap}o.font=c;let b,x;const m=s.dropShadow?2:1;for(let S=0;S<m;++S){const A=s.dropShadow&&S===0,C=A?Math.ceil(Math.max(1,v)+n*2):0,M=C*r;if(A){o.fillStyle="black",o.strokeStyle="black";const N=s.dropShadow,E=N.color,O=N.alpha;o.shadowColor=Re.shared.setValue(E).setAlpha(O).toRgbaString();const B=N.blur*r,F=N.distance*r;o.shadowBlur=B,o.shadowOffsetX=Math.cos(N.angle)*F,o.shadowOffsetY=Math.sin(N.angle)*F+M}else{if(o.fillStyle=s._fill?Go(s._fill,o,u,n*2):null,(w=s._stroke)!=null&&w.width){const N=s._stroke.width*.5+n*2;o.strokeStyle=Go(s._stroke,o,u,N)}o.shadowColor="black"}let j=(h-g.fontSize)/2;h-g.fontSize<0&&(j=0);const D=((k=s._stroke)==null?void 0:k.width)??0;for(let N=0;N<d.length;N++)b=D/2,x=D/2+N*h+g.ascent+j,s.align==="right"?b+=p-f[N]:s.align==="center"&&(b+=(p-f[N])/2),(_=s._stroke)!=null&&_.width&&this._drawLetterSpacing(d[N],s,i,b+n,x+n-C,!0),s._fill!==void 0&&this._drawLetterSpacing(d[N],s,i,b+n,x+n-C)}}_drawLetterSpacing(e,s,n,r,i,a=!1){const{context:o}=n,c=s.letterSpacing;let u=!1;if(ps.experimentalLetterSpacingSupported&&(ps.experimentalLetterSpacing?(o.letterSpacing=`${c}px`,o.textLetterSpacing=`${c}px`,u=!0):(o.letterSpacing="0px",o.textLetterSpacing="0px")),c===0||u){a?o.strokeText(e,r,i):o.fillText(e,r,i);return}let d=r;const h=ps.graphemeSegmenter(e);let f=o.measureText(e).width,p=0;for(let g=0;g<h.length;++g){const v=h[g];a?o.strokeText(v,d,i):o.fillText(v,d,i);let b="";for(let x=g+1;x<h.length;++x)b+=h[x];p=o.measureText(b).width,d+=f-p+c,f=p}}}const I0=new nk;class Si extends J2{constructor(...e){const s=ek(e,"Text");super(s,ys),this.renderPipeId="text",s.textureStyle&&(this.textureStyle=s.textureStyle instanceof _r?s.textureStyle:new _r(s.textureStyle))}updateBounds(){const e=this._bounds,s=this._anchor;let n=0,r=0;if(this._style.trim){const{frame:i,canvasAndContext:a}=I0.getCanvasAndContext({text:this.text,style:this._style,resolution:1});I0.returnCanvasAndContext(a),n=i.width,r=i.height}else{const i=ps.measureText(this._text,this._style);n=i.width,r=i.height}e.minX=-s._x*n,e.maxX=e.minX+n,e.minY=-s._y*r,e.maxY=e.minY+r}}Xe.add(ob,lb);const Ux={player:"./assets/characters.png",humanoid:"./assets/humanoid.png",demon:"./assets/demon.png",undead:"./assets/undead.png",beast:"./assets/beast.png",reptile:"./assets/reptile.png",elemental:"./assets/elemental.png",avian:"./assets/avian.png",misc:"./assets/misc.png",shortwep:"./assets/shortwep.png",medwep:"./assets/medwep.png",longwep:"./assets/longwep.png",shield:"./assets/shield.png",armor_items:"./assets/armor_items.png",amulet:"./assets/amulet.png",ring:"./assets/ring.png",boot:"./assets/boot.png",glove:"./assets/glove.png",hat:"./assets/hat.png",potion:"./assets/potion.png"},rk={tileSize:16},ik={cols:8},O0={Knight:{sheet:"player",row:0,col:0,scale:4}},F0={sword:{sheet:"medwep",row:0,cols:[0,1,2,3,4,5,6,7,0,1]},katana:{sheet:"medwep",row:0,cols:[2,3,4,5,6,7,0,1,2,3]},axe:{sheet:"medwep",row:1,cols:[0,1,2,3,4,5,6,7,0,1]},greataxe:{sheet:"medwep",row:1,cols:[2,3,4,5,6,7,0,1,2,3]},mace:{sheet:"medwep",row:1,cols:[6,7,0,1,2,3,4,5,6,7]},dagger:{sheet:"shortwep",rows:[0,1,2,3,4,0,1,2,3,4],cols:[0,2,4,6,0,2,4,6,0,2]},staff:{sheet:"longwep",rows:[0,1,2,3,4,5,6,0,1,2],cols:[0,2,4,6,0,2,4,6,0,2]},scythe:{sheet:"longwep",rows:[2,3,4,5,6,0,1,2,3,4],cols:[0,2,4,6,0,2,4,6,0,2]},helmet:{sheet:"hat",rows:[0,1,2,3,4,5,0,1,2,3],cols:[0,1,2,3,4,5,6,7,0,1]},armor:{sheet:"armor_items",rows:[0,1,2,3,4,5,6,7,8,0],cols:[0,1,2,3,4,5,6,7,0,1]},legs:{sheet:"armor_items",rows:[0,1,2,3,4,5,6,7,8,0],cols:[2,3,4,5,6,7,0,1,2,3]},boots:{sheet:"boot",rows:[0,1,2,0,1,2,0,1,2,0],cols:[0,1,2,3,4,5,6,7,0,1]},shield:{sheet:"shield",row:0,cols:[0,1,2,3,4,5,6,7,0,1]},gloves:{sheet:"glove",rows:[0,1,2,0,1,2,0,1,2,0],cols:[0,1,2,3,4,5,6,7,0,1]},amulet:{sheet:"amulet",rows:[0,1,2,0,1,2,0,1,2,0],cols:[0,1,2,3,4,5,6,7,0,1]},belt:{sheet:"armor_items",rows:[6,7,8,6,7,8,6,7,8,6],cols:[0,1,2,3,4,5,6,7,0,1]},ring:{sheet:"ring",rows:[0,1,0,1,0,1,0,1,0,1],cols:[0,1,2,3,4,5,6,7,0,1]},ore:{sheet:"potion",row:1,col:0},leather:{sheet:"potion",row:1,col:2},gem:{sheet:"potion",row:0,col:4},potion:{sheet:"potion",row:0,col:0}};class ak{constructor(){this.musicVolume=.5,this.sfxVolume=.7,this.masterVolume=1,this.musicMuted=!1,this.sfxMuted=!1,this.currentMusic=null,this.currentMusicTrack=null,this.audioContext=null,this.musicTracks={zoneEarly:["./assets/audio/quest_begins.mp3","./assets/audio/hero_journey.mp3","./assets/audio/secret_level.mp3"],zoneMid:["./assets/audio/dungeon_crawl.mp3","./assets/audio/hidden_treasure.mp3","./assets/audio/secret_level.mp3"],zoneLate:["./assets/audio/dark_descent.mp3","./assets/audio/hidden_treasure.mp3","./assets/audio/dungeon_crawl.mp3"],zoneEnd:["./assets/audio/dark_descent.mp3","./assets/audio/ultimate_showdown.mp3"],zonePrestige:["./assets/audio/horror_watches.mp3","./assets/audio/thing_below.mp3","./assets/audio/eyes_dark.mp3","./assets/audio/neon_nightmare.mp3","./assets/audio/creeping_dread.mp3","./assets/audio/blood_moon.mp3"],boss:["./assets/audio/boss_first.mp3","./assets/audio/first_encounter.mp3","./assets/audio/boss_incoming.mp3","./assets/audio/phase_two.mp3","./assets/audio/final_form.mp3","./assets/audio/true_power.mp3","./assets/audio/climax_battle.mp3"],prestigeBoss:["./assets/audio/blood_moon.mp3","./assets/audio/neon_nightmare.mp3","./assets/audio/eyes_dark.mp3"],victory:"./assets/audio/victory.mp3"},this.loadSettings()}init(){return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="running"}async resume(){this.audioContext&&this.audioContext.state==="suspended"&&await this.audioContext.resume()}loadSettings(){try{const e=localStorage.getItem("gear-grinder-audio");if(e){const s=JSON.parse(e);this.musicVolume=s.musicVolume??.5,this.sfxVolume=s.sfxVolume??.7,this.masterVolume=s.masterVolume??1,this.musicMuted=s.musicMuted??!1,this.sfxMuted=s.sfxMuted??!1}}catch(e){console.warn("Failed to load audio settings:",e)}}saveSettings(){try{localStorage.setItem("gear-grinder-audio",JSON.stringify({musicVolume:this.musicVolume,sfxVolume:this.sfxVolume,masterVolume:this.masterVolume,musicMuted:this.musicMuted,sfxMuted:this.sfxMuted}))}catch(e){console.warn("Failed to save audio settings:",e)}}setMusicVolume(e){this.musicVolume=Math.max(0,Math.min(1,e)),this.currentMusic&&(this.currentMusic.volume=this.getEffectiveMusicVolume()),this.saveSettings()}setSfxVolume(e){this.sfxVolume=Math.max(0,Math.min(1,e)),this.saveSettings()}setMasterVolume(e){this.masterVolume=Math.max(0,Math.min(1,e)),this.currentMusic&&(this.currentMusic.volume=this.getEffectiveMusicVolume()),this.saveSettings()}toggleMusicMute(){return this.musicMuted=!this.musicMuted,this.currentMusic&&(this.currentMusic.volume=this.getEffectiveMusicVolume()),this.saveSettings(),this.musicMuted}toggleSfxMute(){return this.sfxMuted=!this.sfxMuted,this.saveSettings(),this.sfxMuted}getEffectiveMusicVolume(){return this.musicMuted?0:this.musicVolume*this.masterVolume}getEffectiveSfxVolume(){return this.sfxMuted?0:this.sfxVolume*this.masterVolume}getMusicCategory(e,s=!1){return s?e>=40?"prestigeBoss":"boss":e>=40?"zonePrestige":e>=30?"zoneEnd":e>=20?"zoneLate":e>=10?"zoneMid":"zoneEarly"}playMusic(e="zone",s=0){let n=e;e==="zone"?n=this.getMusicCategory(s,!1):e==="boss"&&(n=this.getMusicCategory(s,!0));const r=this.musicTracks[n];if(!r)return;const i=Array.isArray(r)?r:[r],a=s%i.length,o=i[a];this.currentMusicTrack===o&&this.currentMusic&&!this.currentMusic.paused||(this.stopMusic(),this.currentMusic=new Audio(o),this.currentMusic.loop=!0,this.currentMusic.volume=this.getEffectiveMusicVolume(),this.currentMusicTrack=o,this.currentMusic.play().catch(c=>{console.log("Music autoplay blocked, will play on interaction")}))}stopMusic(e=!1){if(this.currentMusic){if(e){const s=this.currentMusic,n=setInterval(()=>{s.volume>.1?s.volume=Math.max(0,s.volume-.1):(clearInterval(n),s.pause(),s.currentTime=0)},50)}else this.currentMusic.pause(),this.currentMusic.currentTime=0;this.currentMusic=null,this.currentMusicTrack=null}}playOneShot(e){const s=this.musicTracks[e];if(!s)return;const n=new Audio(Array.isArray(s)?s[0]:s);n.volume=this.getEffectiveMusicVolume(),n.play().catch(()=>{})}playSfxHit(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.3,e.currentTime),s.gain.exponentialDecayTo=.01,s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1);const n=e.sampleRate*.1,r=e.createBuffer(1,n,e.sampleRate),i=r.getChannelData(0);for(let o=0;o<n;o++)i[o]=(Math.random()*2-1)*(1-o/n);const a=e.createBufferSource();a.buffer=r,a.connect(s),a.start()}playSfxCrit(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.4,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.2);const n=e.createOscillator();n.type="square",n.frequency.setValueAtTime(400,e.currentTime),n.frequency.exponentialRampToValueAtTime(100,e.currentTime+.15),n.connect(s),n.start(),n.stop(e.currentTime+.2)}playSfxCoin(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.2,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3);const n=e.createOscillator();n.type="sine",n.frequency.setValueAtTime(800,e.currentTime),n.frequency.setValueAtTime(1200,e.currentTime+.1),n.connect(s),n.start(),n.stop(e.currentTime+.3)}playSfxLevelUp(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.3,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.6),[523,659,784,1047].forEach((r,i)=>{const a=e.createOscillator();a.type="sine",a.frequency.setValueAtTime(r,e.currentTime+i*.1),a.connect(s),a.start(e.currentTime+i*.1),a.stop(e.currentTime+i*.1+.15)})}playSfxEnhanceSuccess(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.25,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.4);const n=e.createOscillator();n.type="triangle",n.frequency.setValueAtTime(600,e.currentTime),n.frequency.exponentialRampToValueAtTime(1200,e.currentTime+.2),n.connect(s),n.start(),n.stop(e.currentTime+.4)}playSfxEnhanceFail(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.3,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3);const n=e.createOscillator();n.type="sawtooth",n.frequency.setValueAtTime(300,e.currentTime),n.frequency.exponentialRampToValueAtTime(100,e.currentTime+.2),n.connect(s),n.start(),n.stop(e.currentTime+.3)}playSfxEnemyDeath(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.25,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.3);const n=e.createOscillator();n.type="sine",n.frequency.setValueAtTime(500,e.currentTime),n.frequency.exponentialRampToValueAtTime(80,e.currentTime+.25),n.connect(s),n.start(),n.stop(e.currentTime+.3)}playSfxBossDeath(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.4,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.8);const n=e.createOscillator();n.type="sine",n.frequency.setValueAtTime(100,e.currentTime),n.frequency.exponentialRampToValueAtTime(30,e.currentTime+.7),n.connect(s),n.start(),n.stop(e.currentTime+.8);const r=e.createGain();r.connect(e.destination),r.gain.setValueAtTime(this.getEffectiveSfxVolume()*.3,e.currentTime),r.gain.exponentialRampToValueAtTime(.01,e.currentTime+.2);const i=e.sampleRate*.2,a=e.createBuffer(1,i,e.sampleRate),o=a.getChannelData(0);for(let u=0;u<i;u++)o[u]=(Math.random()*2-1)*Math.pow(1-u/i,2);const c=e.createBufferSource();c.buffer=a,c.connect(r),c.start()}playSfxClick(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.15,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.05);const n=e.createOscillator();n.type="sine",n.frequency.setValueAtTime(1e3,e.currentTime),n.connect(s),n.start(),n.stop(e.currentTime+.05)}playSfxHeal(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.2,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.4);const n=e.createOscillator();n.type="sine",n.frequency.setValueAtTime(400,e.currentTime),n.frequency.linearRampToValueAtTime(800,e.currentTime+.2),n.frequency.linearRampToValueAtTime(600,e.currentTime+.35),n.connect(s),n.start(),n.stop(e.currentTime+.4)}playSfxDodge(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.2,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15);const n=e.sampleRate*.15,r=e.createBuffer(1,n,e.sampleRate),i=r.getChannelData(0);for(let c=0;c<n;c++){const u=c/n;i[c]=(Math.random()*2-1)*Math.sin(u*Math.PI)*.5}const a=e.createBufferSource();a.buffer=r;const o=e.createBiquadFilter();o.type="bandpass",o.frequency.setValueAtTime(2e3,e.currentTime),o.frequency.exponentialRampToValueAtTime(500,e.currentTime+.1),o.Q.value=1,a.connect(o),o.connect(s),a.start()}playSfxAwakening(){if(!this.init()||this.sfxMuted)return;this.resume();const e=this.audioContext,s=e.createGain();s.connect(e.destination),s.gain.setValueAtTime(this.getEffectiveSfxVolume()*.35,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+1),[392,523,659,784,1047,1319].forEach((r,i)=>{const a=e.createOscillator();a.type="sine",a.frequency.setValueAtTime(r,e.currentTime+i*.08);const o=e.createGain();o.gain.setValueAtTime(.5,e.currentTime+i*.08),o.gain.exponentialRampToValueAtTime(.01,e.currentTime+i*.08+.3),a.connect(o),o.connect(s),a.start(e.currentTime+i*.08),a.stop(e.currentTime+i*.08+.3)})}}const Q=new ak,pc={0:"spider_red",1:"spider_dark",2:"mushroom",3:"ape",5:"flower_blue",6:"imp",7:"pumpkin",8:"beetle_orange",10:"frog",11:"flower_pink",12:"crystal_ice",13:"rose_skull",15:"spider_shadow",16:"spider_black",17:"crow",18:"bat_dark",20:"golem_ice",21:"slime_yellow",22:"slime_face",23:"slime_blob",25:"mantis",26:"golem_stone",27:"owl",28:"hornet",30:"slime_green",31:"slime_arms",32:"wolf",33:"bat_purple",35:"hellhound",36:"dwarf",37:"pumpkin_evil",38:"bear",40:"cockatrice",42:"toad",44:"shaman"},mc={4:"crow_demon",9:"cerberus",14:"demon_lord",19:"spider_eye",24:"shadow_wolf",29:"eye_spider",34:"horned_beast",39:"dark_wolf",41:"eye_tyrant",43:"fire_fox",45:"scorpion_king"},un={};class gc{constructor(e,s,n,r,i,a,o,c=0){this.x=e,this.y=s,this.color=n,this.size=r,this.speedX=i,this.speedY=a,this.life=o,this.maxLife=o,this.gravity=c,this.alpha=1}update(){return this.x+=this.speedX,this.y+=this.speedY,this.speedY+=this.gravity,this.life--,this.alpha=Math.max(0,this.life/this.maxLife),this.life>0}}class ok{constructor(e=100){this.pool=[],this.maxSize=e}acquire(){if(this.pool.length>0){const e=this.pool.pop();return e.clear(),e.visible=!0,e}return new Fe}release(e){!e||e.destroyed||(e.visible=!1,e.clear(),this.pool.length<this.maxSize?this.pool.push(e):e.destroy())}destroy(){for(const e of this.pool)e.destroyed||e.destroy();this.pool=[]}}function Wx(){const t=I.useRef(null),e=I.useRef(null),{gameManager:s,state:n}=Ke(),[r,i]=I.useState(!1),[a,o]=I.useState({loaded:0,total:10,status:"Initializing..."}),c=I.useRef(null),u=I.useRef(null),d=I.useRef(null),h=I.useRef(null),f=I.useRef(null),p=I.useRef(null),g=I.useRef(null),v=I.useRef(null),b=I.useRef(null),x=I.useRef([]),m=I.useRef([]),y=I.useRef(new ok(100)),w=I.useRef([]),k=I.useRef({playerAttackCooldown:0,enemyHitFlash:0,playerHitFlash:0,screenShake:{x:0,y:0,intensity:0},lastZone:-1,enemyDying:!1,enemyDeathProgress:0,enemySpawning:!1,enemySpawnProgress:0}),_=I.useRef({playerX:200,enemyX:600,characterY:350,centerX:400,groundY:380,canvasWidth:800,canvasHeight:450,scaleFactor:1});I.useEffect(()=>{if(!t.current)return;const j=new xx;(async()=>{var oh;const T=t.current.clientWidth||800,R=t.current.clientHeight||600;if(await j.init({width:T,height:R,backgroundColor:657935,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,resizeTo:t.current}),!t.current)return;t.current.appendChild(j.canvas),e.current=j;const P=T,$=R,z=P/2,V=Math.min(1,$/400),X=V<1?$*.75:$-160,K=new ot;j.stage.addChild(K);const Me=new ot,re=new ot,Qe=new ot,Ie=new ot,Te=new ot;K.addChild(Me),K.addChild(re),K.addChild(Qe),K.addChild(Ie),K.addChild(Te),f.current=Te,p.current=Me,g.current=re,v.current=Qe;const ns=Math.min(200,P*.25),ht=z-ns,Ze=z+ns,rs=X-25;_.current={playerX:ht,enemyX:Ze,characterY:rs,centerX:z,groundY:X,canvasWidth:P,canvasHeight:$,scaleFactor:V};const Dn={},Rr=["player","humanoid","demon","undead","beast","reptile","elemental","avian","misc"],Xd=Object.values(pc),ay=Object.values(mc),qd=[...new Set(Xd)],Kd=[...new Set(ay)],an=Rr.length+qd.length+Kd.length+1;o({loaded:0,total:an,status:"Loading sprite sheets..."});let At=0;for(let ce=0;ce<Rr.length;ce++){const le=Rr[ce];try{o({loaded:At,total:an,status:`Loading ${le}...`});const ie=await hs.load(Ux[le]);ie.source.scaleMode="nearest",Dn[le]=ie,At++}catch(ie){console.warn(`Failed to load sprite sheet: ${le}`,ie),At++}}b.current=Dn,o({loaded:At,total:an,status:"Loading monsters..."});for(const ce of qd){const le=`./assets/monsters/${ce}.png`;try{o({loaded:At,total:an,status:`Loading ${ce}...`});const ie=await hs.load(le);ie.source.scaleMode="nearest",un[le]=ie,At++}catch(ie){console.warn(`Failed to preload monster sprite: ${le}`,ie),At++}}o({loaded:At,total:an,status:"Loading bosses..."});for(const ce of Kd){const le=`./assets/bosses/${ce}.png`;try{o({loaded:At,total:an,status:`Loading ${ce}...`});const ie=await hs.load(le);ie.source.scaleMode="nearest",un[le]=ie,At++}catch(ie){console.warn(`Failed to preload boss sprite: ${le}`,ie),At++}}o({loaded:At,total:an,status:"Creating environment..."});const oy=ce=>{const le=ce.sheet,ie=Dn[le];if(!ie)return null;const{tileSize:ee}=rk,q=new ve(ce.col*ee,ce.row*ee,ee,ee);return new te({source:ie.source,frame:q})},ly=(n==null?void 0:n.currentZone)||0;C(Me,P,$,ly);const Lr=new Fe;Lr.rect(0,X,P,70),Lr.fill({color:1710638}),Lr.rect(0,X-2,P,4),Lr.fill({color:2763342}),Me.addChild(Lr);const Dr=new Fe;Dr.setStrokeStyle({width:1,color:2763342,alpha:.3});for(let ce=0;ce<Math.ceil(P/50)+5;ce++){const le=ce*50-100;Dr.moveTo(le,X),Dr.lineTo(le+200,$),Dr.stroke()}Me.addChild(Dr);const Qd=O0.Knight,Zd=oy(Qd),is=Zd?new Qs(Zd):new Fe().rect(-8,-8,16,16).fill(3900150);is.anchor.set(.5,1),is.x=ht,is.y=rs;const Jd=Qd.scale*1.5*V;is.scale.set(-Jd,Jd),Qe.addChild(is),c.current=is,is.baseX=ht,is.baseY=rs;const sa=new Fe;sa.ellipse(ht,X-2,35*V,12*V),sa.fill({color:0,alpha:.4}),Qe.addChildAt(sa,0);const na=new Fe;na.circle(ht,rs-40*V,60*V),na.fill({color:3900150,alpha:.1}),Qe.addChildAt(na,0);const it=new Qs(te.WHITE);it.anchor.set(.5,1),it.x=Ze,it.y=rs;const dl=5*V;it.scale.set(-dl,dl),Qe.addChild(it),u.current=it,it.baseX=Ze,it.baseY=rs,it.baseScale=dl,it.scaleFactor=V;const ra=en(((oh=s.getState())==null?void 0:oh.currentZone)||0),eh=ra.isBoss?mc[ra.id]||"crow_demon":pc[ra.id]||"spider_red",th=ra.isBoss?`./assets/bosses/${eh}.png`:`./assets/monsters/${eh}.png`;un[th]&&u.current&&(u.current.texture=un[th]);const ia=new Fe;ia.ellipse(Ze,X-2,35*V,12*V),ia.fill({color:0,alpha:.4}),Qe.addChildAt(ia,0);const aa=new Fe;aa.circle(Ze,rs-40*V,80*V),aa.fill({color:15680580,alpha:0}),Qe.addChildAt(aa,0),it.aura=aa,it.shadow=ia,it.shadowX=Ze,it.auraX=Ze,it.auraY=rs-25,is.shadow=sa,is.glow=na;const sh=(ce,le,ie,ee,q=1)=>{const ae=new ot;ae.position.set(ce,le);const Ve=Math.round(36*q),on=Math.round(54*q),oa=Math.round(27*q),hl=Math.round(18*q),Br=new Fe;Br.rect(-ie/2-4,-oa,ie+8,on),Br.fill({color:0,alpha:.7}),Br.rect(-ie/2-4,-oa,ie+8,on),Br.stroke({width:Math.max(1,3*q),color:ee?3900150:15680580,alpha:.8}),ae.addChild(Br);const fl=new Fe;fl.rect(-ie/2,-hl,ie,Ve),fl.fill(2042167),ae.addChild(fl);const la=new Fe;la.rect(-ie/2,-hl,ie,Ve),la.fill(ee?3900150:15680580),ae.addChild(la),ae.fillRef=la,ae.barWidth=ie,ae.barHeight=Ve,ae.halfBar=hl,ae.isPlayer=ee,ae.barScale=q;const cy=new ys({fontFamily:"Rajdhani",fontSize:Math.max(10,Math.round(20*q)),fontWeight:"bold",fill:"#ffffff"}),ca=new Si({text:"100/100",style:cy});if(ca.anchor.set(.5),ca.y=0,ae.addChild(ca),ae.hpText=ca,q>.5){const uy=new ys({fontFamily:"Rajdhani",fontSize:Math.max(8,Math.round(14*q)),fontWeight:"bold",fill:ee?"#60a5fa":"#f87171"}),ua=new Si({text:ee?"":"",style:uy});ua.anchor.set(.5),ua.y=Math.round(-38*q),ae.addChild(ua),ae.label=ua}return ae},nh=Math.min(180,P*.22),rh=Math.min(X+40,$-30),ih=sh(ht,rh,nh,!0,V),ah=sh(Ze,rh,nh,!1,V);if(Ie.addChild(ih),Ie.addChild(ah),d.current=ih,h.current=ah,i(!0),setTimeout(()=>{const ce=s.getState();ce&&d.current&&h.current&&(Hn(d.current,ce.playerHp||100,ce.playerMaxHp||100,!0),Hn(h.current,ce.enemyHp||20,ce.enemyMaxHp||20,!1))},100),V>=.8){const ce=new ys({fontFamily:"Press Start 2P",fontSize:12,fill:"#fbbf24",dropShadow:!0,dropShadowColor:"#000000",dropShadowDistance:2}),le=new Si({text:"",style:ce});le.anchor.set(.5,0),le.x=z,le.y=15,Ie.addChild(le),Ie.zoneText=le}j.ticker.add(ce=>{const le=ce.lastTime,ie=ce.deltaTime,ee=k.current;if(ee.screenShake.intensity>0&&(K.x=(Math.random()-.5)*ee.screenShake.intensity,K.y=(Math.random()-.5)*ee.screenShake.intensity,ee.screenShake.intensity*=.9,ee.screenShake.intensity<.5&&(ee.screenShake.intensity=0,K.x=0,K.y=0)),c.current){const q=_.current,ae=Math.sin(le*.002)*.02,Ve=Math.sin(le*.003)*3*(q.scaleFactor||1),on=O0.Knight.scale*1.5*(q.scaleFactor||1);if(c.current.scale.set(-on,on*(1+ae)),c.current.y=(c.current.baseY||q.characterY)-25*(q.scaleFactor||1)+Ve,ee.playerAttackCooldown>0){ee.playerAttackCooldown-=ie;const oa=ee.playerAttackCooldown/15;c.current.x=(c.current.baseX||q.playerX)+Math.sin(oa*Math.PI)*50}else c.current.x=c.current.baseX||q.playerX}if(u.current){const q=u.current.baseScale||5;if(ee.enemyDying){ee.enemyDeathProgress+=ie*.25;const ae=Math.min(1,ee.enemyDeathProgress),Ve=q*(1-ae*.5);u.current.scale.set(-Ve,Ve),u.current.alpha=1-ae,u.current.tint=16729156,ae>=1&&(ee.enemyDying=!1,ee.enemyDeathProgress=0,ee.enemySpawning=!0,ee.enemySpawnProgress=0,u.current.rotation=0)}else if(ee.enemySpawning){ee.enemySpawnProgress+=ie*.4;const ae=Math.min(1,ee.enemySpawnProgress),Ve=q*(.8+ae*.2);u.current.scale.set(-Ve,Ve),u.current.alpha=.5+ae*.5,u.current.tint=16777215,ae>=1&&(ee.enemySpawning=!1,ee.enemySpawnProgress=0,u.current.scale.set(-q,q),u.current.alpha=1)}else{const ae=_.current,Ve=Math.sin(le*.0025+1)*.02,on=Math.sin(le*.004+1)*4*(ae.scaleFactor||1);u.current.scale.y=q*(1+Ve),u.current.y=(u.current.baseY||ae.characterY)-25*(ae.scaleFactor||1)+on,u.current.alpha=1,u.current.rotation=0,ee.enemyHitFlash>0?(ee.enemyHitFlash-=ie,u.current.tint=16737894):u.current.tint=16777215}}if(c.current&&ee.playerHitFlash>0?(ee.playerHitFlash-=ie,c.current.tint=16737894):c.current&&(c.current.tint=16777215),L(re),m.current.length<20&&Math.random()<.01&&H(),Math.floor(le/16)%10===0){const q=s.getState();if(q&&d.current){const ae=typeof q.playerHp=="number"&&!isNaN(q.playerHp)?q.playerHp:q.playerMaxHp,Ve=typeof q.playerMaxHp=="number"&&!isNaN(q.playerMaxHp)?q.playerMaxHp:100;Hn(d.current,ae,Ve,!0)}if(q&&h.current){const ae=typeof q.enemyHp=="number"&&!isNaN(q.enemyHp)?q.enemyHp:q.enemyMaxHp,Ve=typeof q.enemyMaxHp=="number"&&!isNaN(q.enemyMaxHp)?q.enemyMaxHp:20;Hn(h.current,ae,Ve,!1)}}})})();const N=s.on("floatingText",T=>{if(!e.current||!f.current)return;const R=_.current;switch(lk(e.current,f.current,T,R),T.type){case"playerDmg":Q.playSfxHit();break;case"crit":Q.playSfxCrit();break;case"enemyDmg":Q.playSfxHit();break;case"heal":Q.playSfxHeal();break;case"dodge":Q.playSfxDodge();break;case"levelup":Q.playSfxLevelUp();break}(T.type==="playerDmg"||T.type==="crit")&&(k.current.enemyHitFlash=8,k.current.screenShake.intensity=T.type==="crit"?12:6,k.current.playerAttackCooldown=15,B(R.enemyX,R.characterY-55,T.type==="crit"?16638023:16777215,T.type==="crit"?20:10)),T.type==="enemyDmg"&&(k.current.playerHitFlash=8,k.current.screenShake.intensity=4,B(R.playerX,R.characterY-55,15680580,8))}),E=s.on("lootDrop",({items:T})=>{if(!e.current||!f.current)return;const R=_.current;Q.playSfxCoin(),F(R.enemyX,R.characterY-55,30),T.forEach((P,$)=>{setTimeout(()=>{ck(e.current,f.current,P,_.current)},$*150)})}),O=s.on("enemyDeath",({isBoss:T})=>{const R=_.current;k.current.enemyDying=!0,k.current.enemyDeathProgress=0,k.current.screenShake.intensity=T?20:10,T?Q.playSfxBossDeath():Q.playSfxEnemyDeath(),B(R.enemyX,R.characterY-55,16729156,T?40:25)});function B(T,R,P,$){for(let z=0;z<$;z++){const V=Math.random()*Math.PI*2,X=2+Math.random()*4;x.current.push(new gc(T+(Math.random()-.5)*30,R+(Math.random()-.5)*30,P,3+Math.random()*4,Math.cos(V)*X,Math.sin(V)*X-2,30+Math.random()*20,.15))}}function F(T,R,P){const $=[16498468,2278750,3900150,11032055];for(let z=0;z<P;z++){const V=Math.random()*Math.PI*2,X=3+Math.random()*5;x.current.push(new gc(T,R,$[Math.floor(Math.random()*$.length)],4+Math.random()*4,Math.cos(V)*X,Math.sin(V)*X-4,40+Math.random()*30,.2))}}function H(){const T=_.current,R=[3900150,9133302,2278750,16498468];m.current.push(new gc(Math.random()*T.canvasWidth,T.canvasHeight,R[Math.floor(Math.random()*R.length)],2+Math.random()*2,(Math.random()-.5)*.5,-.5-Math.random()*.5,150+Math.random()*100,0))}function L(T){if(!T)return;const R=y.current;for(const z of w.current)T.removeChild(z),R.release(z);w.current=[];const P=50,$=30;x.current.length>P&&(x.current=x.current.slice(-P)),m.current.length>$&&(m.current=m.current.slice(-$)),x.current=x.current.filter(z=>{if(z.update()){const V=R.acquire();return V.circle(z.x,z.y,z.size*z.alpha),V.fill({color:z.color,alpha:z.alpha}),T.addChild(V),w.current.push(V),!0}return!1}),m.current=m.current.filter(z=>{if(z.update()){const V=R.acquire();return V.circle(z.x,z.y,z.size),V.fill({color:z.color,alpha:z.alpha*.5}),T.addChild(V),w.current.push(V),!0}return!1})}return()=>{N(),E(),O(),y.current&&y.current.destroy(),w.current=[],e.current&&(e.current.destroy(!0,{children:!0,texture:!0}),e.current=null)}},[]);const S=I.useRef(null);function A(j){return j<=4?`./assets/backgrounds/forest_0${Math.min(Math.floor(j/1.25)+1,4)}.png`:`./assets/backgrounds/forest_0${Math.min(j%4+1,4)}.png`}async function C(j,D=800,N=600,E=0){const O=A(E);try{const L=await hs.load(O),T=new Qs(L),R=L.width,P=L.height,$=D/R,z=N/P,V=Math.max($,z);T.scale.set(V,V),T.x=(D-R*V)/2,T.y=(N-P*V)/2,j.addChild(T),S.current=T,p.current=j}catch(L){console.warn("Failed to load background, using fallback gradient",L);const T=new Fe,R=N-70;for(let P=0;P<R;P+=2){const $=P/R,z=Math.floor(10+$*15),V=Math.floor(10+$*20),X=Math.floor(20+$*30),K=z<<16|V<<8|X;T.rect(0,P,D,2),T.fill(K)}j.addChild(T)}const B=new Fe;B.rect(0,0,D,N),B.fill({color:0,alpha:.25}),j.addChild(B);const F=new Fe;for(let L=0;L<100;L++)F.rect(0,L,D,1),F.fill({color:0,alpha:(1-L/100)*.6});const H=N-60;for(let L=0;L<60;L++)F.rect(0,H+L,D,1),F.fill({color:0,alpha:L/60*.4});for(let L=0;L<50;L++)F.rect(L,0,1,N),F.fill({color:0,alpha:(1-L/50)*.3}),F.rect(D-L,0,1,N),F.fill({color:0,alpha:(1-L/50)*.3});j.addChild(F)}async function M(j,D=800,N=600){if(!S.current)return;const E=A(j);try{const O=await hs.load(E);S.current.texture=O;const B=O.width,F=O.height,H=D/B,L=N/F,T=Math.max(H,L);S.current.scale.set(T,T),S.current.x=(D-B*T)/2,S.current.y=(N-F*T)/2}catch(O){console.warn("Failed to update background:",O)}}return I.useEffect(()=>{if(!(!n||!r)){if(d.current&&d.current.fillRef){const j=n.playerHp||100,D=n.playerMaxHp||100;Hn(d.current,j,D,!0)}if(h.current&&h.current.fillRef){const j=n.enemyHp||20,D=n.enemyMaxHp||20;Hn(h.current,j,D,!1)}}},[n==null?void 0:n.playerHp,n==null?void 0:n.playerMaxHp,n==null?void 0:n.enemyHp,n==null?void 0:n.enemyMaxHp,r]),I.useEffect(()=>{var j,D;if(!(!n||!b.current)&&(b.current,u.current)){const N=en(n.currentZone),E=N.id;let O;N.isBoss?O=`./assets/bosses/${mc[E]||"crow_demon"}.png`:O=`./assets/monsters/${pc[E]||"spider_red"}.png`,un[O]?u.current.texture=un[O]:hs.load(O).then(H=>{H.source.scaleMode="nearest",un[O]=H,u.current&&(u.current.texture=H)}).catch(H=>console.warn("Failed to load monster sprite:",O,H));const B=u.current.scaleFactor||1,F=(N.isBoss?6.5:5)*B;if(u.current.baseScale=F,u.current.scale.set(-F,F),u.current.alpha=1,N.isBoss){if(u.current.aura){const H=u.current.auraX||u.current.baseX||600,L=u.current.auraY||(u.current.baseY?u.current.baseY-40:350);u.current.aura.clear(),u.current.aura.circle(H,L,90),u.current.aura.fill({color:15680580,alpha:.15})}if(u.current.shadow){const H=u.current.shadowX||u.current.baseX||600;u.current.shadow.clear(),u.current.shadow.ellipse(H,(u.current.baseY||375)+3,45,15),u.current.shadow.fill({color:0,alpha:.5})}}else if(u.current.aura&&u.current.aura.clear(),u.current.shadow){const H=u.current.shadowX||u.current.baseX||600;u.current.shadow.clear(),u.current.shadow.ellipse(H,(u.current.baseY||375)+3,35,12),u.current.shadow.fill({color:0,alpha:.4})}(D=(j=f.current)==null?void 0:j.parent)!=null&&D.zoneText&&(f.current.parent.zoneText.text=N.name),e.current&&M(E,e.current.screen.width,e.current.screen.height)}},[n]),l.jsxs("div",{className:"w-full h-full relative",children:[l.jsx("div",{ref:t,className:"w-full h-full overflow-hidden bg-black"}),!r&&l.jsx("div",{className:"absolute inset-0 bg-slate-950 flex flex-col items-center justify-center z-10",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-6 animate-bounce",children:""}),l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Loading Game"}),l.jsx("div",{className:"w-64 h-3 bg-slate-800 rounded-full overflow-hidden mb-3",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${a.loaded/a.total*100}%`}})}),l.jsx("p",{className:"text-slate-400 text-sm",children:a.status}),l.jsxs("p",{className:"text-slate-500 text-xs mt-1",children:[a.loaded," / ",a.total]})]})})]})}function Hn(t,e,s,n){if(!t)return;const r=t.barWidth||180,i=Math.max(1,isNaN(s)||s===null||s===void 0?100:s),a=Math.max(0,isNaN(e)||e===null||e===void 0?i:e),o=Math.min(1,Math.max(0,a/i)),c=Math.max(4,r*o);t.hpText&&(t.hpText.text=`${Math.floor(a)}/${Math.floor(i)}`);let u;n?u=3900150:o>.5?u=15680580:o>.25?u=16347926:u=14427686,t.fillRef&&(t.removeChild(t.fillRef),t.fillRef.destroy());const d=t.barHeight||36,h=t.halfBar||18,f=new Fe;if(o>0){f.rect(-r/2,-h,c,d),f.fill(u);const p=Math.max(3,Math.round(10*(t.barScale||1)));f.rect(-r/2,-h,c,p),f.fill({color:16777215,alpha:.2})}t.addChildAt(f,2),t.fillRef=f}function lk(t,e,{text:s,type:n,target:r},i={}){if(!e)return;const{playerX:a=200,enemyX:o=600,characterY:c=350,scaleFactor:u=1}=i,d=n==="crit",h=n==="heal",f=n==="dodge",p=n==="playerDmg",g=n==="enemyDmg",v=n==="thorns",b=n==="silver",x=n==="silverLoss",m=n==="xp",y=n==="loot";let w="#ffffff",k=24,_=0,S=0;d?(w="#fde047",k=32,S=-10):h?(w="#4ade80",k=22,_=-60,S=20):f?(w="#67e8f9",k=20,_=50,S=-20):p?(w="#f87171",k=24,S=0):g?(w="#f87171",k=22,_=40,S=10):v?(w="#c084fc",k=18,_=-40,S=30):b?(w="#c0c0c0",k=22):x?(w="#ef4444",k=20):m?(w="#a78bfa",k=22):y&&(w="#34d399",k=24),k=Math.round(k*u),_*=u,S*=u;const A=new ys({fontFamily:"Press Start 2P",fontSize:k,fill:w,stroke:{color:"#000000",width:Math.max(1,4*u)},dropShadow:{color:"#000000",distance:Math.max(1,2*u),blur:Math.max(1,3*u),alpha:.8},padding:Math.ceil(10*u)}),C=new Si({text:s,style:A});C.anchor.set(.5);const M=r==="player"?a:o,j=c-50*u;C.x=M+_+(Math.random()-.5)*30*u,C.y=j+S+(Math.random()-.5)*15*u,e.addChild(C);let D=(d?-2.5:-1.5)*u,N=(Math.random()-.5)*.6*u,E=0;const O=d?1.5:1.2;C.scale.set(.5);const B=()=>{E++,E<10?C.scale.set(.5+E/10*(O-.5)*1.2):E<15&&C.scale.set(O*1.2-(E-10)/5*.2*O),C.x+=N,C.y+=D,D+=.025,E>120&&(C.alpha-=.025),(C.alpha<=0||E>180)&&(t.ticker.remove(B),C.destroy())};t.ticker.add(B)}function ck(t,e,{text:s,color:n},r={}){if(!e)return;const{enemyX:i=600,characterY:a=350,scaleFactor:o=1}=r,c=new ys({fontFamily:"Press Start 2P",fontSize:Math.round(18*o),fontWeight:"bold",fill:n||"#fbbf24",stroke:{color:"#000000",width:Math.max(1,4*o)},dropShadow:{color:"#000000",distance:Math.max(1,2*o),blur:Math.max(1,3*o),alpha:.9},padding:Math.ceil(10*o)}),u=new Si({text:s,style:c});u.anchor.set(.5),u.x=i,u.y=a-50*o,u.alpha=0,e.addChild(u);let d=(Math.random()-.5)*4*o,h=(-3-Math.random()*2)*o,f=0;const p=()=>{f++,f<8&&(u.alpha=f/8),u.x+=d,u.y+=h,h+=.15,d*=.98;const g=(r.characterY||350)+20;u.y>g&&(h=-h*.4,u.y=g,Math.abs(h)<.5&&(u.alpha-=.015)),f>100&&(u.alpha-=.02),(u.alpha<=0||f>200)&&(t.ticker.remove(p),u.destroy())};t.ticker.add(p)}const uk={shortwep:5,medwep:2,longwep:7,shield:1,armor_items:9,amulet:3,ring:2,boot:2,glove:1,hat:2,potion:6},$a=[1,6,12,18,24,30,36,40,44,48],os={crow:3,cerberus:9,demon:15,spider:21,shadow:27,abyss:33,behemoth:39,darkwolf:42,tyrant:45,inferno:46,scorpion:48},Va=[1,6,12,18,24,30,36,40,44,48],Gn={crow:4,cerberus:10,demon:16,spider:22,shadow:28,abyss:34,behemoth:38,darkwolf:41,tyrant:43,inferno:45,scorpion:48},H0=[1,6,12,18,24,30,36,40,44,48],G0=[1,5,10,15,20,24,28,32,35,36],z0=[37,38,39,40,41,42,43,44,45,46,47,48],$0={crow:37,cerberus:38,demon:39,spider:40,shadow:41,abyss:42,behemoth:43,darkwolf:44,tyrant:45,inferno:46,scorpion:48},V0=[1,5,10,15,20,25,30,35,40,45],U0={crow:3,cerberus:8,demon:12,spider:16,shadow:20,abyss:24,behemoth:28,darkwolf:32,tyrant:34,inferno:35,scorpion:36},W0={enhanceStone:1,blessedOrb:13,celestialShard:25,prestigeStone:37};function rr({item:t,size:e="full"}){const s=I.useMemo(()=>{if(!t)return null;const h=t.tier||0;if(t.type==="material")return{type:"individual",url:`./assets/gems/Icon${W0[t.id]||W0.enhanceStone}.png`};const f=t.bossSet,p=!!f;if(t.slot==="weapon"){const x=t.weaponType||"sword";return x==="sword"||x==="katana"||x==="greataxe"?{type:"individual",url:`./assets/swords/Icon${p&&Gn[f]?Gn[f]:Va[Math.min(h,Va.length-1)]}.png`}:x==="mace"?{type:"individual",url:`./assets/maces/Icon${p&&os[f]?os[f]:H0[Math.min(h,H0.length-1)]}.png`}:x==="staff"?{type:"individual",url:`./assets/staffs/Icon${p&&os[f]?os[f]:$a[Math.min(h,$a.length-1)]}.png`}:x==="dagger"?{type:"individual",url:`./assets/swords/Icon${p&&Gn[f]?Gn[f]:Math.min(h*5+2,48)}.png`}:x==="scythe"?{type:"individual",url:`./assets/staffs/Icon${p&&os[f]?os[f]:Math.min(h*5+3,48)}.png`}:{type:"individual",url:`./assets/swords/Icon${p&&Gn[f]?Gn[f]:Va[Math.min(h,Va.length-1)]}.png`}}const g=p&&os[f]?os[f]:$a[Math.min(h,$a.length-1)];if(t.slot==="helmet")return{type:"individual",url:`./assets/helmets/Icon${g}.png`};if(t.slot==="armor")return{type:"individual",url:`./assets/armor/Icon${g}.png`};if(t.slot==="legs")return{type:"individual",url:`./assets/trousers/Icon${g}.png`};if(t.slot==="boots")return{type:"individual",url:`./assets/boots/Icon${g}.png`};if(t.slot==="gloves")return{type:"individual",url:`./assets/gloves/Icon${g}.png`};if(t.slot==="shield")return{type:"individual",url:`./assets/shields/Icon${p&&U0[f]?U0[f]:G0[Math.min(h,G0.length-1)]}.png`};if(t.slot==="amulet")return{type:"individual",url:`./assets/amulets/Icon${p&&$0[f]?$0[f]:z0[Math.min(h,z0.length-1)]}.png`};if(t.slot==="belt")return{type:"individual",url:`./assets/belts/Icon${p&&os[f]?os[f]:V0[Math.min(h,V0.length-1)]}.png`};let v=t.weaponType||t.slot||"sword";return{type:"sprite",spriteData:F0[v]||F0.sword}},[t==null?void 0:t.id,t==null?void 0:t.slot,t==null?void 0:t.weaponType,t==null?void 0:t.tier,t==null?void 0:t.type,t==null?void 0:t.bossSet]);if(!t||!s)return null;const n=e==="sm"?"p-0":"p-1";if(s.type==="procedural")return l.jsx("div",{className:`w-full h-full ${n} flex items-center justify-center`,children:l.jsx("img",{src:s.url,alt:t.name||"Item",className:"w-full h-full object-contain",style:{imageRendering:"pixelated"}})});if(s.type==="individual")return l.jsx("div",{className:`w-full h-full ${n} flex items-center justify-center`,children:l.jsx("img",{src:s.url,alt:t.name||"Item",className:"w-full h-full object-contain",style:{imageRendering:"pixelated"}})});const{cols:r}=ik,{spriteData:i}=s,a=i.sheet||"medwep",o=Ux[a],c=uk[a]||2,u=i.col/(r-1)*100,d=c>1?i.row/(c-1)*100:0;return l.jsx("div",{className:`w-full h-full ${n} flex items-center justify-center`,children:l.jsx("div",{className:"w-full h-full bg-no-repeat",style:{backgroundImage:`url(${o})`,backgroundSize:`${r*100}% ${c*100}%`,backgroundPosition:`${u}% ${d}%`,imageRendering:"pixelated"}})})}const dk=5,hk={weapon:"Weapon",helmet:"Head",armor:"Chest",legs:"Legs",boots:"Feet",belt:"Belt",shield:"Shield",gloves:"Hands",amulet:"Neck"};function fk({onClose:t}){const{state:e,gameManager:s}=Ke(),[n,r]=I.useState(e.equipmentPresets||[]),[i,a]=I.useState(null),[o,c]=I.useState("");I.useEffect(()=>{const p=g=>{g.key==="Escape"&&(i!==null?a(null):t())};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[t,i]);const u=p=>{const g=e.gear||{},v={};for(const[m,y]of Object.entries(g))y&&(v[m]={slot:y.slot,name:y.name,tier:y.tier,plus:y.plus||0,bossSet:y.bossSet||null,isBossItem:y.isBossItem||!1,fingerprint:`${y.name}_${y.tier}_${y.plus||0}_${y.bossSet||"none"}`});const b={name:o||`Preset ${p+1}`,gear:v,savedAt:Date.now()},x=[...n];x[p]=b,r(x),s.setState(m=>({...m,equipmentPresets:x})),a(null),c("")},d=p=>{!p||!p.gear||(s.setState(g=>{const v={...g};let b={...g.gear},x=[...g.inventory];for(const[m,y]of Object.entries(b))y&&(x.push({...y,id:Date.now()+Math.random()}),b[m]=null);for(const[m,y]of Object.entries(p.gear)){const w=x.findIndex(k=>k.slot!==m?!1:`${k.name}_${k.tier}_${k.plus||0}_${k.bossSet||"none"}`===y.fingerprint||k.name===y.name&&k.tier===y.tier);if(w>=0){const k=x[w];b[m]={...k},delete b[m].count,x.splice(w,1)}}return v.gear=b,v.inventory=x,v}),s.emit("floatingText",{text:`Loaded: ${p.name}`,type:"heal",target:"player"}))},h=p=>{const g=[...n];g[p]=null,r(g),s.setState(v=>({...v,equipmentPresets:g}))},f=p=>{if(!p)return"Empty";const g=Object.values(p).filter(Boolean);return g.length===0?"Empty":`${g.length} items`};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:t,children:l.jsxs("div",{className:"bg-slate-800 rounded-xl border-2 border-slate-700 p-6 max-w-lg w-full mx-4 shadow-2xl",onClick:p=>p.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Equipment Presets"}),l.jsx("p",{className:"text-sm text-slate-400",children:"Save and load equipment configurations"})]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors p-1",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:dk}).map((p,g)=>{const v=n[g],b=i===g;return l.jsx("div",{className:`p-3 rounded-lg border-2 transition-all ${v?"bg-slate-700/50 border-slate-600/50":"bg-slate-900/50 border-slate-700/30 border-dashed"}`,children:b?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:o,onChange:x=>c(x.target.value),placeholder:`Preset ${g+1}`,className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-600 rounded text-sm text-white placeholder-slate-500 focus:outline-none focus:border-blue-500",autoFocus:!0,maxLength:20}),l.jsx("button",{onClick:()=>u(g),className:"px-3 py-2 bg-green-600 hover:bg-green-500 text-white rounded text-sm font-medium transition-colors",children:"Save"}),l.jsx("button",{onClick:()=>{a(null),c("")},className:"px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded text-sm font-medium transition-colors",children:"Cancel"})]}):v?l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-white",children:v.name}),l.jsxs("span",{className:"text-xs text-slate-400",children:["(",f(v.gear),")"]})]}),l.jsx("div",{className:"flex gap-1 mt-2",children:Hi.slice(0,6).map(x=>{const m=v.gear[x],y=m?we[m.tier]:null,w=m!=null&&m.bossSet?Bt[m.bossSet]:null;return l.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center text-[8px] ${m?"bg-slate-600":"bg-slate-800"}`,style:{borderWidth:"2px",borderColor:(w==null?void 0:w.color)||(y==null?void 0:y.color)||"#374151"},title:m?`${m.name}${m.plus>0?` +${m.plus}`:""}`:hk[x],children:m?m.plus>0?`+${m.plus}`:"x":"-"},x)})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>d(v),className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-500 text-white rounded text-xs font-medium transition-colors",children:"Load"}),l.jsx("button",{onClick:()=>{a(g),c(v.name)},className:"px-3 py-1.5 bg-slate-600 hover:bg-slate-500 text-white rounded text-xs font-medium transition-colors",children:"Update"}),l.jsx("button",{onClick:()=>h(g),className:"px-3 py-1.5 bg-red-600/50 hover:bg-red-600 text-white rounded text-xs font-medium transition-colors",children:"X"})]})]}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"text-slate-500 text-sm",children:["Empty Slot ",g+1]}),l.jsx("button",{onClick:()=>{a(g),c("")},className:"px-3 py-1.5 bg-green-600/50 hover:bg-green-600 text-white rounded text-xs font-medium transition-colors",children:"Save Current"})]})},g)})}),l.jsx("div",{className:"mt-4 pt-3 border-t border-slate-700/50 text-center",children:l.jsx("p",{className:"text-xs text-slate-500",children:"Presets save your currently equipped gear. Loading will swap with inventory."})})]})})}function Ln(){const[t,e]=I.useState(()=>{if(typeof window>"u")return{isMobile:!1,isPortrait:!0,isLandscape:!1,width:1024,height:768};const s=window.innerWidth,n=window.innerHeight;return{isMobile:s<768,isPortrait:n>s,isLandscape:s>n,width:s,height:n}});return I.useEffect(()=>{const s=()=>{const r=window.innerWidth,i=window.innerHeight;e({isMobile:r<768,isPortrait:i>r,isLandscape:r>i,width:r,height:i})};window.addEventListener("resize",s),window.addEventListener("orientationchange",s);const n=()=>{setTimeout(s,100)};return window.addEventListener("orientationchange",n),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s),window.removeEventListener("orientationchange",n)}},[]),t}function pk(){const{isMobile:t,isPortrait:e}=Ln();return t&&e}function xc(t){if(!t)return{dmg:0,hp:0,armor:0};const e=we[t.tier]||we[0],s=il[t.slot]||{baseDmg:0,baseHp:0,baseArmor:0};let n=s;if(t.slot==="weapon"&&t.weaponType){const o=Rn.find(c=>c.id===t.weaponType)||jr.find(c=>c.id===t.weaponType);o&&(n={...s,...o})}const r=e.statMult||1,i=t.isBossItem&&t.statBonus?t.statBonus:1,a=wr(t.plus||0,t.tier);return{dmg:Math.floor((n.baseDmg||0)*r*i)+(a.dmgBonus||0),hp:Math.floor((n.baseHp||0)*r*i)+(a.hpBonus||0),armor:Math.floor((n.baseArmor||0)*r*i)+(a.armorBonus||0)}}const Y0={weapon:"Weapon",helmet:"Head",armor:"Chest",legs:"Legs",boots:"Feet",belt:"Belt",shield:"Shield",gloves:"Hands",amulet:"Neck"},X0=["weapon","helmet","armor","legs","boots","belt","shield","gloves","amulet"];function mk(t,e,s){if(!t||e==="none")return t;const n=[...t];switch(e){case"slot":n.sort((r,i)=>{const a=X0.indexOf(r.slot)-X0.indexOf(i.slot);return a!==0?a:(i.tier||0)-(r.tier||0)});break;case"tier":n.sort((r,i)=>{const a=(i.tier||0)-(r.tier||0);return a!==0?a:Rt(i,s)-Rt(r,s)});break;case"score":n.sort((r,i)=>Rt(i,s)-Rt(r,s));break}return n}function Iu({onHover:t}){const{state:e,gameManager:s}=Ke(),[n,r]=I.useState(new Set),[i,a]=I.useState(!1),{isMobile:o}=Ln(),c=I.useRef(null),u=mk(e.inventory,e.inventorySort||"none",e.stats);I.useCallback(C=>{c.current=setTimeout(()=>{navigator.vibrate&&navigator.vibrate(50),r(M=>{const j=new Set(M);return j.has(C)?j.delete(C):j.add(C),j})},500)},[]),I.useCallback(()=>{c.current&&(clearTimeout(c.current),c.current=null)},[]);const d=()=>{let C={...e.gear},M=[...e.inventory],j=0;const D=e.stats;for(const N of Hi){const E=M.filter(L=>L.slot===N);if(E.length===0)continue;const O=E.reduce((L,T)=>Rt(T,D)>Rt(L,D)?T:L,E[0]),B=C[N],F=Rt(B,D);Rt(O,D)>F&&(M=M.filter(L=>L.id!==O.id),B&&M.push(B),C[N]=O,j++)}j>0&&(s.setState(N=>({...N,gear:C,inventory:M})),s.emit("floatingText",{text:`EQUIPPED ${j}!`,type:"heal",target:"player"}))},h=C=>{r(M=>{const j=new Set(M);return j.has(C)?j.delete(C):j.add(C),j})},f=()=>{if(n.size===0)return;let C=0,M=0;const j=e.inventory.filter(N=>n.has(N.id));for(const N of j){const E=Lo(N);C+=E.gold,M+=E.enhanceStone}const D=e.inventory.filter(N=>!n.has(N.id));s.setState(N=>({...N,inventory:D,gold:(N.gold||0)+C,enhanceStone:(N.enhanceStone||0)+M})),r(new Set),s.emit("floatingText",{text:`+${C}g`,type:"heal",target:"player"})},p=()=>{if(e.inventory.length===0)return;let C=0,M=0;for(const j of e.inventory){const D=Lo(j);C+=D.gold,M+=D.enhanceStone}s.setState(j=>({...j,inventory:[],gold:(j.gold||0)+C,enhanceStone:(j.enhanceStone||0)+M})),r(new Set),s.emit("floatingText",{text:`+${C}g`,type:"heal",target:"player"})},g=C=>{let M={...e.gear};const j=M[C.slot];let D=xg(e.inventory,C.id);const N={...C};delete N.count,M[C.slot]=N,j&&(D=Gi(D,{...j,id:Date.now()})),s.setState(E=>({...E,gear:M,inventory:D}))},v=C=>{C&&s.setState(M=>({...M,gear:{...M.gear,[C.slot]:null},inventory:Gi(M.inventory,{...C,id:Date.now()})}))},b=()=>{s.setState(C=>({...C,autoSalvage:!C.autoSalvage}))},x=C=>{s.setState(M=>({...M,autoSalvageTier:C}))},m=()=>{s.setState(C=>({...C,autoSalvageKeepEffects:!C.autoSalvageKeepEffects}))},y=e.autoSalvageTier??-1,w=e.autoSalvageKeepEffects??!0,k=({slot:C,className:M=""})=>{const j=e.gear[C],D=j?we[j.tier]:null,N=j!=null&&j.bossSet?Bt[j.bossSet]:null,E=(j==null?void 0:j.plus)>0?Lt(j.plus):null,O=()=>j?N?{borderColor:N.color,boxShadow:`inset 0 0 12px ${N.color}40, 0 0 8px ${N.color}20`}:D&&j.tier>0?{borderColor:D.color,boxShadow:`inset 0 0 8px ${D.color}30`}:{}:{};return l.jsx("div",{className:`relative bg-slate-900/80 border-2 border-slate-700/60 rounded-lg cursor-pointer
                    hover:border-blue-500/70 hover:bg-slate-800/60 transition-all active:scale-95 ${M}
                    ${o?"w-14 h-14":"w-20 h-20"}`,style:O(),onClick:()=>j&&v(j),onMouseEnter:B=>!o&&t&&j&&t(j,{x:B.clientX,y:B.clientY}),onMouseLeave:()=>!o&&t&&t(null),children:j?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-1",children:l.jsx(rr,{item:j})}),j.plus>0&&E&&l.jsxs("div",{className:"absolute -top-2 -right-2 px-1.5 py-0.5 text-xs font-bold rounded flex items-center border-2 border-black/50 z-10",style:{backgroundColor:E.bgColor,color:E.color,boxShadow:`${E.glow}, 0 2px 4px rgba(0,0,0,0.5)`,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:[E.icon&&l.jsx("span",{className:"text-[10px] mr-0.5",children:E.icon}),"+",j.plus]}),N&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1.5 rounded-b",style:{backgroundColor:N.color}})]}):l.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:l.jsx("span",{className:"text-[10px] text-slate-600 font-medium uppercase",children:Y0[C]})})})},S=(()=>{const C={};return Object.values(e.gear).forEach(M=>{M!=null&&M.bossSet&&(C[M.bossSet]=(C[M.bossSet]||0)+1)}),C})(),A=({slot:C})=>{const M=e.gear[C];if(!M)return l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-800/40 rounded border border-slate-700/40",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-700/50 rounded flex items-center justify-center",children:l.jsx("span",{className:"text-[8px] text-slate-500 uppercase",children:Y0[C]})}),l.jsx("span",{className:"text-xs text-slate-500 italic",children:"Empty"})]});const j=we[M.tier],D=xc(M);M.bossSet&&(Bt[M.bossSet]||ms[M.bossSet]);const N=M.plus>0?Lt(M.plus):null,E=M.effects||[];return l.jsx("div",{className:"bg-slate-800/60 rounded border border-slate-700/60 overflow-hidden",style:{borderColor:(j==null?void 0:j.color)+"60"},onClick:()=>v(M),children:l.jsxs("div",{className:"flex items-center gap-2 p-1.5",children:[l.jsx("div",{className:"w-8 h-8 flex-shrink-0",children:l.jsx(rr,{item:M,size:"sm"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"text-[11px] font-bold truncate",style:{color:j==null?void 0:j.color},children:[M.name,N&&l.jsxs("span",{className:"ml-1 text-[9px]",style:{color:N.color},children:["+",M.plus]})]}),l.jsxs("div",{className:"flex gap-1 text-[9px]",children:[D.dmg>0&&l.jsxs("span",{className:"text-red-400",children:["+",D.dmg," DMG"]}),D.hp>0&&l.jsxs("span",{className:"text-green-400",children:["+",D.hp," HP"]}),D.armor>0&&l.jsxs("span",{className:"text-blue-400",children:["+",D.armor," ARM"]})]})]}),E.length>0&&l.jsx("div",{className:"text-[8px] text-purple-400",children:E.map(O=>O.name).join(", ")})]})})};return l.jsxs("div",{className:"h-full flex flex-col gap-2",children:[l.jsxs("div",{className:"game-panel",onMouseLeave:()=>t&&t(null),children:[l.jsxs("div",{className:"game-panel-header flex justify-between items-center",children:[l.jsx("span",{className:"text-sm",children:"Equipment"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>a(!0),className:"px-2 py-1 text-xs bg-blue-600/40 hover:bg-blue-600/60 text-blue-300 rounded transition-colors",children:"PRESETS"}),l.jsx("button",{onClick:d,className:"px-2 py-1 text-xs bg-green-600/40 hover:bg-green-600/60 text-green-300 rounded transition-colors",children:"EQUIP BEST"})]})]}),o?l.jsxs("div",{className:"p-2 space-y-1 max-h-48 overflow-y-auto",children:[Hi.map(C=>l.jsx(A,{slot:C},C)),Object.keys(S).length>0&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-700/50",children:[l.jsx("div",{className:"text-[10px] text-slate-400 mb-1",children:"ACTIVE SET BONUSES"}),Object.entries(S).map(([C,M])=>{var D;const j=Bt[C]||ms[C];return j?l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"text-[10px] font-bold mb-0.5",style:{color:j.color},children:[j.name," (",M,"/8)"]}),l.jsx("div",{className:"space-y-0.5",children:(D=j.setBonuses)==null?void 0:D.map((N,E)=>{const O=M>=N.pieces;return N.secret&&!O?null:l.jsxs("div",{className:`text-[9px] flex gap-1 ${O?"text-green-400":"text-slate-600"}`,children:[l.jsxs("span",{className:"font-bold",children:[N.pieces,"pc:"]}),l.jsx("span",{children:N.desc}),O&&l.jsx("span",{className:"text-green-500",children:""})]},E)})})]},C):null})]})]}):l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"flex justify-center",children:l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx(k,{slot:"amulet"}),l.jsx(k,{slot:"helmet"}),l.jsx("div",{className:"w-20 h-20"}),l.jsx(k,{slot:"weapon"}),l.jsx(k,{slot:"armor"}),l.jsx(k,{slot:"shield"}),l.jsx(k,{slot:"gloves"}),l.jsx(k,{slot:"legs"}),l.jsx(k,{slot:"belt"}),l.jsx("div",{className:"w-20 h-20"}),l.jsx(k,{slot:"boots"}),l.jsx("div",{className:"w-20 h-20"})]})})})]}),l.jsxs("div",{className:"flex-1 game-panel flex flex-col min-h-0",onMouseLeave:()=>t&&t(null),children:[l.jsxs("div",{className:"game-panel-header flex justify-between items-center",children:[l.jsxs("span",{className:"text-sm",children:["Inventory (",e.inventory.length,"/50)"]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("button",{onClick:b,className:`px-2 py-1 text-xs rounded transition-colors ${e.autoSalvage?"bg-green-600/50 text-green-300":"bg-slate-700/50 text-slate-400 hover:bg-slate-600/50"}`,children:"AUTO"}),n.size>0&&l.jsxs("button",{onClick:f,className:"px-2 py-1 text-xs bg-red-600/40 hover:bg-red-600/60 text-red-300 rounded",children:["SALVAGE (",n.size,")"]}),e.inventory.length>0&&l.jsx("button",{onClick:p,className:"px-2 py-1 text-xs bg-orange-600/40 hover:bg-orange-600/60 text-orange-300 rounded",children:"ALL"})]})]}),e.autoSalvage&&l.jsxs("div",{className:"px-2 py-1.5 bg-slate-800/50 border-b border-slate-700 space-y-1.5",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[l.jsx("span",{className:"text-xs text-slate-400 mr-1",children:"Filter:"}),l.jsx("button",{onClick:()=>x(-1),className:`px-1.5 py-0.5 text-xs rounded transition-all ${y===-1?"bg-slate-600 text-white":"bg-slate-700/50 text-slate-400 hover:bg-slate-600/50"}`,children:"ALL"}),we.slice(0,7).map((C,M)=>l.jsx("button",{onClick:()=>x(M),className:`px-1.5 py-0.5 text-xs rounded transition-all ${y===M?"ring-1 ring-white":"hover:brightness-125"}`,style:{backgroundColor:C.color+"30",color:C.color},title:C.name,children:C.name.slice(0,3)},M))]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-400",children:"Keep effects:"}),l.jsx("button",{onClick:m,className:`px-1.5 py-0.5 text-xs rounded transition-all ${w?"bg-green-600/40 text-green-300":"bg-red-600/40 text-red-300"}`,children:w?"ON":"OFF"})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 min-h-0",children:e.inventory.length===0?l.jsx("div",{className:"h-full flex items-center justify-center text-slate-500 text-base",children:"Empty"}):o?l.jsx("div",{className:"space-y-2",children:u.map(C=>{var P;const M=we[C.tier],j=n.has(C.id),D=C.bossSet?Bt[C.bossSet]||ms[C.bossSet]:null,N=C.plus>0?Lt(C.plus):null,E=xc(C),O=C.effects||[],B=e.gear[C.slot],F=B?xc(B):{dmg:0,hp:0,armor:0},H=Rt(C),L=B?Rt(B):0,R=H-L>0;return l.jsxs("div",{className:`relative bg-slate-900/80 rounded-lg border-2 overflow-hidden ${j?"border-red-500 bg-red-900/30":"border-slate-700/60"}`,style:!j&&M?{borderColor:M.color+"80"}:{},children:[B&&l.jsx("div",{className:`absolute top-0 right-0 px-1.5 py-0.5 text-[8px] font-bold ${R?"bg-green-500 text-white":"bg-red-500/80 text-white"}`,children:R?" UPGRADE":" DOWNGRADE"}),!B&&l.jsx("div",{className:"absolute top-0 right-0 px-1.5 py-0.5 text-[8px] font-bold bg-blue-500 text-white",children:"EMPTY SLOT"}),l.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-slate-700/50",style:{background:`linear-gradient(135deg, ${(M==null?void 0:M.color)||"#666"}15, transparent)`},children:[l.jsx("div",{className:"w-10 h-10 flex-shrink-0",children:l.jsx(rr,{item:C,size:"sm"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"font-bold text-sm truncate",style:{color:(M==null?void 0:M.color)||"#fff"},children:[C.name,C.plus>0&&N&&l.jsxs("span",{className:"ml-1 text-xs px-1 rounded",style:{backgroundColor:N.bgColor,color:N.color},children:["+",C.plus]})]}),l.jsxs("div",{className:"text-[10px] text-slate-400 flex items-center gap-1",children:[l.jsx("span",{style:{color:M==null?void 0:M.color},children:M==null?void 0:M.name}),l.jsx("span",{children:""}),l.jsx("span",{className:"capitalize",children:C.slot}),C.weaponType&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{className:"capitalize",children:C.weaponType})]})]})]}),l.jsxs("div",{className:"text-right text-[10px] text-slate-500",children:["PWR",l.jsx("br",{}),l.jsx("span",{className:"text-sm font-bold text-slate-300",children:H})]})]}),l.jsxs("div",{className:"flex gap-1 p-2 text-[10px]",children:[(E.dmg>0||F.dmg>0)&&l.jsxs("div",{className:"flex-1 bg-red-500/20 rounded px-1.5 py-1 text-center",children:[l.jsx("div",{className:"text-red-400",children:"DMG"}),l.jsxs("div",{className:"font-bold text-red-300",children:["+",E.dmg]}),B&&l.jsxs("div",{className:`text-[9px] ${E.dmg-F.dmg>0?"text-green-400":E.dmg-F.dmg<0?"text-red-400":"text-slate-500"}`,children:[E.dmg-F.dmg>0?"+":"",E.dmg-F.dmg]})]}),(E.hp>0||F.hp>0)&&l.jsxs("div",{className:"flex-1 bg-green-500/20 rounded px-1.5 py-1 text-center",children:[l.jsx("div",{className:"text-green-400",children:"HP"}),l.jsxs("div",{className:"font-bold text-green-300",children:["+",E.hp]}),B&&l.jsxs("div",{className:`text-[9px] ${E.hp-F.hp>0?"text-green-400":E.hp-F.hp<0?"text-red-400":"text-slate-500"}`,children:[E.hp-F.hp>0?"+":"",E.hp-F.hp]})]}),(E.armor>0||F.armor>0)&&l.jsxs("div",{className:"flex-1 bg-blue-500/20 rounded px-1.5 py-1 text-center",children:[l.jsx("div",{className:"text-blue-400",children:"ARM"}),l.jsxs("div",{className:"font-bold text-blue-300",children:["+",E.armor]}),B&&l.jsxs("div",{className:`text-[9px] ${E.armor-F.armor>0?"text-green-400":E.armor-F.armor<0?"text-red-400":"text-slate-500"}`,children:[E.armor-F.armor>0?"+":"",E.armor-F.armor]})]})]}),O.length>0&&l.jsx("div",{className:"px-2 pb-1 flex flex-wrap gap-1",children:O.map(($,z)=>l.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 bg-purple-500/20 text-purple-300 rounded",children:[$.name," +",$.value]},z))}),D&&l.jsxs("div",{className:"px-2 pb-2 border-t border-slate-700/30 mt-1 pt-1",children:[l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsxs("span",{className:"text-[9px] font-bold",style:{color:D.color},children:[D.name," Set"]}),l.jsxs("span",{className:"text-[8px] text-slate-500",children:["(",S[C.bossSet]||0,"/8 equipped)"]})]}),l.jsx("div",{className:"space-y-0.5",children:(P=D.setBonuses)==null?void 0:P.slice(0,4).map(($,z)=>{const V=S[C.bossSet]||0,X=V+1>=$.pieces,K=V>=$.pieces;return $.secret&&!K?null:l.jsxs("div",{className:`text-[8px] flex gap-1 ${K?"text-green-400":X?"text-yellow-400":"text-slate-600"}`,children:[l.jsxs("span",{className:"font-bold w-6",children:[$.pieces,"pc:"]}),l.jsx("span",{className:"flex-1",children:$.desc}),K&&l.jsx("span",{children:""}),!K&&X&&l.jsx("span",{children:"+"})]},z)})})]}),l.jsxs("div",{className:"flex border-t border-slate-700/50",children:[l.jsx("button",{onClick:()=>g(C),className:"flex-1 py-2 text-xs font-bold text-green-400 bg-green-500/10 active:bg-green-500/30",children:"EQUIP"}),l.jsx("button",{onClick:()=>h(C.id),className:`flex-1 py-2 text-xs font-bold border-l border-slate-700/50 ${j?"text-white bg-red-500":"text-red-400 bg-red-500/10 active:bg-red-500/30"}`,children:j?"SELECTED":"SALVAGE"})]})]},C.id)})}):l.jsx("div",{className:"grid gap-1.5 grid-cols-7",children:u.map(C=>{const M=we[C.tier],j=n.has(C.id),D=C.bossSet?Bt[C.bossSet]:null,N=C.plus>0?Lt(C.plus):null,E=()=>j?{}:D?{borderColor:D.color,boxShadow:`inset 0 0 6px ${D.color}30`}:M&&C.tier>0?{borderColor:M.color,boxShadow:`inset 0 0 4px ${M.color}25`}:{};return l.jsxs("div",{className:`relative aspect-square bg-slate-900/60 border-2 rounded-lg cursor-pointer transition-all active:scale-95 ${j?"border-red-500 bg-red-500/20":"border-slate-700/40 hover:border-blue-500/50"}`,style:E(),onClick:()=>g(C),onContextMenu:O=>{O.preventDefault(),h(C.id)},onMouseEnter:O=>t&&t(C,{x:O.clientX,y:O.clientY},!0),onMouseLeave:()=>t&&t(null),children:[l.jsx("div",{className:"absolute inset-1",children:l.jsx(rr,{item:C,size:"sm"})}),l.jsx("div",{className:"absolute top-1 left-1 w-2 h-2 rounded-full",style:{backgroundColor:(M==null?void 0:M.color)||"#666"}}),C.plus>0&&N&&l.jsxs("div",{className:"absolute -top-1.5 -right-1.5 px-1 py-0.5 text-[11px] font-bold rounded flex items-center border border-black/60",style:{backgroundColor:N.bgColor,color:N.color,boxShadow:`${N.glow}, 0 1px 3px rgba(0,0,0,0.5)`},children:[N.icon&&l.jsx("span",{className:"text-[9px] mr-0.5",children:N.icon}),"+",C.plus]}),(C.count||1)>1&&l.jsxs("div",{className:"absolute bottom-0 left-0 text-[10px] font-bold text-white bg-blue-600/90 px-1 rounded-tr",children:["x",C.count]}),j&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-500/30",children:l.jsx("span",{className:"text-red-400 text-xl font-bold",children:""})})]},C.id)})})}),l.jsx("div",{className:"px-3 py-1.5 border-t border-slate-700/30 text-xs text-slate-500 text-center",children:o?"Tap to equip  Long-press to salvage":"Click to equip  Right-click to salvage"})]}),i&&l.jsx(fk,{onClose:()=>a(!1)})]})}const zn={str:{name:"Strength",color:"#ef4444",desc:"+2 flat DMG, +3% sword/scythe/greataxe DMG per point"},int:{name:"Intelligence",color:"#8b5cf6",desc:"+1% XP, +3% staff DMG per point"},vit:{name:"Vitality",color:"#22c55e",desc:"+8 HP, +1 armor, +0.15% regen/s, +0.3% DR, +2% mace DMG"},agi:{name:"Agility",color:"#f59e0b",desc:"+0.5% crit, +0.3% dodge, +1% speed, +2% dagger/katana DMG"},lck:{name:"Luck",color:"#06b6d4",desc:"+0.5% gold, +2% crit DMG per point"}};function qi(t){if(t==null||isNaN(t))return"0";const e=Math.abs(t),s=t<0?"-":"";return e>=1e12?s+(e/1e12).toFixed(1)+"T":e>=1e9?s+(e/1e9).toFixed(1)+"B":e>=1e6?s+(e/1e6).toFixed(1)+"M":e>=1e3?s+(e/1e3).toFixed(e>=1e4?0:1)+"K":s+Math.floor(e).toLocaleString()}function Be(t){return t==null||isNaN(t)?"0":Math.floor(t).toLocaleString()}function tt(t,e=1,s=!0){return t==null||isNaN(t)?"0%":(s?t:t*100).toFixed(e)+"%"}function q0(t,e=2){return t==null||isNaN(t)?"1x":t.toFixed(e)+"x"}function ir(t,e=0){return t==null||isNaN(t)?"+0%":(t>=0?"+":"")+t.toFixed(e)+"%"}function K0(t){if(t==null||isNaN(t)||t<=0)return"?";if(t<60)return t.toFixed(1)+"s";const e=Math.floor(t/60),s=Math.floor(t%60);if(e<60)return s>0?`${e}m ${s}s`:`${e}m`;const n=Math.floor(e/60),r=e%60;return`${n}h ${r}m`}function Yx(){const{state:t,gameManager:e}=Ke(),{isMobile:s}=Ln(),n=zi(t),[r,i]=I.useState(!1),a=en(t.currentZone),o=n.damage,c=n.critChance/100,u=n.critDamage/100,d=o*u,h=o*(1-c)+d*c,f=n.speedMult*wt.ATTACKS_PER_SECOND,p=Math.floor(h*f),g=n.armor/(n.armor+wt.ARMOR_CONSTANT),v=(n.damageReduction||0)/100,b=Math.floor(a.enemyDmg*(1-g)),x=Math.max(1,Math.floor(b*(1-v))),m=1-(1-g)*(1-v);Math.floor(n.maxHp/(1-m));const y=(_,S=1)=>{const A=Math.min(S,t.statPoints);A>0&&e.setState(C=>({...C,statPoints:C.statPoints-A,stats:{...C.stats,[_]:C.stats[_]+A}}))},w=async()=>{try{const _=await e.save();await window.storage.set("gear-grinder-save",_),console.log("Manual save completed:",{zone:e.state.currentZone,level:e.state.level,gold:e.state.gold,kills:e.state.kills,timestamp:new Date().toISOString()})}catch(_){console.error("Save failed:",_)}},k=()=>{const _={str:5,int:5,vit:5,agi:5,lck:5},S=Object.entries(t.stats).reduce((A,[C,M])=>A+(M-_[C]),0);S!==0&&confirm(`Reset all stat allocations?

You will get back ${S} stat points.`)&&e.setState(A=>({...A,stats:{..._},statPoints:A.statPoints+S}))};return s?l.jsxs("div",{className:"h-full flex flex-col overflow-y-auto custom-scrollbar",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-900/80 border-b border-slate-800 sticky top-0 z-10",children:[l.jsx("span",{className:"text-sm font-bold text-slate-300",children:"Stats"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-sm text-green-400",children:[l.jsx("span",{className:"font-bold text-lg",children:t.statPoints})," pts"]}),l.jsx("button",{onClick:w,className:"px-3 py-2 text-xs bg-blue-600/40 active:bg-blue-600/60 text-blue-200 rounded font-bold active:scale-95 transition-transform",children:"SAVE"}),l.jsx("button",{onClick:k,className:"px-3 py-2 text-xs bg-orange-600/40 active:bg-orange-600/60 text-orange-200 rounded font-bold active:scale-95 transition-transform",children:"RESPEC"})]})]}),l.jsxs("div",{className:"p-2",children:[l.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold mb-2 px-1",children:"Attributes"}),l.jsx("div",{className:"space-y-2",children:Object.entries(t.stats).map(([_,S])=>l.jsxs("div",{className:"p-3 bg-slate-900/50 rounded-lg border border-slate-800/50",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-bold flex-shrink-0",style:{color:zn[_].color},children:zn[_].name}),l.jsx("span",{className:"text-lg font-mono font-bold text-white ml-auto",children:S}),l.jsxs("div",{className:"flex gap-1.5 flex-shrink-0",children:[l.jsx("button",{onClick:()=>y(_,1),disabled:t.statPoints<=0,className:`px-3 py-2 rounded text-sm font-bold transition-all active:scale-95 ${t.statPoints>0?"bg-blue-600 active:bg-blue-500 text-white":"bg-slate-700 text-slate-500"}`,children:"+1"}),l.jsx("button",{onClick:()=>y(_,10),disabled:t.statPoints<=0,className:`px-3 py-2 rounded text-sm font-bold transition-all active:scale-95 ${t.statPoints>=10?"bg-green-600 active:bg-green-500 text-white":t.statPoints>0?"bg-green-600/50 active:bg-green-500/50 text-green-200":"bg-slate-700 text-slate-500"}`,children:"+10"}),l.jsx("button",{onClick:()=>y(_,t.statPoints),disabled:t.statPoints<=0,className:`px-3 py-2 rounded text-sm font-bold transition-all active:scale-95 ${t.statPoints>0?"bg-purple-600 active:bg-purple-500 text-white":"bg-slate-700 text-slate-500"}`,children:"MAX"})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mt-2 leading-relaxed",children:zn[_].desc})]},_))})]}),l.jsxs("div",{className:"p-2 pt-0",children:[l.jsx("div",{className:"text-xs text-slate-500 uppercase font-bold mb-2 px-1",children:"Combat Stats"}),l.jsxs("div",{className:"bg-slate-900/50 rounded-lg border border-slate-800/50 p-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[l.jsx(Tt,{label:"Damage",value:n.damage,color:"text-red-300"}),l.jsx(Tt,{label:"Armor",value:n.armor,color:"text-blue-300"}),l.jsx(Tt,{label:"Crit %",value:tt(n.critChance),color:"text-yellow-300"}),l.jsx(Tt,{label:"Crit DMG",value:tt(n.critDamage,0),color:"text-orange-300"}),l.jsx(Tt,{label:"Speed",value:q0(n.speedMult),color:"text-cyan-300"}),l.jsx(Tt,{label:"Dodge",value:tt(n.dodge),color:"text-green-300"}),l.jsx(Tt,{label:"Lifesteal",value:tt(n.lifesteal),color:"text-pink-300"}),l.jsx(Tt,{label:"Thorns",value:n.thorns||0,color:"text-purple-300"}),l.jsx(Tt,{label:"HP Regen",value:`${(n.hpRegen||0).toFixed(1)}%/s`,color:"text-emerald-300"}),l.jsx(Tt,{label:"Dmg Red.",value:tt(n.damageReduction||0),color:"text-sky-300"})]}),l.jsxs("div",{className:"border-t border-slate-700/50 mt-2 pt-2 grid grid-cols-2 gap-x-4 gap-y-1",children:[l.jsx(Tt,{label:"Silver %",value:ir((n.goldMult-1)*100),color:"text-slate-300"}),l.jsx(Tt,{label:"XP %",value:ir(n.xpBonus||0),color:"text-purple-400"})]})]}),l.jsxs("button",{onClick:()=>i(!r),className:"w-full mt-2 py-3 px-4 bg-slate-800/50 active:bg-slate-700/50 rounded-lg border border-slate-700/50 flex items-center justify-between text-sm transition-all active:scale-[0.98]",children:[l.jsx("span",{className:"text-slate-400 font-medium",children:"Damage Breakdown"}),l.jsx("span",{className:`text-slate-500 transition-transform ${r?"rotate-180":""}`,children:""})]}),r&&l.jsxs("div",{className:"mt-2 p-3 bg-slate-900/70 rounded-lg border border-slate-700/50 text-sm space-y-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500 uppercase text-xs font-bold mb-2",children:"Damage Output"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Base Hit"}),l.jsx("span",{className:"text-red-300 font-mono font-bold",children:o})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-slate-400",children:["Critical (",tt(n.critChance),")"]}),l.jsx("span",{className:"text-yellow-300 font-mono font-bold",children:Math.floor(d)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Avg Damage/Hit"}),l.jsx("span",{className:"text-orange-300 font-mono font-bold",children:Math.floor(h)})]}),l.jsxs("div",{className:"flex justify-between border-t border-slate-700/50 pt-2 mt-2",children:[l.jsx("span",{className:"text-slate-200 font-semibold",children:"True DPS"}),l.jsx("span",{className:"text-green-400 font-mono font-bold text-base",children:Be(p)})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-slate-500 uppercase text-xs font-bold mb-2",children:["vs ",a.name]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Enemy Base Dmg"}),l.jsx("span",{className:"text-red-400 font-mono font-bold",children:a.enemyDmg})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Armor Reduction"}),l.jsxs("span",{className:"text-blue-300 font-mono font-bold",children:["-",tt(g*100,1,!1)]})]}),v>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Dmg Reduction"}),l.jsxs("span",{className:"text-sky-300 font-mono font-bold",children:["-",tt(v*100,1,!1)]})]}),l.jsxs("div",{className:"flex justify-between border-t border-slate-700/50 pt-2 mt-2",children:[l.jsx("span",{className:"text-slate-200 font-semibold",children:"You Take"}),l.jsxs("span",{className:"text-cyan-400 font-mono font-bold text-base",children:[x,"/hit"]})]})]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-700/50",children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsx("span",{className:"text-slate-400",children:"Enemy HP"}),l.jsx("span",{className:"text-slate-300 font-mono font-bold",children:a.enemyHp})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Est. Kill Time"}),l.jsx("span",{className:"text-green-300 font-mono font-bold",children:K0(p>0?a.enemyHp/p:0)})]})]})]})]})]}):l.jsxs("div",{className:"h-full flex flex-col gap-2",children:[l.jsx("div",{className:"game-panel",children:l.jsxs("div",{className:"game-panel-header flex justify-between items-center",children:[l.jsx("span",{className:"text-sm",children:"Stats"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-sm text-green-400",children:["Points: ",l.jsx("span",{className:"font-bold text-lg",children:t.statPoints})]}),l.jsx("button",{onClick:w,className:"px-3 py-1 text-xs bg-blue-600/40 hover:bg-blue-600/60 text-blue-200 rounded font-bold",children:"SAVE"}),l.jsx("button",{onClick:k,className:"px-3 py-1 text-xs bg-orange-600/40 hover:bg-orange-600/60 text-orange-200 rounded font-bold",children:"RESPEC"})]})]})}),l.jsxs("div",{className:"flex-1 flex gap-2 min-h-0",children:[l.jsxs("div",{className:"w-1/2 game-panel flex flex-col min-h-0",children:[l.jsx("div",{className:"game-panel-header text-sm",children:"Attributes"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 min-h-0 space-y-1.5",children:Object.entries(t.stats).map(([_,S])=>l.jsxs("div",{className:"p-2 bg-slate-900/50 rounded hover:bg-slate-800/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-bold flex-shrink-0",style:{color:zn[_].color},children:zn[_].name}),l.jsx("span",{className:"text-lg font-mono font-bold text-white ml-auto",children:S}),l.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[l.jsx("button",{onClick:()=>y(_,1),disabled:t.statPoints<=0,className:`px-2 py-1 rounded text-xs font-bold transition-all ${t.statPoints>0?"bg-blue-600 hover:bg-blue-500 text-white":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:"+1"}),l.jsx("button",{onClick:()=>y(_,10),disabled:t.statPoints<=0,className:`px-2 py-1 rounded text-xs font-bold transition-all ${t.statPoints>=10?"bg-green-600 hover:bg-green-500 text-white":t.statPoints>0?"bg-green-600/50 hover:bg-green-500/50 text-green-200":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:"+10"}),l.jsx("button",{onClick:()=>y(_,t.statPoints),disabled:t.statPoints<=0,className:`px-2 py-1 rounded text-xs font-bold transition-all ${t.statPoints>0?"bg-purple-600 hover:bg-purple-500 text-white":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:"MAX"})]})]}),l.jsx("div",{className:"text-[10px] text-slate-500 mt-1 leading-tight",children:zn[_].desc})]},_))})]}),l.jsxs("div",{className:"w-1/2 game-panel flex flex-col min-h-0",children:[l.jsx("div",{className:"game-panel-header text-sm",children:"Combat"}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 min-h-0",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx(jt,{label:"Damage",value:n.damage,color:"text-red-300"}),l.jsx(jt,{label:"Armor",value:n.armor,color:"text-blue-300"}),l.jsx(jt,{label:"Crit %",value:tt(n.critChance),color:"text-yellow-300"}),l.jsx(jt,{label:"Crit DMG",value:tt(n.critDamage,0),color:"text-orange-300"}),l.jsx(jt,{label:"Speed",value:q0(n.speedMult),color:"text-cyan-300"}),l.jsx(jt,{label:"Dodge",value:tt(n.dodge),color:"text-green-300"}),l.jsx(jt,{label:"Lifesteal",value:tt(n.lifesteal),color:"text-pink-300"}),l.jsx(jt,{label:"Thorns",value:n.thorns||0,color:"text-purple-300"}),l.jsx(jt,{label:"HP Regen",value:`${(n.hpRegen||0).toFixed(1)}%/s`,color:"text-emerald-300"}),l.jsx(jt,{label:"Dmg Reduction",value:tt(n.damageReduction||0),color:"text-sky-300"}),l.jsxs("div",{className:"border-t border-slate-700/50 my-2 pt-2",children:[l.jsx(jt,{label:"Silver %",value:ir((n.goldMult-1)*100),color:"text-slate-300"}),l.jsx(jt,{label:"XP %",value:ir(n.xpBonus||0),color:"text-purple-400"})]})]}),l.jsxs("button",{onClick:()=>i(!r),className:"w-full mt-3 py-2 px-3 bg-slate-800/50 hover:bg-slate-700/50 rounded border border-slate-700/50 flex items-center justify-between text-sm transition-colors",children:[l.jsx("span",{className:"text-slate-400",children:"Damage Breakdown"}),l.jsx("span",{className:`text-slate-500 transition-transform ${r?"rotate-180":""}`,children:""})]}),r&&l.jsxs("div",{className:"mt-2 p-3 bg-slate-900/70 rounded border border-slate-700/50 text-xs space-y-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-slate-500 uppercase text-[10px] mb-1.5",children:"Damage Output"}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Base Hit"}),l.jsx("span",{className:"text-red-300 font-mono",children:o})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-slate-400",children:["Critical Hit (",tt(n.critChance),")"]}),l.jsx("span",{className:"text-yellow-300 font-mono",children:Math.floor(d)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Avg Damage/Hit"}),l.jsx("span",{className:"text-orange-300 font-mono",children:Math.floor(h)})]}),l.jsxs("div",{className:"flex justify-between border-t border-slate-700/50 pt-1 mt-1",children:[l.jsx("span",{className:"text-slate-300 font-semibold",children:"True DPS"}),l.jsx("span",{className:"text-green-400 font-mono font-bold",children:Be(p)})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-slate-500 uppercase text-[10px] mb-1.5",children:["vs ",a.name]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Enemy Base Dmg"}),l.jsx("span",{className:"text-red-400 font-mono",children:a.enemyDmg})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Armor Reduction"}),l.jsxs("span",{className:"text-blue-300 font-mono",children:["-",tt(g*100,1,!1)]})]}),v>0&&l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Dmg Reduction"}),l.jsxs("span",{className:"text-sky-300 font-mono",children:["-",tt(v*100,1,!1)]})]}),l.jsxs("div",{className:"flex justify-between border-t border-slate-700/50 pt-1 mt-1",children:[l.jsx("span",{className:"text-slate-300 font-semibold",children:"You Take"}),l.jsxs("span",{className:"text-cyan-400 font-mono font-bold",children:[x,"/hit"]})]})]})]}),l.jsxs("div",{className:"pt-2 border-t border-slate-700/50",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Enemy HP"}),l.jsx("span",{className:"text-slate-300 font-mono",children:a.enemyHp})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Est. Kill Time"}),l.jsx("span",{className:"text-green-300 font-mono",children:K0(p>0?a.enemyHp/p:0)})]})]})]})]})]})]})]})}function jt({label:t,value:e,color:s="text-slate-200"}){return l.jsxs("div",{className:"flex justify-between py-1.5 px-2 hover:bg-slate-800/30 rounded",children:[l.jsx("span",{className:"text-sm text-slate-400",children:t}),l.jsx("span",{className:`text-base font-mono font-bold ${s}`,children:e})]})}function Tt({label:t,value:e,color:s="text-slate-200"}){return l.jsxs("div",{className:"flex justify-between py-1",children:[l.jsx("span",{className:"text-sm text-slate-400",children:t}),l.jsx("span",{className:`text-sm font-mono font-bold ${s}`,children:e})]})}function Xx(){const{state:t,gameManager:e,addToast:s}=Ke(),{isMobile:n}=Ln(),r=i=>{t.level>=i.unlockLevel&&!t.unlockedSkills.includes(i.id)&&(e.setState(a=>({...a,unlockedSkills:[...a.unlockedSkills,i.id]})),s("skill",{name:i.name,description:`Unlocked at level ${i.unlockLevel}`,effect:i.desc}))};return n?l.jsxs("div",{className:"h-full flex flex-col overflow-y-auto custom-scrollbar",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-900/80 border-b border-slate-800 sticky top-0 z-10",children:[l.jsx("span",{className:"font-bold text-yellow-500 uppercase text-sm",children:"Combat Skills"}),l.jsxs("span",{className:"text-xs text-slate-500",children:["Level ",t.level]})]}),l.jsx("div",{className:"p-2 space-y-2",children:Do.map(i=>{const a=t.unlockedSkills.includes(i.id),o=t.level>=i.unlockLevel;return l.jsx("div",{className:`p-3 rounded-lg border ${a?"bg-slate-800 border-green-500/50":o?"bg-slate-900 border-slate-600":"bg-slate-950 border-slate-800 opacity-60"}`,children:l.jsxs("div",{className:"flex justify-between items-start gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:`font-bold text-sm ${a?"text-green-400":"text-gray-300"}`,children:i.name}),l.jsx("div",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:i.desc})]}),l.jsx("div",{className:"flex-shrink-0",children:a?l.jsx("span",{className:"text-xs font-bold text-green-500 px-3 py-1.5 bg-green-900/30 rounded-lg",children:"ACTIVE"}):l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-xs text-red-400 mb-1.5",children:["Lv.",i.unlockLevel]}),o&&l.jsx("button",{onClick:()=>r(i),className:"text-sm font-bold bg-yellow-600 active:bg-yellow-500 text-white px-4 py-2 rounded-lg active:scale-95 transition-transform",children:"UNLOCK"})]})})]})},i.id)})})]}):l.jsxs("div",{className:"h-full flex flex-col gap-4 min-h-0",children:[l.jsx("h3",{className:"font-bold text-yellow-500 uppercase border-b border-slate-700 pb-2 flex-shrink-0",children:"Combat Skills"}),l.jsx("div",{className:"grid grid-cols-1 gap-2 overflow-y-auto custom-scrollbar flex-1 min-h-0",children:Do.map(i=>{const a=t.unlockedSkills.includes(i.id),o=t.level>=i.unlockLevel;return l.jsxs("div",{className:`p-3 rounded border flex justify-between items-center ${a?"bg-slate-800 border-green-500/50":o?"bg-slate-900 border-slate-600":"bg-slate-950 border-slate-800 opacity-50"}`,children:[l.jsxs("div",{children:[l.jsx("div",{className:`font-bold ${a?"text-green-400":"text-gray-400"}`,children:i.name}),l.jsx("div",{className:"text-xs text-gray-500",children:i.desc})]}),a?l.jsx("span",{className:"text-xs font-bold text-green-500 px-2 py-1 bg-green-900/20 rounded",children:"ACTIVE"}):l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-xs text-red-400 mb-1",children:["Req Lv.",i.unlockLevel]}),o&&l.jsx("button",{onClick:()=>r(i),className:"text-xs bg-yellow-600 hover:bg-yellow-500 text-white px-3 py-1 rounded",children:"UNLOCK"})]})]},i.id)})})]})}const gk={gold:25,enhanceStone:1,blessedOrb:13,celestialShard:37,prestigeStone:45};function qx({iconNum:t,size:e=16,className:s=""}){const n=s.includes("w-")||s.includes("h-");return l.jsx("img",{src:`./assets/gems/Icon${t}.png`,alt:"",width:n?void 0:e,height:n?void 0:e,className:s,style:{imageRendering:"pixelated"}})}function ze({type:t,size:e=16,className:s=""}){const n=gk[t];return n?l.jsx(qx,{iconNum:n,size:e,className:s}):null}function Kx({bossSet:t,size:e=16,className:s=""}){const n=rl[t];return n?l.jsx(qx,{iconNum:n.gemIcon,size:e,className:s}):null}function Qx(){const{state:t,gameManager:e}=Ke(),s=I.useRef(null);I.useEffect(()=>{s.current&&s.current.scrollIntoView({block:"center",behavior:"instant"})},[]);const n=i=>{const a=en(i);e.setState(o=>({...o,currentZone:i,enemyHp:a.enemyHp,enemyMaxHp:a.enemyHp}))},r=[...fu,...gg.filter(i=>(t.prestigeLevel||0)>=(i.prestigeReq||0))];return l.jsxs("div",{className:"h-full flex flex-col gap-2",children:[l.jsx("div",{className:"game-panel",children:l.jsxs("div",{className:"game-panel-header flex justify-between items-center",children:[l.jsx("span",{className:"text-sm",children:"World Map"}),l.jsxs("span",{className:"text-sm text-slate-400",children:["Zone ",t.currentZone+1,"/",r.length]})]})}),l.jsx("div",{className:"flex-1 game-panel flex flex-col min-h-0",children:l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 min-h-0 space-y-2",children:r.map((i,a)=>{var f,p;const o=((f=t.zoneKills)==null?void 0:f[i.id])||0,c=a>0?r[a-1]:null,u=i.id===0||c&&(((p=t.zoneKills)==null?void 0:p[c.id])||0)>=c.killsRequired,d=t.currentZone===i.id,h=i.killsRequired>0?Math.min(100,o/i.killsRequired*100):100;return l.jsxs("div",{ref:d?s:null,onClick:()=>u&&!d&&n(i.id),className:`
                                    relative rounded-lg p-3 transition-all border-2
                                    ${d?"bg-yellow-900/30 border-yellow-500/60":u?"bg-slate-800/40 border-slate-700/40 hover:border-blue-500/50 cursor-pointer active:scale-[0.98] active:bg-slate-700/40":"bg-slate-900/30 border-slate-800/30 opacity-50 cursor-not-allowed"}
                                `,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-sm font-bold ${i.isBoss?"bg-red-600/50 text-red-200":d?"bg-yellow-600/50 text-yellow-200":u?"bg-slate-700 text-slate-300":"bg-slate-800 text-slate-600"}`,children:i.isBoss?"!":i.id+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-base font-bold truncate ${i.isBoss?"text-red-300":"text-white"}`,children:i.name}),i.prestigeReq>0&&l.jsxs("span",{className:"px-1.5 py-0.5 text-xs bg-pink-500/30 text-pink-300 rounded font-bold",children:["P",i.prestigeReq]})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-400 mt-1",children:[l.jsxs("span",{children:["HP:",qi(i.enemyHp)]}),l.jsxs("span",{children:["DMG:",qi(i.enemyDmg)]}),l.jsxs("span",{className:"text-slate-300 font-semibold",children:[i.goldMin,"-",i.goldMax,"s"]})]})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[i.drops.ore>0&&l.jsx(ze,{type:"ore",size:18}),i.drops.leather>0&&l.jsx(ze,{type:"leather",size:18}),i.drops.enhanceStone>0&&l.jsx(ze,{type:"enhanceStone",size:18}),i.drops.blessedOrb>0&&l.jsx(ze,{type:"blessedOrb",size:18}),i.drops.celestialShard>0&&l.jsx(ze,{type:"celestialShard",size:18})]}),l.jsx("div",{className:"text-right min-w-[50px]",children:d?l.jsx("span",{className:"text-sm text-yellow-400 font-bold",children:"HERE"}):u?l.jsx("span",{className:"text-sm text-blue-400 font-semibold",children:"GO"}):l.jsx("span",{className:"text-base text-slate-600",children:""})})]}),i.bossSet&&(()=>{const g=Bt[i.bossSet]||ms[i.bossSet],v=Rn.find(b=>b.id===(g==null?void 0:g.weaponType));return l.jsxs("div",{className:"mt-2 text-xs px-2 py-1 rounded flex items-center gap-2 w-fit font-semibold",style:{backgroundColor:`${g==null?void 0:g.color}20`,color:g==null?void 0:g.color},children:[l.jsxs("span",{children:[" ",g==null?void 0:g.name," Set"]}),v&&l.jsxs("span",{className:"text-slate-400 font-normal",children:[" Drops: ",v.name]})]})})(),i.killsRequired>0&&l.jsx("div",{className:"mt-2 h-1.5 bg-slate-800 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full transition-all ${h>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${h}%`}})}),d&&l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-yellow-400 rounded-l-lg"})]},i.id)})})})]})}function Zx(){var H,L;const{state:t,gameManager:e}=Ke(),[s,n]=I.useState(null),[r,i]=I.useState(null),[a,o]=I.useState(!1),c=I.useRef(null),[u,d]=I.useState(null),h=I.useRef(null),f=I.useRef(t),p=I.useRef(s);I.useEffect(()=>{f.current=t},[t]),I.useEffect(()=>{p.current=s},[s]);const g=[...Object.values(t.gear).filter(T=>T),...t.inventory];I.useEffect(()=>{if(s){const T=g.find(R=>R.id===s.id);T&&T.plus!==s.plus&&n(T)}},[t.gear,t.inventory]),I.useEffect(()=>{if(!a||!s||r===null){c.current&&(clearInterval(c.current),c.current=null);return}const T=()=>{var Me;const R=f.current,P=p.current;if(!P){o(!1);return}const z=[...Object.values(R.gear).filter(re=>re),...R.inventory].find(re=>re.id===P.id);if(!z){o(!1);return}if(z.plus>=r){o(!1),e.emit("floatingText",{text:`+${r} DONE!`,type:"levelup",target:"player"});return}const V=zl(z.plus),X=z.bossSet&&z.plus>=10,K={...V,bossStone:X?1:0};if(R.gold<K.gold||R.enhanceStone<K.enhanceStone){o(!1),e.emit("floatingText",{text:"NO RESOURCES!",type:"death",target:"player"});return}if((K.blessedOrb||0)>(R.blessedOrb||0)){o(!1),e.emit("floatingText",{text:"NEED B.ORBS!",type:"death",target:"player"});return}if((K.celestialShard||0)>(R.celestialShard||0)){o(!1),e.emit("floatingText",{text:"NEED C.SHARDS!",type:"death",target:"player"});return}if(X&&(((Me=R.bossStones)==null?void 0:Me[z.bossSet])||0)<1){o(!1),e.emit("floatingText",{text:"NEED BOSS STONE!",type:"death",target:"player"});return}v(z,K)};return c.current=setInterval(T,200),()=>{c.current&&clearInterval(c.current)}},[a,r]);const v=(T,R)=>{var Qe;const P=f.current,$=T.failStreak||0,z=_f(T.plus,$),V=Math.random()*100<z,X=P.inventory.find(Ie=>Ie.id===T.id);let K={...P,gold:P.gold-R.gold,enhanceStone:P.enhanceStone-R.enhanceStone,blessedOrb:P.blessedOrb-(R.blessedOrb||0),celestialShard:P.celestialShard-(R.celestialShard||0)};T.bossSet&&T.plus>=10&&R.bossStone&&(K.bossStones={...P.bossStones,[T.bossSet]:(((Qe=P.bossStones)==null?void 0:Qe[T.bossSet])||0)-R.bossStone});const Me=V?T.plus+1:T.plus,re={...T,plus:Me,id:Date.now(),failStreak:V?0:$+1};if(delete re.count,V&&Qv(Me)&&!(re.effects||[]).some(Te=>Te.isAwakened&&Te.milestone===Me)){const Te=Kv(Me,re.effects||[]);re.effects=[...re.effects||[],Te],e.emit("floatingText",{text:`AWAKENED! +${Te.name}`,type:"levelup",target:"player"}),Q.playSfxAwakening()}if(X){let Ie=xg(P.inventory,T.id);Ie=Gi(Ie,re),K.inventory=Ie}else K.gear={...P.gear,[re.slot]:re};if(V||(K.enhanceFails=(P.enhanceFails||0)+1),e.setState(K),h.current&&clearTimeout(h.current),V?(d({type:"success",text:`+${re.plus}!`,key:Date.now()}),Q.playSfxEnhanceSuccess()):(d({type:"fail",text:"FAIL",key:Date.now()}),Q.playSfxEnhanceFail()),h.current=setTimeout(()=>d(null),a?150:800),X){const Ie=K.inventory.find(Te=>Te.slot===re.slot&&Te.tier===re.tier&&Te.plus===re.plus&&Te.bossSet===re.bossSet);n(Ie||re)}else n(re)},b=()=>{var $;if(!s)return;const T=zl(s.plus),R=s.bossSet&&s.plus>=10,P={...T,bossStone:R?1:0};t.gold<P.gold||t.enhanceStone<P.enhanceStone||(P.blessedOrb||0)>(t.blessedOrb||0)||(P.celestialShard||0)>(t.celestialShard||0)||R&&((($=t.bossStones)==null?void 0:$[s.bossSet])||0)<1||v(s,P)},x=T=>{s&&(i(T),o(!0))},m=()=>{o(!1),i(null)},y=s?zl(s.plus):null,w=(s==null?void 0:s.bossSet)&&s.plus>=10,k=w?rl[s.bossSet]:null,_=y?{...y,bossStoneType:s==null?void 0:s.bossSet}:null,S=(s==null?void 0:s.failStreak)||0,A=Jv(S),C=s?yg(s.plus):0,M=s?_f(s.plus,S):0,j=s?wr(s.plus,s.tier):null,D=s?wr(s.plus+1,s.tier):null,N=!w||(((H=t.bossStones)==null?void 0:H[s==null?void 0:s.bossSet])||0)>=1,E=!(_!=null&&_.blessedOrb)||(t.blessedOrb||0)>=_.blessedOrb,O=!(_!=null&&_.celestialShard)||(t.celestialShard||0)>=_.celestialShard,B=_&&t.gold>=_.gold&&t.enhanceStone>=_.enhanceStone&&N&&E&&O,{isMobile:F}=Ln();return l.jsxs("div",{className:`h-full ${F?"flex flex-col":"flex"} gap-2`,children:[l.jsxs("div",{className:`${F?"h-40":"w-1/3"} game-panel flex flex-col min-h-0`,children:[l.jsx("div",{className:"game-panel-header text-sm",children:"Select Item"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 min-h-0",children:g.length===0?l.jsx("div",{className:"text-center text-slate-600 py-4 text-sm",children:"No items"}):l.jsx("div",{className:"space-y-1.5",children:g.map(T=>{const R=we[T.tier],P=(s==null?void 0:s.id)===T.id,$=Lt(T.plus);return l.jsxs("div",{onClick:()=>{m(),n(T)},className:`flex items-center gap-2 p-2 rounded-lg cursor-pointer border-2 transition-all active:scale-[0.98] ${P?"bg-blue-900/50 border-blue-500/70":"bg-slate-800/30 border-slate-700/30 hover:border-slate-500/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded bg-slate-900/50 flex-shrink-0 relative",children:l.jsx(rr,{item:T})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold truncate",style:{color:R.color},children:T.name}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded font-semibold",style:{color:$.color,backgroundColor:$.bgColor},children:[$.icon&&l.jsx("span",{className:"mr-0.5",children:$.icon}),"+",T.plus]}),(T.count||1)>1&&l.jsxs("span",{className:"text-xs text-blue-400",children:["x",T.count]})]})]})]},T.id)})})})]}),l.jsxs("div",{className:"flex-1 game-panel flex flex-col min-h-0",children:[l.jsx("div",{className:"game-panel-header text-sm",children:"Enhance"}),s?l.jsxs("div",{className:"flex-1 flex flex-col p-3 min-h-0 relative overflow-hidden",children:[u&&l.jsxs("div",{className:"absolute inset-0 z-10 pointer-events-none flex items-center justify-center",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute w-64 h-64 rounded-full animate-enhance-flash",style:{left:"50%",top:"50%",marginLeft:"-128px",marginTop:"-128px",background:u.type==="success"?"radial-gradient(circle, rgba(74, 222, 128, 0.5) 0%, transparent 70%)":"radial-gradient(circle, rgba(239, 68, 68, 0.4) 0%, transparent 70%)"}}),u.type==="success"&&[...Array(8)].map((T,R)=>l.jsx("div",{className:"absolute w-0.5 bg-gradient-to-t from-green-400/70 to-transparent animate-enhance-ray",style:{left:"50%",top:"50%",height:"80px",marginLeft:"-1px",transformOrigin:"top center",transform:`rotate(${R*45}deg)`,animationDelay:`${R*.03}s`}},R)),u.type==="success"&&[...Array(6)].map((T,R)=>l.jsx("div",{className:"absolute text-yellow-400 text-lg animate-enhance-sparkle",style:{left:"50%",top:"50%",marginLeft:"-8px",marginTop:"-8px",transformOrigin:"center center",transform:`rotate(${R*60}deg) translateY(-45px)`,animationDelay:`${R*.08}s`},children:""},`sparkle-${R}`)),l.jsx("div",{className:`text-5xl font-black tracking-wider whitespace-nowrap ${u.type==="success"?"animate-enhance-success":"animate-enhance-fail"}`,style:{color:u.type==="success"?"#4ade80":"#ef4444",textShadow:u.type==="success"?"0 0 20px rgba(74, 222, 128, 0.8), 0 0 40px rgba(74, 222, 128, 0.4)":"0 0 20px rgba(239, 68, 68, 0.8), 0 0 40px rgba(239, 68, 68, 0.4)"},children:u.text})]}),l.jsx("style",{children:`
                                    @keyframes enhance-flash {
                                        0% { opacity: 0; transform: scale(0.3); }
                                        20% { opacity: 1; transform: scale(1); }
                                        100% { opacity: 0; transform: scale(1.3); }
                                    }
                                    @keyframes enhance-ray {
                                        0% { opacity: 0; transform: rotate(inherit) scaleY(0); }
                                        30% { opacity: 1; transform: rotate(inherit) scaleY(1); }
                                        100% { opacity: 0; transform: rotate(inherit) scaleY(1.3); }
                                    }
                                    @keyframes enhance-success {
                                        0% { opacity: 0; transform: scale(0.5); }
                                        20% { opacity: 1; transform: scale(1.15); }
                                        35% { transform: scale(1); }
                                        70% { opacity: 1; }
                                        100% { opacity: 0; transform: scale(0.95); }
                                    }
                                    @keyframes enhance-fail {
                                        0% { opacity: 0; transform: scale(0.8); }
                                        15% { opacity: 1; transform: scale(1.05) translateX(-4px); }
                                        30% { transform: scale(1) translateX(4px); }
                                        45% { transform: translateX(-3px); }
                                        60% { transform: translateX(3px); }
                                        75% { opacity: 1; transform: translateX(0); }
                                        100% { opacity: 0; }
                                    }
                                    @keyframes enhance-sparkle {
                                        0% { opacity: 0; transform: rotate(inherit) translateY(-25px) scale(0); }
                                        30% { opacity: 1; transform: rotate(inherit) translateY(-55px) scale(1.3); }
                                        100% { opacity: 0; transform: rotate(inherit) translateY(-75px) scale(0); }
                                    }
                                    .animate-enhance-flash { animation: enhance-flash 0.8s ease-out forwards; }
                                    .animate-enhance-ray { animation: enhance-ray 0.6s ease-out forwards; }
                                    .animate-enhance-success { animation: enhance-success 0.8s ease-out forwards; }
                                    .animate-enhance-fail { animation: enhance-fail 0.6s ease-out forwards; }
                                    .animate-enhance-sparkle { animation: enhance-sparkle 0.7s ease-out forwards; }
                                `})]},u.key),l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsxs("div",{className:"w-16 h-16 rounded-lg bg-slate-900/80 border-2 border-slate-600 relative flex-shrink-0",children:[l.jsx(rr,{item:s}),s.plus>0&&l.jsxs("div",{className:"absolute -top-1.5 -right-1.5 px-1 py-0.5 text-xs font-bold rounded",style:{color:Lt(s.plus).color,backgroundColor:Lt(s.plus).bgColor,boxShadow:Lt(s.plus).glow},children:["+",s.plus]})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-bold text-base truncate",style:{color:we[s.tier].color},children:s.name}),l.jsx("div",{className:"flex items-center gap-2 mt-1",children:(()=>{const T=Lt(s.plus),R=Lt(s.plus+1),P=T.stage!==R.stage;return l.jsxs(l.Fragment,{children:[l.jsxs("span",{className:"text-sm px-1.5 py-0.5 rounded font-semibold",style:{color:T.color,backgroundColor:T.bgColor},children:[T.icon,T.icon&&" ","+",s.plus]}),l.jsx("span",{className:"text-slate-500",children:""}),l.jsxs("span",{className:`text-sm px-1.5 py-0.5 rounded font-semibold ${P?"animate-pulse":""}`,style:{color:R.color,backgroundColor:R.bgColor,boxShadow:R.glow},children:[R.icon,R.icon&&" ","+",s.plus+1]}),P&&R.name&&l.jsxs("span",{className:"text-xs font-bold animate-pulse",style:{color:R.color},children:[R.name,"!"]})]})})()})]})]}),l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[l.jsx("span",{className:"uppercase font-semibold",children:"Success Rate"}),l.jsxs("span",{className:`font-bold text-sm ${M>80?"text-green-400":M>50?"text-yellow-400":M>20?"text-orange-400":"text-red-400"}`,children:[C,"%",A>0&&l.jsxs("span",{className:"text-cyan-400",children:[" +",A,"%"]})]})]}),l.jsxs("div",{className:"h-3 bg-slate-800 rounded-lg overflow-hidden relative",children:[l.jsx("div",{className:`h-full absolute left-0 top-0 transition-all duration-300 ${M>80?"bg-green-500":M>50?"bg-yellow-500":M>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${C}%`}}),A>0&&l.jsx("div",{className:"h-full absolute top-0 bg-cyan-400 transition-all duration-300",style:{left:`${C}%`,width:`${A}%`}})]}),S>0&&l.jsxs("div",{className:"text-[10px] text-cyan-400 mt-1 text-center",children:["Pity: ",S," fails (+",A,"% bonus)"]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[l.jsxs("div",{className:"bg-slate-800/50 rounded p-2",children:[l.jsx("div",{className:"text-slate-500 text-[10px] uppercase mb-1 font-semibold",children:"Current"}),l.jsxs("div",{className:"text-red-300 text-sm font-semibold",children:["DMG +",j.dmgBonus]}),l.jsxs("div",{className:"text-green-300 text-sm font-semibold",children:["HP +",j.hpBonus]})]}),l.jsxs("div",{className:"bg-blue-900/30 rounded p-2 border border-blue-500/30",children:[l.jsx("div",{className:"text-blue-400 text-[10px] uppercase mb-1 font-semibold",children:"Next"}),l.jsxs("div",{className:"text-red-300 text-sm font-semibold",children:["DMG +",D.dmgBonus]}),l.jsxs("div",{className:"text-green-300 text-sm font-semibold",children:["HP +",D.hpBonus]})]})]}),(()=>{const T=(s.effects||[]).filter(P=>P.isAwakened),R=mu.find(P=>P>s.plus);return l.jsxs("div",{className:"mb-2 p-2 bg-gradient-to-r from-orange-900/20 to-yellow-900/20 rounded border border-orange-500/30",children:[l.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[l.jsx("span",{className:"text-yellow-400 text-sm",children:""}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-orange-300",children:"Awakening Progress"})]}),l.jsx("div",{className:"flex items-center justify-between mb-1",children:mu.map((P,$)=>{const z=s.plus>=P,V=P===R;return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold ${z?"bg-orange-500 text-white":V?"bg-orange-500/30 text-orange-300 border border-orange-500 animate-pulse":"bg-slate-700/50 text-slate-500"}`,children:z?"":P}),l.jsxs("span",{className:`text-[8px] ${z?"text-orange-300":"text-slate-500"}`,children:["+",P]})]},P)})}),T.length>0&&l.jsx("div",{className:"pt-1.5 border-t border-orange-500/20 space-y-0.5",children:T.map((P,$)=>l.jsxs("div",{className:"flex justify-between text-[10px]",children:[l.jsxs("span",{className:"text-orange-200",children:[" ",P.name]}),l.jsxs("span",{className:"text-orange-300 font-mono",children:["+",P.value]})]},$))}),R&&l.jsxs("div",{className:"mt-1 text-center text-[9px] text-yellow-400/80",children:["Next awakening at +",R," (",R-s.plus," to go)"]})]})})(),l.jsxs("div",{className:"flex justify-center flex-wrap gap-3 mb-2 py-2 bg-slate-900/50 rounded",children:[l.jsxs("div",{className:`flex items-center gap-1.5 ${t.gold>=_.gold?"opacity-100":"opacity-40"}`,children:[l.jsx(ze,{type:"gold",size:20}),l.jsx("span",{className:"text-sm font-bold text-slate-300",children:Be(_.gold)})]}),l.jsxs("div",{className:`flex items-center gap-1.5 ${t.enhanceStone>=_.enhanceStone?"opacity-100":"opacity-40"}`,children:[l.jsx(ze,{type:"enhanceStone",size:20}),l.jsx("span",{className:"text-sm font-bold text-blue-400",children:_.enhanceStone})]}),_.blessedOrb>0&&l.jsxs("div",{className:`flex items-center gap-1.5 ${t.blessedOrb>=_.blessedOrb?"opacity-100":"opacity-40"}`,children:[l.jsx(ze,{type:"blessedOrb",size:20}),l.jsx("span",{className:"text-sm font-bold text-purple-400",children:_.blessedOrb})]}),w&&k&&l.jsxs("div",{className:`flex items-center gap-1.5 ${N?"opacity-100":"opacity-40"}`,children:[l.jsx("img",{src:`./assets/gems/Icon${k.gemIcon}.png`,alt:k.name,className:"w-5 h-5",style:{imageRendering:"pixelated"}}),l.jsxs("span",{className:"text-sm font-bold",style:{color:k.color},children:["1 (",((L=t.bossStones)==null?void 0:L[s.bossSet])||0,")"]})]})]}),w&&!N&&l.jsx("div",{className:"mb-2 p-2 bg-red-900/30 border border-red-500/50 rounded text-center",children:l.jsxs("span",{className:"text-xs text-red-300 font-semibold",children:["Requires ",k==null?void 0:k.name," to enhance past +10"]})}),l.jsx("div",{className:"mt-auto space-y-1.5",children:a?l.jsxs("button",{onClick:m,className:"w-full py-2 bg-red-600 hover:bg-red-500 text-white font-bold uppercase text-sm rounded flex items-center justify-center gap-2",children:[l.jsx("span",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"STOP (+",r,")"]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:b,disabled:!B,className:`w-full py-2 font-bold uppercase text-sm rounded transition-all ${B?"bg-blue-600 hover:bg-blue-500 text-white":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:"ENHANCE"}),l.jsx("div",{className:"flex gap-1.5",children:[3,5,10].map(T=>l.jsxs("button",{onClick:()=>x(s.plus+T),disabled:!B,className:`flex-1 py-1.5 text-xs font-bold uppercase rounded transition-all ${B?"bg-purple-600/40 hover:bg-purple-600/60 text-purple-200":"bg-slate-700/30 text-slate-600 cursor-not-allowed"}`,children:["AUTO +",s.plus+T]},T))})]})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-600",children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"./assets/ui-icons/book-enhancement.png",alt:"",className:"w-16 h-16 mb-3 opacity-30 mx-auto"}),l.jsx("div",{className:"text-base",children:"Select an item"})]})})]})]})}function Jx(){var o;const{state:t,gameManager:e}=Ke(),{isMobile:s}=Ln(),n=10+Math.floor((t.level||1)/2),r=()=>{confirm(`ASCEND NOW?

This will reset your level, gold, gear, and zone progress, but you will keep your Prestige Skills and earn ${n} Prestige Stones.`)&&e.performPrestige()},i=c=>{var h;const u=((h=t.prestigeSkills)==null?void 0:h[c.id])||0,d=c.cost(u);t.prestigeStones>=d&&e.upgradePrestigeSkill(c.id,d)},a=(((o=t.zoneKills)==null?void 0:o[39])||0)>=1;return s?l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-pink-500 uppercase",children:"Prestige"}),l.jsx("p",{className:"text-slate-400 text-xs",children:"Reset for permanent power"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"bg-slate-900 px-3 py-2 rounded-lg border border-pink-500/30 text-center",children:[l.jsx("div",{className:"text-[10px] uppercase text-pink-400 font-bold",children:"Level"}),l.jsx("div",{className:"text-xl font-mono text-pink-500 font-bold",children:t.prestigeLevel||0})]}),l.jsxs("div",{className:"bg-slate-900 px-3 py-2 rounded-lg border border-blue-500/30 text-center",children:[l.jsx("div",{className:"text-[10px] uppercase text-blue-400 font-bold",children:"Stones"}),l.jsx("div",{className:"text-xl font-mono text-blue-500 font-bold",children:t.prestigeStones||0})]})]})]}),l.jsxs("div",{className:"bg-slate-950 p-3 rounded-lg border border-slate-800",children:[l.jsxs("p",{className:"text-slate-400 text-xs mb-2",children:["Defeat the Dark Wolf King in Zone 39 to unlock. Current reward: ",l.jsxs("span",{className:"text-pink-400 font-bold",children:["+",n," Prestige Stones"]})]}),l.jsx("p",{className:"text-slate-500 text-[10px] mb-2",children:"Formula: 10 + Level/2. Extra stones drop from Prestige zones (40+)."}),l.jsx("button",{onClick:r,disabled:!a,className:`w-full py-3 rounded-lg font-bold uppercase text-sm transition-all active:scale-95 ${a?"bg-pink-600 active:bg-pink-500 text-white":"bg-slate-800 text-slate-600 border border-slate-700"}`,children:a?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"./assets/ui-icons/star-ascend.png",alt:"",className:"w-5 h-5 inline-block mr-1"})," Ascend Now"]}):"Locked"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-yellow-500 font-bold uppercase text-xs mb-2 px-1",children:"Permanent Upgrades"}),l.jsx("div",{className:"space-y-2",children:gu.map(c=>{var p;const u=((p=t.prestigeSkills)==null?void 0:p[c.id])||0,d=u>=c.maxLevel,h=c.cost(u),f=(t.prestigeStones||0)>=h;return l.jsxs("div",{className:`p-3 rounded-lg border transition-all ${d?"bg-pink-900/10 border-pink-500/30":"bg-slate-800 border-slate-700"}`,children:[l.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-white text-sm",children:c.name}),l.jsx("div",{className:"text-xs text-slate-400",children:c.desc})]}),l.jsxs("div",{className:"text-xs bg-slate-900 px-2 py-1 rounded text-slate-400 border border-slate-700",children:[l.jsx("span",{className:"text-pink-400 font-mono font-bold",children:u}),"/",c.maxLevel]})]}),d?l.jsx("div",{className:"w-full py-2 text-center text-xs font-bold text-pink-500 uppercase border border-pink-500/20 rounded",children:"Max Level"}):l.jsxs("button",{onClick:()=>i(c),disabled:!f,className:`w-full py-2 rounded text-sm font-bold transition-all active:scale-95 ${f?"bg-blue-600 active:bg-blue-500 text-white":"bg-slate-700 text-slate-500 opacity-50"}`,children:["Upgrade (",h," Stones)"]})]},c.id)})})]}),l.jsxs("div",{className:"p-3 bg-slate-950/50 rounded-lg border border-slate-800/50",children:[l.jsx("h4",{className:"text-xs text-slate-500 uppercase mb-2 font-bold",children:"System Unlocks"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-slate-500",children:"P1"}),l.jsx("div",{className:"text-xs text-blue-400 font-bold",children:"Astral"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-slate-500",children:"P2"}),l.jsx("div",{className:"text-xs text-blue-400 font-bold",children:"Cosmic"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-slate-500",children:"P3"}),l.jsx("div",{className:"text-xs text-blue-400 font-bold",children:"Primordial"})]})]})]})]}):l.jsxs("div",{className:"flex flex-col h-full gap-4",children:[l.jsxs("div",{className:"flex flex-col gap-4 p-5 bg-slate-800 rounded-xl border-2 border-slate-700 shadow-xl",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-pink-500 tracking-tight uppercase",children:"Prestige System"}),l.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Reset progress for permanent power"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("div",{className:"bg-slate-900 px-5 py-3 rounded-lg border-2 border-pink-500/30 text-center min-w-[120px]",children:[l.jsx("div",{className:"text-xs uppercase text-pink-400 font-bold",children:"Prestige Level"}),l.jsx("div",{className:"text-3xl font-mono text-pink-500 font-bold",children:t.prestigeLevel||0})]}),l.jsxs("div",{className:"bg-slate-900 px-5 py-3 rounded-lg border-2 border-blue-500/30 text-center min-w-[120px]",children:[l.jsx("div",{className:"text-xs uppercase text-blue-400 font-bold",children:"Prestige Stones"}),l.jsx("div",{className:"text-3xl font-mono text-blue-500 font-bold",children:t.prestigeStones||0})]})]})]}),l.jsxs("div",{className:"bg-slate-950 p-5 rounded-lg border-2 border-slate-800 flex justify-between items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:"Perform Ascension"}),l.jsxs("p",{className:"text-slate-500 text-sm max-w-md",children:["Requirement: Defeat the Dark Wolf King in Zone 39. Resets all progress but rewards ",l.jsxs("span",{className:"text-pink-400 font-bold",children:["+",n," Prestige Stones"]})," and increases Prestige Level."]}),l.jsx("p",{className:"text-slate-600 text-xs mt-1",children:"Formula: 10 + Level/2. Extra stones drop from Prestige zones (40+)."})]}),l.jsx("button",{onClick:r,disabled:!a,className:`px-10 py-5 rounded-lg font-bold uppercase tracking-widest text-lg transition-all ${a?"bg-pink-600 hover:bg-pink-500 text-white shadow-[0_0_30px_rgba(236,72,153,0.5)]":"bg-slate-800 text-slate-600 cursor-not-allowed border-2 border-slate-700"}`,children:a?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"./assets/ui-icons/star-ascend.png",alt:"",className:"w-6 h-6 inline-block mr-2"})," Ascend"]}):"Locked"})]})]}),l.jsxs("div",{className:"flex-1 overflow-auto custom-scrollbar",children:[l.jsx("h3",{className:"text-yellow-500 font-bold uppercase text-sm mb-4 tracking-widest",children:"Permanent Upgrades"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:gu.map(c=>{var p;const u=((p=t.prestigeSkills)==null?void 0:p[c.id])||0,d=u>=c.maxLevel,h=c.cost(u),f=(t.prestigeStones||0)>=h;return l.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${d?"bg-pink-900/10 border-pink-500/30":"bg-slate-800 border-slate-700 hover:border-slate-600"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-white text-base",children:c.name}),l.jsx("div",{className:"text-sm text-slate-500",children:c.desc})]}),l.jsxs("div",{className:"text-sm bg-slate-900 px-3 py-1.5 rounded-lg text-slate-400 border-2 border-slate-700",children:["Lv. ",l.jsx("span",{className:"text-pink-400 font-mono font-bold",children:u})," / ",c.maxLevel]})]}),d?l.jsx("div",{className:"w-full py-2.5 text-center text-sm font-bold text-pink-500 uppercase tracking-widest mt-2 border-2 border-pink-500/20 rounded-lg",children:"Max Level"}):l.jsxs("button",{onClick:()=>i(c),disabled:!f,className:`w-full py-2.5 rounded-lg text-sm font-bold mt-2 transition-all ${f?"bg-blue-600 hover:bg-blue-500 text-white shadow-lg":"bg-slate-700 text-slate-500 cursor-not-allowed opacity-50"}`,children:["Upgrade (",h," Stones)"]})]},c.id)})})]}),l.jsxs("div",{className:"p-4 bg-slate-950/50 rounded-lg border-2 border-slate-800/50",children:[l.jsx("h4",{className:"text-sm text-slate-500 uppercase tracking-widest mb-3 font-bold",children:"System Unlocks"}),l.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Prestige 1"}),l.jsx("div",{className:"text-base text-blue-400 font-bold",children:"Astral Realm"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Prestige 2"}),l.jsx("div",{className:"text-base text-blue-400 font-bold",children:"Cosmic Realm"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Prestige 3"}),l.jsx("div",{className:"text-base text-blue-400 font-bold",children:"Primordial Realm"})]})]})]})]})}const Ou=[{id:"kills_100",name:"First Blood",description:"Defeat 100 enemies",category:"combat",target:100,getProgress:t=>t.kills||0,check:t=>t.kills>=100,reward:{silver:500}},{id:"kills_1000",name:"Warrior",description:"Defeat 1,000 enemies",category:"combat",target:1e3,getProgress:t=>t.kills||0,check:t=>t.kills>=1e3,reward:{silver:2e3,statPoints:5}},{id:"kills_10000",name:"Slayer",description:"Defeat 10,000 enemies",category:"combat",target:1e4,getProgress:t=>t.kills||0,check:t=>t.kills>=1e4,reward:{silver:1e4,statPoints:10}},{id:"kills_100000",name:"Legend",description:"Defeat 100,000 enemies",category:"combat",target:1e5,getProgress:t=>t.kills||0,check:t=>t.kills>=1e5,reward:{silver:5e4,statPoints:25}},{id:"silver_1000",name:"Pocket Change",description:"Earn 1,000 total silver",category:"wealth",target:1e3,getProgress:t=>t.totalGold||0,check:t=>(t.totalGold||0)>=1e3,reward:{enhanceStone:10}},{id:"silver_10000",name:"Wealthy",description:"Earn 10,000 total silver",category:"wealth",target:1e4,getProgress:t=>t.totalGold||0,check:t=>(t.totalGold||0)>=1e4,reward:{enhanceStone:50,blessedOrb:5}},{id:"silver_100000",name:"Rich",description:"Earn 100,000 total silver",category:"wealth",target:1e5,getProgress:t=>t.totalGold||0,check:t=>(t.totalGold||0)>=1e5,reward:{enhanceStone:200,blessedOrb:20}},{id:"silver_1000000",name:"Millionaire",description:"Earn 1,000,000 total silver",category:"wealth",target:1e6,getProgress:t=>t.totalGold||0,check:t=>(t.totalGold||0)>=1e6,reward:{celestialShard:50,statPoints:20}},{id:"level_10",name:"Apprentice",description:"Reach level 10",category:"progress",target:10,getProgress:t=>t.level||1,check:t=>t.level>=10,reward:{silver:1e3}},{id:"level_25",name:"Journeyman",description:"Reach level 25",category:"progress",target:25,getProgress:t=>t.level||1,check:t=>t.level>=25,reward:{silver:5e3,statPoints:5}},{id:"level_50",name:"Expert",description:"Reach level 50",category:"progress",target:50,getProgress:t=>t.level||1,check:t=>t.level>=50,reward:{silver:15e3,statPoints:10}},{id:"level_100",name:"Master",description:"Reach level 100",category:"progress",target:100,getProgress:t=>t.level||1,check:t=>t.level>=100,reward:{silver:5e4,statPoints:25}},{id:"zone_5",name:"Explorer",description:"Unlock zone 5",category:"exploration",target:5,getProgress:t=>Object.keys(t.zoneKills||{}).length,check:t=>Object.keys(t.zoneKills||{}).length>=5,reward:{silver:2e3}},{id:"zone_10",name:"Adventurer",description:"Unlock zone 10",category:"exploration",target:10,getProgress:t=>Object.keys(t.zoneKills||{}).length,check:t=>Object.keys(t.zoneKills||{}).length>=10,reward:{silver:1e4,enhanceStone:50}},{id:"zone_15",name:"Veteran",description:"Unlock zone 15",category:"exploration",target:15,getProgress:t=>Object.keys(t.zoneKills||{}).length,check:t=>Object.keys(t.zoneKills||{}).length>=15,reward:{silver:25e3,blessedOrb:25}},{id:"zone_20",name:"Conqueror",description:"Unlock zone 20",category:"exploration",target:20,getProgress:t=>Object.keys(t.zoneKills||{}).length,check:t=>Object.keys(t.zoneKills||{}).length>=20,reward:{celestialShard:25,statPoints:15}},{id:"enhance_plus5",name:"Upgrader",description:"Enhance any item to +5",category:"crafting",target:5,getProgress:t=>{const e=[...t.inventory||[],...Object.values(t.gear||{})];return Math.max(0,...e.map(s=>(s==null?void 0:s.plus)||0))},check:t=>[...t.inventory||[],...Object.values(t.gear||{})].some(s=>s&&s.plus>=5),reward:{enhanceStone:25}},{id:"enhance_plus10",name:"Artisan",description:"Enhance any item to +10",category:"crafting",target:10,getProgress:t=>{const e=[...t.inventory||[],...Object.values(t.gear||{})];return Math.max(0,...e.map(s=>(s==null?void 0:s.plus)||0))},check:t=>[...t.inventory||[],...Object.values(t.gear||{})].some(s=>s&&s.plus>=10),reward:{blessedOrb:15,enhanceStone:100}},{id:"enhance_plus15",name:"Blacksmith",description:"Enhance any item to +15",category:"crafting",target:15,getProgress:t=>{const e=[...t.inventory||[],...Object.values(t.gear||{})];return Math.max(0,...e.map(s=>(s==null?void 0:s.plus)||0))},check:t=>[...t.inventory||[],...Object.values(t.gear||{})].some(s=>s&&s.plus>=15),reward:{celestialShard:10,blessedOrb:50}},{id:"enhance_plus20",name:"Master Smith",description:"Enhance any item to +20",category:"crafting",target:20,getProgress:t=>{const e=[...t.inventory||[],...Object.values(t.gear||{})];return Math.max(0,...e.map(s=>(s==null?void 0:s.plus)||0))},check:t=>[...t.inventory||[],...Object.values(t.gear||{})].some(s=>s&&s.plus>=20),reward:{celestialShard:50,statPoints:20}},{id:"boss_first",name:"Boss Slayer",description:"Defeat your first boss",category:"combat",target:1,getProgress:t=>[4,9,14,19].some(s=>{var n;return(((n=t.zoneKills)==null?void 0:n[s])||0)>=1})?1:0,check:t=>[4,9,14,19].some(s=>{var n;return(((n=t.zoneKills)==null?void 0:n[s])||0)>=1}),reward:{silver:5e3,enhanceStone:25}},{id:"boss_all",name:"Champion",description:"Defeat all bosses",category:"combat",target:4,getProgress:t=>[4,9,14,19].filter(s=>{var n;return(((n=t.zoneKills)==null?void 0:n[s])||0)>=1}).length,check:t=>[4,9,14,19].every(s=>{var n;return(((n=t.zoneKills)==null?void 0:n[s])||0)>=1}),reward:{celestialShard:25,statPoints:15}},{id:"prestige_first",name:"Reborn",description:"Prestige for the first time",category:"prestige",target:1,getProgress:t=>t.prestigeLevel||0,check:t=>(t.prestigeLevel||0)>=1,reward:{prestigeStones:10}},{id:"prestige_5",name:"Transcendent",description:"Reach prestige level 5",category:"prestige",target:5,getProgress:t=>t.prestigeLevel||0,check:t=>(t.prestigeLevel||0)>=5,reward:{prestigeStones:50}}],ds={combat:{name:"Combat",color:"#ef4444",icon:"C"},wealth:{name:"Wealth",color:"#fbbf24",icon:"W"},progress:{name:"Progress",color:"#a855f7",icon:"P"},exploration:{name:"Exploration",color:"#22c55e",icon:"E"},crafting:{name:"Crafting",color:"#3b82f6",icon:"F"},prestige:{name:"Prestige",color:"#ec4899",icon:"R"}};function xk(t,e=[]){const s=[];for(const n of Ou)if(!e.includes(n.id))try{n.check(t)&&s.push(n)}catch{}return s}function yk(t,e){e.silver&&(t.gold+=e.silver),e.enhanceStone&&(t.enhanceStone+=e.enhanceStone),e.blessedOrb&&(t.blessedOrb+=e.blessedOrb),e.celestialShard&&(t.celestialShard+=e.celestialShard),e.prestigeStones&&(t.prestigeStones=(t.prestigeStones||0)+e.prestigeStones),e.statPoints&&(t.statPoints=(t.statPoints||0)+e.statPoints)}function ey(){const{state:t,gameManager:e,addToast:s}=Ke(),{isMobile:n}=Ln(),r=t.unlockedAchievements||[];I.useEffect(()=>{const c=xk(t,r);c.length>0&&e.setState(u=>{const d={...u},h=[...u.unlockedAchievements||[]];for(const f of c)h.includes(f.id)||(h.push(f.id),yk(d,f.reward),s("achievement",f));return d.unlockedAchievements=h,d})},[t.kills,t.totalGold,t.level,t.prestigeLevel,t.inventory,t.gear,t.zoneKills,s]);const i=r.length,a=Ou.length,o={};for(const c of Ou)o[c.category]||(o[c.category]=[]),o[c.category].push(c);return n?l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center justify-between px-1 py-2 border-b border-slate-800",children:[l.jsx("span",{className:"font-bold text-slate-300 text-sm",children:"Achievements"}),l.jsxs("span",{className:"text-sm text-yellow-400 font-bold",children:[i,"/",a]})]}),l.jsx("div",{className:"space-y-3",children:Object.entries(o).map(([c,u])=>{var d,h,f,p;return l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-bold uppercase tracking-wider mb-2 flex items-center gap-2",style:{color:((d=ds[c])==null?void 0:d.color)||"#94a3b8"},children:[l.jsx("span",{className:"w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:`${((h=ds[c])==null?void 0:h.color)||"#94a3b8"}30`},children:((f=ds[c])==null?void 0:f.icon)||"?"}),((p=ds[c])==null?void 0:p.name)||c]}),l.jsx("div",{className:"space-y-2",children:u.map(g=>{const v=r.includes(g.id);return l.jsx(Q0,{achievement:g,isUnlocked:v,state:t,isMobile:!0},g.id)})})]},c)})})]}):l.jsxs("div",{className:"h-full flex flex-col gap-2",children:[l.jsx("div",{className:"game-panel",children:l.jsxs("div",{className:"game-panel-header flex justify-between items-center",children:[l.jsx("span",{className:"text-sm",children:"Achievements"}),l.jsxs("span",{className:"text-sm text-yellow-400",children:[i," / ",a," Unlocked"]})]})}),l.jsx("div",{className:"flex-1 game-panel flex flex-col min-h-0",children:l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 min-h-0 space-y-4",children:Object.entries(o).map(([c,u])=>{var d,h,f,p;return l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-bold uppercase tracking-wider mb-2 px-2 flex items-center gap-2",style:{color:((d=ds[c])==null?void 0:d.color)||"#94a3b8"},children:[l.jsx("span",{className:"w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:`${((h=ds[c])==null?void 0:h.color)||"#94a3b8"}30`},children:((f=ds[c])==null?void 0:f.icon)||"?"}),((p=ds[c])==null?void 0:p.name)||c]}),l.jsx("div",{className:"space-y-1.5",children:u.map(g=>{const v=r.includes(g.id);return l.jsx(Q0,{achievement:g,isUnlocked:v,state:t},g.id)})})]},c)})})})]})}function Q0({achievement:t,isUnlocked:e,state:s,isMobile:n}){const r=ds[t.category],i=(r==null?void 0:r.color)||"#94a3b8";let a=0,o=0;try{a=t.getProgress(s),o=Math.min(100,a/t.target*100)}catch{}return l.jsx("div",{className:`p-3 rounded-lg border transition-all ${e?"bg-slate-800/60 border-yellow-500/40":"bg-slate-900/40 border-slate-700/30"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`${n?"w-8 h-8":"w-10 h-10"} rounded-lg flex items-center justify-center text-sm font-bold flex-shrink-0 ${e?"bg-yellow-500/20":"bg-slate-800"}`,style:{color:e?"#fbbf24":i},children:e?l.jsx("svg",{className:n?"w-4 h-4":"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):(r==null?void 0:r.icon)||"?"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:`font-bold ${n?"text-sm":""} ${e?"text-yellow-400":"text-slate-300"}`,children:t.name}),e&&l.jsx("span",{className:"text-[10px] text-green-400 font-bold",children:"DONE"})]}),l.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:t.description}),!e&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mb-1",children:[l.jsx("span",{children:"Progress"}),l.jsxs("span",{children:[Be(Math.min(a,t.target))," / ",Be(t.target)]})]}),l.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${o}%`,backgroundColor:i}})})]}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[t.reward.silver&&l.jsx($n,{label:`+${Be(t.reward.silver)}s`,color:"#94a3b8"}),t.reward.enhanceStone&&l.jsx($n,{label:`+${t.reward.enhanceStone} E.St`,color:"#3b82f6"}),t.reward.blessedOrb&&l.jsx($n,{label:`+${t.reward.blessedOrb} B.Orb`,color:"#a855f7"}),t.reward.celestialShard&&l.jsx($n,{label:`+${t.reward.celestialShard} C.Sh`,color:"#ec4899"}),t.reward.statPoints&&l.jsx($n,{label:`+${t.reward.statPoints} Pts`,color:"#22c55e"}),t.reward.prestigeStones&&l.jsx($n,{label:`+${t.reward.prestigeStones} P.St`,color:"#f472b6"})]})]})]})})}function $n({label:t,color:e}){return l.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-semibold",style:{backgroundColor:`${e}20`,color:e},children:t})}function Z0({label:t,value:e,onChange:s,muted:n,onToggleMute:r,icon:i}){return l.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xl",children:i}),l.jsx("span",{className:"font-semibold text-slate-200",children:t})]}),l.jsx("button",{onClick:r,className:`px-3 py-2 rounded text-sm font-bold transition-all active:scale-95 ${n?"bg-red-500/30 text-red-400 hover:bg-red-500/40 active:bg-red-500/50":"bg-green-500/20 text-green-400 hover:bg-green-500/30 active:bg-green-500/40"}`,children:n?"MUTED":"ON"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:"0",max:"100",value:Math.round(e*100),onChange:a=>s(parseInt(a.target.value)/100),disabled:n,className:`flex-1 h-2 rounded-lg appearance-none cursor-pointer ${n?"bg-slate-700":"bg-slate-600"}`,style:{background:n?"#334155":`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${e*100}%, #334155 ${e*100}%, #334155 100%)`}}),l.jsxs("span",{className:`w-12 text-right font-mono text-sm ${n?"text-slate-600":"text-slate-300"}`,children:[Math.round(e*100),"%"]})]})]})}function ty(){var S;const{state:t,gameManager:e}=Ke(),[s,n]=I.useState(Q.masterVolume),[r,i]=I.useState(Q.musicVolume),[a,o]=I.useState(Q.sfxVolume),[c,u]=I.useState(Q.musicMuted),[d,h]=I.useState(Q.sfxMuted),f=(t==null?void 0:t.textSize)??"normal",p=(t==null?void 0:t.inventorySort)??"none";I.useEffect(()=>{f==="normal"?document.body.removeAttribute("data-text-size"):document.body.setAttribute("data-text-size",f)},[f]);const g=A=>{e==null||e.setState(C=>({...C,textSize:A}))},v=A=>{e==null||e.setState(C=>({...C,inventorySort:A}))},b=A=>{n(A),Q.setMasterVolume(A)},x=A=>{i(A),Q.setMusicVolume(A)},m=A=>{o(A),Q.setSfxVolume(A)},y=()=>{const A=Q.toggleMusicMute();u(A)},w=()=>{const A=Q.toggleSfxMute();h(A)},k=()=>{Q.init(),Q.playSfxLevelUp()},_=()=>{Q.init(),Q.currentMusic&&!Q.currentMusic.paused?Q.stopMusic():Q.playMusic("zone",0)};return l.jsx("div",{className:"h-full flex flex-col p-4 overflow-y-auto custom-scrollbar",children:l.jsxs("div",{className:"max-w-lg mx-auto w-full space-y-6",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-200 mb-2",children:"Settings"}),l.jsx("p",{className:"text-slate-500 text-sm",children:"Adjust audio and game settings"})]}),l.jsxs("div",{className:"game-panel",children:[l.jsx("div",{className:"game-panel-header",children:"Audio Settings"}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 border border-slate-700",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{className:"font-bold text-white",children:"Master Volume"})]})}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:"0",max:"100",value:Math.round(s*100),onChange:A=>b(parseInt(A.target.value)/100),className:"flex-1 h-3 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #8b5cf6 0%, #8b5cf6 ${s*100}%, #334155 ${s*100}%, #334155 100%)`}}),l.jsxs("span",{className:"w-12 text-right font-mono text-sm text-white font-bold",children:[Math.round(s*100),"%"]})]})]}),l.jsx(Z0,{label:"Music",icon:"",value:r,onChange:x,muted:c,onToggleMute:y}),l.jsx(Z0,{label:"Sound Effects",icon:"",value:a,onChange:m,muted:d,onToggleMute:w}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{onClick:_,className:"flex-1 py-3 bg-purple-600/30 hover:bg-purple-600/50 active:bg-purple-600/60 active:scale-95 text-purple-300 rounded-lg font-semibold transition-all",children:Q.currentMusic&&!((S=Q.currentMusic)!=null&&S.paused)?"Stop Music":"Test Music"}),l.jsx("button",{onClick:k,className:"flex-1 py-3 bg-blue-600/30 hover:bg-blue-600/50 active:bg-blue-600/60 active:scale-95 text-blue-300 rounded-lg font-semibold transition-all",children:"Test SFX"})]})]})]}),l.jsxs("div",{className:"game-panel",children:[l.jsx("div",{className:"game-panel-header",children:"Display Settings"}),l.jsx("div",{className:"p-4 space-y-4",children:l.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 border border-slate-700",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{children:[l.jsx("span",{className:"font-bold text-white",children:"Text Size"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Increase text size for better readability"})]})}),l.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"normal",label:"Normal"},{id:"large",label:"Large"},{id:"xlarge",label:"X-Large"}].map(A=>l.jsx("button",{onClick:()=>g(A.id),className:`px-4 py-2 rounded text-sm font-bold transition-all ${f===A.id?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:A.label},A.id))})]})})]}),l.jsxs("div",{className:"game-panel",children:[l.jsx("div",{className:"game-panel-header",children:"Inventory"}),l.jsx("div",{className:"p-4 space-y-4",children:l.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-4 border border-slate-700",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{children:[l.jsx("span",{className:"font-bold text-white",children:"Inventory Sort"}),l.jsx("p",{className:"text-xs text-slate-500",children:"How to organize inventory items"})]})}),l.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"none",label:"None"},{id:"slot",label:"By Slot"},{id:"tier",label:"By Rarity"},{id:"score",label:"By Power"}].map(A=>l.jsx("button",{onClick:()=>v(A.id),className:`px-3 py-1.5 rounded text-sm font-bold transition-all ${p===A.id?"bg-blue-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:A.label},A.id))})]})})]}),l.jsxs("div",{className:"game-panel",children:[l.jsx("div",{className:"game-panel-header",children:"Credits"}),l.jsxs("div",{className:"p-4 space-y-3 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Game"}),l.jsx("span",{className:"text-slate-200",children:"Gear Grinder"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Music"}),l.jsx("span",{className:"text-slate-200",children:"VXRGE"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-slate-400",children:"Engine"}),l.jsx("span",{className:"text-slate-200",children:"React + PixiJS"})]})]})]}),l.jsxs("div",{className:"text-center text-slate-500 text-xs",children:["Press ",l.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-800 rounded font-mono",children:"?"})," for keyboard shortcuts"]})]})})}const sy=[{day:1,rewards:{gold:500,enhanceStone:10},description:"Welcome back!"},{day:2,rewards:{gold:1e3,enhanceStone:20},description:"Keep it up!"},{day:3,rewards:{gold:2e3,enhanceStone:30,blessedOrb:5},description:"Three in a row!"},{day:4,rewards:{gold:3e3,enhanceStone:50,blessedOrb:10},description:"Halfway there!"},{day:5,rewards:{gold:5e3,enhanceStone:75,blessedOrb:15,celestialShard:5},description:"Five day streak!"},{day:6,rewards:{gold:7500,enhanceStone:100,blessedOrb:20,celestialShard:10},description:"Almost there!"},{day:7,rewards:{gold:15e3,enhanceStone:200,blessedOrb:50,celestialShard:25,statPoints:5},description:"Weekly Bonus!",isWeeklyBonus:!0}];function yc(t){const e=Math.floor((t-1)/7),s=(t-1)%7+1,n=sy[s-1],r=1+e*.5,i={};for(const[a,o]of Object.entries(n.rewards))i[a]=Math.floor(o*r);return{...n,day:t,rewards:i,multiplier:r>1?`${r}x`:null}}function ny(t){if(!t)return!0;const e=new Date,s=new Date(t),n=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r=Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate());return n>r}function vk(t){if(!t)return!1;const e=new Date,s=new Date(t),n=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r=Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate());return Math.floor((n-r)/(1e3*60*60*24))>1}function bk(t,e){e.gold&&(t.gold+=e.gold),e.enhanceStone&&(t.enhanceStone+=e.enhanceStone),e.blessedOrb&&(t.blessedOrb+=e.blessedOrb),e.celestialShard&&(t.celestialShard+=e.celestialShard),e.prestigeStones&&(t.prestigeStones=(t.prestigeStones||0)+e.prestigeStones),e.statPoints&&(t.statPoints=(t.statPoints||0)+e.statPoints)}function J0(){const t=new Date,s=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()+1))-t,n=Math.floor(s/(1e3*60*60)),r=Math.floor(s%(1e3*60*60)/(1e3*60)),i=Math.floor(s%(1e3*60)/1e3);return{hours:n,minutes:r,seconds:i}}function ry({onClose:t}){const{state:e,gameManager:s}=Ke(),[n,r]=I.useState(J0());I.useEffect(()=>{const f=setInterval(()=>{r(J0())},1e3);return()=>clearInterval(f)},[]);const i=e.dailyStreak||0,a=e.lastDailyReward||0,o=ny(a),c=vk(a),u=c?1:i+1,d=yc(u),h=()=>{if(!o)return;s.setState(p=>{const g={...p},v=c?1:(p.dailyStreak||0)+1;g.dailyStreak=v,g.lastDailyReward=Date.now();const b=yc(v);return bk(g,b.rewards),g});const f=yc(u);f.rewards.gold&&s.emit("floatingText",{text:`+${Be(f.rewards.gold)}g`,type:"heal",target:"player"}),t()};return I.useEffect(()=>{const f=p=>{p.key==="Escape"&&t()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[t]),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:t,children:l.jsxs("div",{className:"bg-slate-800 rounded-xl border-2 border-slate-700 p-6 max-w-lg w-full mx-4 shadow-2xl",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:"Daily Rewards"}),l.jsx("p",{className:"text-sm text-slate-400",children:i>0?l.jsxs("span",{children:["Current streak: ",l.jsxs("span",{className:"text-yellow-400 font-bold",children:[i," days"]})]}):l.jsx("span",{children:"Start your streak today!"})})]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors p-1",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c&&i>0&&l.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/40 rounded-lg",children:l.jsx("p",{className:"text-sm text-red-300",children:"You missed a day! Your streak will reset to 1."})}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:sy.map((f,p)=>{const g=p+1,v=g<=(c?0:i),b=g===(u<=7?u:(u-1)%7+1),x=f.isWeeklyBonus;return l.jsxs("div",{className:`relative p-2 rounded-lg text-center transition-all ${v?"bg-green-600/30 border border-green-500/50":b&&o?"bg-yellow-500/30 border-2 border-yellow-400 animate-pulse":"bg-slate-700/50 border border-slate-600/50"} ${x?"ring-2 ring-purple-500/50":""}`,children:[l.jsxs("div",{className:"text-[10px] text-slate-400 mb-1",children:["Day ",g]}),l.jsx("div",{className:"text-lg",children:v?l.jsx("span",{className:"text-green-400",children:""}):x?l.jsx("img",{src:"./assets/ui-icons/chest-daily-rewards.png",alt:"",className:"w-5 h-5"}):l.jsx("img",{src:"./assets/ui-icons/chest-gems-daily-alt.png",alt:"",className:"w-5 h-5"})})]},g)})}),l.jsxs("div",{className:`p-4 rounded-xl mb-4 ${o?"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border border-yellow-500/30":"bg-slate-700/50 border border-slate-600/50"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-white",children:o?`Day ${u} Reward`:"Already Claimed Today"}),l.jsx("p",{className:"text-sm text-slate-400",children:d.description}),d.multiplier&&l.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[d.multiplier," bonus!"]})]}),d.isWeeklyBonus&&l.jsx("div",{className:"px-2 py-1 bg-purple-500/30 rounded text-xs text-purple-300 font-bold",children:"WEEKLY BONUS"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.rewards.gold&&l.jsx(Ua,{type:"gold",value:d.rewards.gold}),d.rewards.enhanceStone&&l.jsx(Ua,{type:"enhanceStone",value:d.rewards.enhanceStone}),d.rewards.blessedOrb&&l.jsx(Ua,{type:"blessedOrb",value:d.rewards.blessedOrb}),d.rewards.celestialShard&&l.jsx(Ua,{type:"celestialShard",value:d.rewards.celestialShard}),d.rewards.statPoints&&l.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/60 rounded-lg p-2",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-slate-400",children:"Stat Points"}),l.jsxs("p",{className:"text-sm font-bold text-green-400",children:["+",d.rewards.statPoints]})]})]})]})]}),o?l.jsx("button",{onClick:h,className:"w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-black font-bold rounded-lg transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:"Claim Reward!"}):l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Next reward in:"}),l.jsxs("p",{className:"text-2xl font-mono font-bold text-yellow-400",children:[String(n.hours).padStart(2,"0"),":",String(n.minutes).padStart(2,"0"),":",String(n.seconds).padStart(2,"0")]})]})]})})}function Ua({type:t,value:e}){const s={gold:"text-yellow-400",enhanceStone:"text-blue-400",blessedOrb:"text-purple-400",celestialShard:"text-yellow-300"},n={gold:"Silver",enhanceStone:"E.Stone",blessedOrb:"B.Orb",celestialShard:"C.Shard"};return l.jsxs("div",{className:"flex items-center gap-2 bg-slate-800/60 rounded-lg p-2",children:[l.jsx(ze,{type:t,size:24}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-slate-400",children:n[t]}),l.jsxs("p",{className:`text-sm font-bold ${s[t]}`,children:["+",Be(e)]})]})]})}function wk(){const{state:t}=Ke();return ny(t.lastDailyReward)}function Sk({rewards:t,onClose:e}){I.useEffect(()=>{const n=r=>{(r.key==="Escape"||r.key==="Enter"||r.key===" ")&&e()};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e]);const s=n=>{if(n<60)return`${n} seconds`;if(n<3600){const c=Math.floor(n/60);return`${c} minute${c!==1?"s":""}`}const r=Math.floor(n/3600),i=Math.floor(n%3600/60);if(r<24)return`${r}h ${i}m`;const a=Math.floor(r/24),o=r%24;return`${a}d ${o}h`};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fadeIn",onClick:e,children:l.jsxs("div",{className:"bg-gradient-to-b from-slate-800 to-slate-900 rounded-2xl border-2 border-yellow-500/50 p-6 max-w-md w-full mx-4 shadow-2xl animate-scaleIn",onClick:n=>n.stopPropagation(),style:{boxShadow:"0 0 60px rgba(251, 191, 36, 0.3), 0 0 100px rgba(251, 191, 36, 0.1)"},children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-5xl mb-3",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Welcome Back!"}),l.jsxs("p",{className:"text-slate-400",children:["You were away for ",l.jsx("span",{className:"text-yellow-400 font-semibold",children:s(t.time)})]})]}),l.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 mb-6 border border-slate-700/50",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-400 mb-3 text-center uppercase tracking-wider",children:"Offline Progress"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between bg-slate-700/40 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"./assets/ui-icons/sword-loading.png",alt:"",className:"w-7 h-7"}),l.jsx("span",{className:"text-slate-300",children:"Enemies Defeated"})]}),l.jsxs("span",{className:"text-xl font-bold text-red-400",children:["+",Be(t.kills)]})]}),l.jsxs("div",{className:"flex items-center justify-between bg-slate-700/40 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ze,{type:"gold",size:28}),l.jsx("span",{className:"text-slate-300",children:"Silver Earned"})]}),l.jsxs("span",{className:"text-xl font-bold text-yellow-400",children:["+",Be(t.gold)]})]}),l.jsxs("div",{className:"flex items-center justify-between bg-slate-700/40 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:"./assets/ui-icons/star-prestige.png",alt:"",className:"w-7 h-7"}),l.jsx("span",{className:"text-slate-300",children:"Experience Gained"})]}),l.jsxs("span",{className:"text-xl font-bold text-blue-400",children:["+",Be(t.xp)]})]})]})]}),l.jsx("button",{onClick:e,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-black font-bold text-lg rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-lg",children:"Continue Playing"}),l.jsx("p",{className:"text-center text-xs text-slate-500 mt-4",children:"Press Enter or click anywhere to close"})]})})}function _k({toast:t,onDismiss:e}){const[s,n]=I.useState(!1),[r,i]=I.useState(!1);I.useEffect(()=>{requestAnimationFrame(()=>n(!0));const o=setTimeout(()=>{i(!0),setTimeout(e,300)},4e3);return()=>clearTimeout(o)},[e]);const a=()=>{i(!0),setTimeout(e,300)};return t.type==="achievement"?l.jsx(kk,{achievement:t.data,isVisible:s,isExiting:r,onClick:a}):t.type==="skill"?l.jsx(Ck,{skill:t.data,isVisible:s,isExiting:r,onClick:a}):null}function kk({achievement:t,isVisible:e,isExiting:s,onClick:n}){const r=ds[t.category],i=t.reward;return l.jsx("div",{onClick:n,className:`
                fixed bottom-6 left-1/2 z-50 cursor-pointer
                transform transition-all duration-300 ease-out
                ${e&&!s?"-translate-x-1/2 translate-y-0 opacity-100":"-translate-x-1/2 translate-y-8 opacity-0"}
            `,children:l.jsxs("div",{className:"flex items-center gap-4 px-5 py-4 rounded-xl border-2 shadow-2xl min-w-[320px] max-w-[450px]",style:{backgroundColor:"rgba(30, 41, 59, 0.95)",borderColor:(r==null?void 0:r.color)||"#fbbf24",boxShadow:`0 0 30px ${(r==null?void 0:r.color)||"#fbbf24"}40, 0 10px 40px rgba(0,0,0,0.5)`},children:[l.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl flex-shrink-0",style:{backgroundColor:`${(r==null?void 0:r.color)||"#fbbf24"}30`},children:l.jsx("img",{src:"./assets/ui-icons/crown-achievements.png",alt:"",className:"w-8 h-8"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-xs uppercase tracking-wider font-bold mb-0.5",style:{color:(r==null?void 0:r.color)||"#fbbf24"},children:"Achievement Unlocked!"}),l.jsx("div",{className:"text-white font-bold text-lg truncate",children:t.name}),l.jsx("div",{className:"text-slate-400 text-sm truncate",children:t.description})]}),l.jsxs("div",{className:"flex flex-col gap-1 text-right flex-shrink-0",children:[i.silver&&l.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[l.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:["+",Be(i.silver)]}),l.jsx(ze,{type:"gold",size:16})]}),i.enhanceStone&&l.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[l.jsxs("span",{className:"text-sm font-bold text-blue-400",children:["+",i.enhanceStone]}),l.jsx(ze,{type:"enhanceStone",size:16})]}),i.blessedOrb&&l.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[l.jsxs("span",{className:"text-sm font-bold text-purple-400",children:["+",i.blessedOrb]}),l.jsx(ze,{type:"blessedOrb",size:16})]}),i.celestialShard&&l.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[l.jsxs("span",{className:"text-sm font-bold text-yellow-300",children:["+",i.celestialShard]}),l.jsx(ze,{type:"celestialShard",size:16})]}),i.statPoints&&l.jsxs("div",{className:"flex items-center gap-1.5 justify-end",children:[l.jsxs("span",{className:"text-sm font-bold text-green-400",children:["+",i.statPoints," SP"]}),l.jsx("span",{className:"text-green-400",children:""})]})]})]})})}function Ck({skill:t,isVisible:e,isExiting:s,onClick:n}){return l.jsx("div",{onClick:n,className:`
                fixed bottom-6 left-1/2 z-50 cursor-pointer
                transform transition-all duration-300 ease-out
                ${e&&!s?"-translate-x-1/2 translate-y-0 opacity-100":"-translate-x-1/2 translate-y-8 opacity-0"}
            `,children:l.jsxs("div",{className:"flex items-center gap-4 px-5 py-4 rounded-xl border-2 shadow-2xl min-w-[320px] max-w-[450px]",style:{backgroundColor:"rgba(30, 41, 59, 0.95)",borderColor:"#a855f7",boxShadow:"0 0 30px rgba(168, 85, 247, 0.4), 0 10px 40px rgba(0,0,0,0.5)"},children:[l.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center flex-shrink-0 bg-purple-500/30",children:l.jsx("img",{src:"./assets/ui-icons/star-prestige.png",alt:"",className:"w-8 h-8"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-xs uppercase tracking-wider font-bold mb-0.5 text-purple-400",children:"Skill Unlocked!"}),l.jsx("div",{className:"text-white font-bold text-lg truncate",children:t.name}),l.jsx("div",{className:"text-slate-400 text-sm truncate",children:t.description})]}),l.jsx("div",{className:"flex-shrink-0 text-right",children:l.jsx("div",{className:"text-sm font-bold text-purple-300",children:t.effect})})]})})}function Mk({toasts:t,onDismiss:e}){const s=t[0];return s?l.jsx(_k,{toast:s,onDismiss:()=>e(s.id)},s.id):null}const Nk={thorns:t=>`Reflect ${t}% damage back to attackers`,lifesteal:t=>`Heal for ${t}% of damage dealt`,critChance:t=>`+${t}% chance to deal critical hits`,critDamage:t=>`+${t}% critical hit damage`,bonusDmg:t=>`+${t} flat damage bonus`,bonusHp:t=>`+${t} maximum HP`,goldFind:t=>`+${t}% gold from enemies`,xpBonus:t=>`+${t}% experience gained`,dodge:t=>`${t}% chance to avoid attacks`,hpRegen:t=>`Restore ${t}% max HP per second`,damageReduction:t=>`Reduce damage taken by ${t}%`};function ep(t){if(!t)return{dmg:0,hp:0,armor:0,score:0};const e=we[t.tier]||we[0],s=il[t.slot]||{baseDmg:0,baseHp:0,baseArmor:0};let n=s;if(t.slot==="weapon"&&t.weaponType){const o=Rn.find(c=>c.id===t.weaponType)||jr.find(c=>c.id===t.weaponType);o&&(n={...s,...o})}const r=e.statMult||1,i=t.isBossItem&&t.statBonus?t.statBonus:1,a=wr(t.plus||0,t.tier);return{dmg:Math.floor((n.baseDmg||0)*r*i)+(a.dmgBonus||0),hp:Math.floor((n.baseHp||0)*r*i)+(a.hpBonus||0),armor:Math.floor((n.baseArmor||0)*r*i)+(a.armorBonus||0),score:Rt(t)}}function iy({tooltip:t}){if(!t||!t.item)return null;const{item:e,position:s,gear:n,isInventoryItem:r}=t,i=P=>!n||!P?0:Object.values(n).filter($=>$&&$.bossSet===P).length,a=e.bossSet?i(e.bossSet):0,o=we[e.tier]||we[0],c=e.effects||[],u=Rt(e),d=il[e.slot]||{baseDmg:0,baseHp:0,baseArmor:0};let h=d;if(e.slot==="weapon"&&e.weaponType){const P=Rn.find($=>$.id===e.weaponType)||jr.find($=>$.id===e.weaponType);P&&(h={...d,...P})}const f=o.statMult||1,p=e.isBossItem&&e.statBonus?e.statBonus:1,g=wr(e.plus||0,e.tier),v=Math.floor((h.baseDmg||0)*f*p)+(g.dmgBonus||0),b=Math.floor((h.baseHp||0)*f*p)+(g.hpBonus||0),x=Math.floor((h.baseArmor||0)*f*p)+(g.armorBonus||0),m=r&&n?n[e.slot]:null,y=m?ep(m):null,w=ep(e),k=(P,$)=>{if(!y)return null;const z=P-$;return z===0?null:z},_=k(w.dmg,(y==null?void 0:y.dmg)||0),S=k(w.hp,(y==null?void 0:y.hp)||0),A=k(w.armor,(y==null?void 0:y.armor)||0),C=k(w.score,(y==null?void 0:y.score)||0),M=256,j=e.bossSet&&(Bt[e.bossSet]||ms[e.bossSet]),D=350+c.length*30+(j?220:0)+(r?100:0),N=16,E=15;let O={maxHeight:`calc(100vh - ${N*2}px)`,overflowY:"auto"};const B=window.innerWidth-s.x-E-M,F=s.x-E-M;B>=N?O.left=s.x+E:F>=N?O.left=s.x-E-M:O.left=Math.max(N,(window.innerWidth-M)/2),O.left<N&&(O.left=N),O.left+M>window.innerWidth-N&&(O.left=window.innerWidth-N-M);const H=window.innerHeight-s.y-E-D,L=s.y-E-D;H>=N?O.top=s.y+E:L>=N?O.top=s.y-E-Math.min(D,window.innerHeight-N*2):(O.top=N,O.maxHeight=`calc(100vh - ${N*2}px)`),O.top<N&&(O.top=N),O.top+D>window.innerHeight-N&&(O.maxHeight=`${window.innerHeight-O.top-N}px`);const R=(P=>P>=800?{label:"S+",color:"#f472b6"}:P>=600?{label:"S",color:"#fbbf24"}:P>=400?{label:"A",color:"#a855f7"}:P>=250?{label:"B",color:"#3b82f6"}:P>=150?{label:"C",color:"#22c55e"}:P>=80?{label:"D",color:"#94a3b8"}:{label:"E",color:"#64748b"})(u);return l.jsxs("div",{className:"fixed z-[100] w-64 bg-gradient-to-br from-slate-900 to-slate-950 border-2 shadow-2xl rounded-lg overflow-hidden pointer-events-none",style:{...O,borderColor:o.color},children:[l.jsx("div",{className:"px-4 py-3 border-b border-slate-700/50",style:{background:`linear-gradient(135deg, ${o.color}15, transparent)`},children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"font-bold text-lg leading-tight",style:{color:o.color},children:[e.name,e.plus>0&&(()=>{const P=Lt(e.plus);return l.jsxs("span",{className:"ml-2 px-1.5 py-0.5 rounded text-sm inline-flex items-center gap-0.5",style:{color:P.color,backgroundColor:P.bgColor,boxShadow:P.glow},children:[P.icon&&l.jsx("span",{className:"text-xs",children:P.icon}),"+",e.plus]})})()]}),l.jsxs("div",{className:"text-xs text-slate-400 uppercase font-bold mt-0.5 flex items-center gap-2",children:[l.jsx("span",{style:{color:o.color},children:o.name}),l.jsx("span",{className:"text-slate-600",children:"|"}),l.jsx("span",{className:"capitalize",children:e.slot}),e.weaponType&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-600",children:"|"}),l.jsx("span",{className:"capitalize",children:e.weaponType})]})]})]}),l.jsxs("div",{className:"flex flex-col items-center px-2 py-1 rounded-lg",style:{backgroundColor:`${R.color}20`,border:`1px solid ${R.color}40`},children:[l.jsx("span",{className:"text-[10px] text-slate-400 uppercase",children:"Rating"}),l.jsx("span",{className:"font-bold text-lg leading-none",style:{color:R.color},children:R.label})]})]})}),l.jsxs("div",{className:"px-4 py-3 border-b border-slate-700/30",children:[l.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-2",children:"Base Stats"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[v>0&&l.jsxs("div",{className:"flex flex-col items-center p-1.5 bg-red-500/10 rounded",children:[l.jsx("span",{className:"text-[10px] text-red-400",children:"DMG"}),l.jsxs("span",{className:"font-bold text-red-300",children:["+",v]})]}),b>0&&l.jsxs("div",{className:"flex flex-col items-center p-1.5 bg-green-500/10 rounded",children:[l.jsx("span",{className:"text-[10px] text-green-400",children:"HP"}),l.jsxs("span",{className:"font-bold text-green-300",children:["+",b]})]}),x>0&&l.jsxs("div",{className:"flex flex-col items-center p-1.5 bg-blue-500/10 rounded",children:[l.jsx("span",{className:"text-[10px] text-blue-400",children:"Armor"}),l.jsxs("span",{className:"font-bold text-blue-300",children:["+",x]})]})]}),e.slot==="weapon"&&h.speedBonus!==void 0&&l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex gap-3 text-xs",children:[h.speedBonus!==0&&l.jsxs("span",{className:h.speedBonus>0?"text-cyan-400":"text-orange-400",children:[ir(h.speedBonus*100)," Speed"]}),h.critBonus>0&&l.jsxs("span",{className:"text-yellow-400",children:["+",h.critBonus,"% Crit"]})]}),h.scaling&&l.jsxs("div",{className:"text-[10px] text-slate-400",children:["Scales with ",l.jsx("span",{className:{str:"text-red-400",int:"text-purple-400",agi:"text-amber-400",vit:"text-green-400"}[h.scaling]||"text-slate-300",children:h.scaling.toUpperCase()}),l.jsxs("span",{className:"text-slate-500",children:[" (+",h.scaling==="int"?"3":"2","% DMG per point)"]})]})]})]}),r&&m&&l.jsxs("div",{className:"px-4 py-3 border-b border-slate-700/30 bg-gradient-to-r from-blue-500/5 to-purple-500/5",children:[l.jsxs("div",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-2 flex items-center gap-2",children:[l.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"vs Equipped: ",m.name]}),l.jsxs("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[l.jsxs("div",{className:`flex flex-col items-center p-1.5 rounded ${_!==null?_>0?"bg-green-500/15":"bg-red-500/15":"bg-slate-700/20"}`,children:[l.jsx("span",{className:"text-[9px] text-slate-400",children:"DMG"}),l.jsx("span",{className:`font-bold ${_===null?"text-slate-400":_>0?"text-green-400":"text-red-400"}`,children:_===null?"=":_>0?`+${_}`:_})]}),l.jsxs("div",{className:`flex flex-col items-center p-1.5 rounded ${S!==null?S>0?"bg-green-500/15":"bg-red-500/15":"bg-slate-700/20"}`,children:[l.jsx("span",{className:"text-[9px] text-slate-400",children:"HP"}),l.jsx("span",{className:`font-bold ${S===null?"text-slate-400":S>0?"text-green-400":"text-red-400"}`,children:S===null?"=":S>0?`+${S}`:S})]}),l.jsxs("div",{className:`flex flex-col items-center p-1.5 rounded ${A!==null?A>0?"bg-green-500/15":"bg-red-500/15":"bg-slate-700/20"}`,children:[l.jsx("span",{className:"text-[9px] text-slate-400",children:"ARM"}),l.jsx("span",{className:`font-bold ${A===null?"text-slate-400":A>0?"text-green-400":"text-red-400"}`,children:A===null?"=":A>0?`+${A}`:A})]}),l.jsxs("div",{className:`flex flex-col items-center p-1.5 rounded ${C!==null?C>0?"bg-green-500/15":"bg-red-500/15":"bg-slate-700/20"}`,children:[l.jsx("span",{className:"text-[9px] text-slate-400",children:"PWR"}),l.jsx("span",{className:`font-bold ${C===null?"text-slate-400":C>0?"text-green-400":"text-red-400"}`,children:C===null?"=":C>0?`+${C}`:C})]})]}),C!==null&&l.jsx("div",{className:`mt-2 text-center text-[10px] font-bold uppercase tracking-wider ${C>0?"text-green-400":"text-red-400"}`,children:C>0?"^ UPGRADE ^":"v DOWNGRADE v"})]}),r&&!m&&l.jsx("div",{className:"px-4 py-2 border-b border-slate-700/30 bg-green-500/5",children:l.jsx("div",{className:"text-[10px] text-green-400 uppercase tracking-wider text-center font-bold",children:"Slot Empty - Equipping will add stats!"})}),c.length>0&&(()=>{const P=c.filter(z=>!z.isAwakened),$=c.filter(z=>z.isAwakened);return l.jsxs("div",{className:"px-4 py-3 border-b border-slate-700/30",children:[l.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wider mb-2",children:"Special Effects"}),P.length>0&&l.jsx("div",{className:"space-y-1.5 mb-2",children:P.map((z,V)=>{const X=Nk[z.id];return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm font-bold text-purple-300",children:z.name}),l.jsxs("span",{className:"font-mono font-bold text-sm text-purple-300",children:["+",z.value]})]}),X&&l.jsx("div",{className:"text-[10px] text-slate-400",children:X(z.value)})]},V)})}),$.length>0&&l.jsxs("div",{className:"p-2 rounded bg-gradient-to-r from-orange-500/10 to-yellow-500/10 border border-orange-500/20",children:[l.jsxs("div",{className:"text-[9px] text-orange-400 uppercase tracking-wider mb-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"text-yellow-400",children:""})," Awakening Bonuses"]}),l.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:$.map((z,V)=>l.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[l.jsxs("span",{className:"text-orange-200 flex items-center gap-1",children:[l.jsxs("span",{className:"text-[9px] text-orange-400/70",children:["+",z.milestone]}),z.name]}),l.jsxs("span",{className:"font-mono font-bold text-orange-300",children:["+",z.value]})]},V))})]})]})})(),e.bossSet&&(Bt[e.bossSet]||ms[e.bossSet])&&(()=>{const P=Bt[e.bossSet]||ms[e.bossSet],$=!!ms[e.bossSet],z=a>=9&&$,V=z?"9/9":`${a}/8`;return l.jsxs("div",{className:`px-4 py-3 border-b border-slate-700/30 ${z?"bg-gradient-to-r from-yellow-500/10 to-purple-500/10":"bg-purple-500/5"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),l.jsxs("span",{className:"text-sm font-bold",style:{color:P.color},children:[P.name," Set"]})]}),l.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${z?"animate-pulse":""}`,style:{backgroundColor:z?"#fbbf2440":`${P.color}20`,color:z?"#fbbf24":P.color},children:V})]}),l.jsx("div",{className:"space-y-0.5 text-[10px]",children:P.setBonuses.map((X,K)=>{if(X.secret&&a<X.pieces)return null;const Me=a>=X.pieces,re=X.secret&&Me;return l.jsxs("div",{className:`flex gap-1.5 py-0.5 px-1 rounded ${re?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20":Me?"bg-green-500/10":"opacity-40"}`,children:[l.jsxs("span",{className:`w-6 font-bold flex-shrink-0 ${re?"text-yellow-400":Me?"text-green-400":"text-slate-600"}`,children:[X.pieces,"pc"]}),l.jsx("span",{className:`flex-1 ${re?"text-yellow-300":Me?"text-green-300":"text-slate-500"}`,children:X.desc}),Me&&l.jsx("svg",{className:`w-3 h-3 flex-shrink-0 ${re?"text-yellow-400":"text-green-400"}`,fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},K)})}),z&&l.jsx("div",{className:"mt-2 pt-2 border-t border-yellow-500/30 text-center",children:l.jsx("span",{className:"text-[10px] text-yellow-400 font-bold uppercase tracking-wider",children:"Secret Set Bonus Unlocked!"})})]})})(),e.plus>=10&&(()=>{const P=Lt(e.plus);return l.jsxs("div",{className:"px-4 py-1.5 border-t border-slate-700/30 flex items-center gap-2 flex-wrap",style:{background:`linear-gradient(135deg, ${P.bgColor}, transparent)`},children:[P.icon&&l.jsx("span",{style:{color:P.color},className:"text-sm",children:P.icon}),l.jsx("span",{className:"text-[10px] uppercase font-bold",style:{color:P.color},children:P.name}),e.plus>=15&&l.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded",style:{color:P.color,backgroundColor:`${P.color}20`},children:[ir((g.dmgMult-1)*100)," DMG"]})]})})(),l.jsxs("div",{className:"px-4 py-2 bg-slate-950/50 flex justify-between items-center",children:[l.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:"Item Power"}),l.jsxs("div",{className:"flex items-center gap-2",children:[(e.count||1)>1&&l.jsxs("span",{className:"text-[10px] text-blue-400 bg-blue-500/20 px-1.5 py-0.5 rounded",children:["x",e.count]}),l.jsx("span",{className:"font-mono font-bold text-slate-300",children:u})]})]})]})}function Ak({currentZone:t,state:e,gameManager:s}){const n=(e==null?void 0:e.combatPaused)||!1,[r,i]=I.useState(!1),a=()=>{s&&s.toggleCombat()},o=f=>{s&&s.setSpeed(f)},[c,u]=I.useState(1);I.useEffect(()=>{if(s)return s.subscribeSpeed(u)},[s]);const d=(e==null?void 0:e.bossStones)||{},h=Object.entries(d).filter(([f,p])=>p>0);return l.jsxs("div",{className:"bg-slate-950 border-b border-slate-800",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-slate-800/50 bg-slate-900/80",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[(t==null?void 0:t.isBoss)&&l.jsx("img",{src:"./assets/ui-icons/fire-shield-boss.png",alt:"",className:"w-5 h-5"}),l.jsx("span",{className:`font-bold text-sm ${t!=null&&t.isBoss?"text-red-400":"text-white"}`,children:(t==null?void 0:t.name)||"Unknown"}),(t==null?void 0:t.isBoss)&&l.jsx("span",{className:"text-[10px] bg-red-500/20 text-red-400 px-1.5 py-0.5 rounded font-bold",children:"BOSS"})]}),l.jsxs("button",{onClick:()=>i(!r),className:"flex items-center gap-3 active:scale-95 transition-transform",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ze,{type:"gold",size:16}),l.jsx("span",{className:"text-slate-200 text-sm font-bold",children:qi((e==null?void 0:e.gold)||0)})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ze,{type:"enhanceStone",size:16}),l.jsx("span",{className:"text-blue-400 text-sm font-bold",children:qi((e==null?void 0:e.enhanceStone)||0)})]}),l.jsx("svg",{className:`w-4 h-4 text-slate-500 transition-transform ${r?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),r&&l.jsxs("div",{className:"px-3 py-2 bg-slate-900/95 border-b border-slate-800/50 space-y-2",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx(Zr,{icon:"gold",label:"Silver",value:(e==null?void 0:e.gold)||0,color:"text-slate-300"}),l.jsx(Zr,{icon:"enhanceStone",label:"E. Stones",value:(e==null?void 0:e.enhanceStone)||0,color:"text-blue-400"}),l.jsx(Zr,{icon:"blessedOrb",label:"Blessed Orbs",value:(e==null?void 0:e.blessedOrb)||0,color:"text-purple-400"}),l.jsx(Zr,{icon:"celestialShard",label:"Celestial Shards",value:(e==null?void 0:e.celestialShard)||0,color:"text-pink-400"}),l.jsx(Zr,{icon:"prestigeStone",label:"Prestige Stones",value:(e==null?void 0:e.prestigeStones)||0,color:"text-fuchsia-400"})]}),h.length>0&&l.jsxs("div",{className:"pt-2 border-t border-slate-800/50",children:[l.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold mb-1.5",children:"Boss Stones"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(([f,p])=>l.jsxs("div",{className:"flex items-center gap-1 bg-slate-800/50 px-2 py-1 rounded",children:[l.jsx(Kx,{bossSet:f,size:14}),l.jsx("span",{className:"text-xs text-slate-300 capitalize",children:f}),l.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:["x",p]})]},f))})]})]}),l.jsx("div",{className:"relative h-44 w-full overflow-hidden",children:l.jsx(Wx,{})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-t border-slate-800/50 bg-slate-900/80",children:[l.jsx("button",{onClick:a,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-sm transition-all active:scale-95 ${n?"bg-green-600 text-white":"bg-red-600/80 text-white"}`,children:n?l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M8 5v14l11-7z"})}),"Fight"]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),"Rest"]})}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-slate-500 text-xs mr-1",children:"Speed:"}),[1,2,5].map(f=>l.jsxs("button",{onClick:()=>o(f),className:`px-3 py-1.5 rounded text-xs font-bold transition-all active:scale-95 ${c===f?"bg-blue-600 text-white":"bg-slate-700 text-slate-400"}`,children:[f,"x"]},f))]})]})]})}function Zr({icon:t,label:e,value:s,color:n}){return l.jsxs("div",{className:"flex items-center justify-between bg-slate-800/30 px-2 py-1.5 rounded",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ze,{type:t,size:16}),l.jsx("span",{className:"text-xs text-slate-400",children:e})]}),l.jsx("span",{className:`text-sm font-bold font-mono ${n}`,children:qi(s)})]})}const jk={inventory:{label:"Inv",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})},stats:{label:"Stats",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},enhance:{label:"Enh",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},skills:{label:"Skills",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},zone:{label:"Map",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})},more:{label:"More",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}};function Tk({tabs:t,activeTab:e,onTabChange:s,moreSubTab:n,onBackFromMore:r}){return n?l.jsx("div",{className:"bg-slate-900 border-y border-slate-800",children:l.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-3 text-blue-400 active:bg-slate-800 w-full",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),l.jsx("span",{className:"font-medium",children:"Back"}),l.jsx("span",{className:"text-slate-500 ml-2 capitalize",children:n})]})}):l.jsx("div",{className:"bg-slate-900 border-y border-slate-800",children:l.jsx("div",{className:"flex",children:t.map(i=>{const a=jk[i];if(!a)return null;const o=e===i;return l.jsxs("button",{onClick:()=>s(i),className:`relative flex-1 flex flex-col items-center justify-center py-2 px-1 min-h-[56px] transition-all active:scale-95 active:bg-slate-800 ${o?"text-blue-400 bg-slate-800/50":"text-slate-500"}`,children:[l.jsx("div",{className:`transition-transform ${o?"scale-110":""}`,children:a.icon}),l.jsx("span",{className:`text-[10px] mt-1 font-medium ${o?"text-blue-400":"text-slate-500"}`,children:a.label}),o&&l.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-0.5 bg-blue-500 rounded-full"})]},i)})})})}function Ek({level:t,xp:e}){const n=(i=>Math.floor(50*Math.pow(1.3,i-1)))(t),r=Math.min(100,e/n*100);return l.jsx("div",{className:"bg-slate-950 border-t border-slate-800 px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-1 min-w-[60px]",children:[l.jsx("span",{className:"text-slate-500 text-xs",children:"Lv."}),l.jsx("span",{className:"text-xl font-bold text-purple-400",children:t})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mb-1",children:[l.jsx("span",{children:"XP"}),l.jsxs("span",{children:[Be(e)," / ",Be(n)]})]}),l.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-purple-400 transition-all duration-300",style:{width:`${r}%`}})})]})]})})}const Pk=["inventory","stats","enhance","skills","zone","more"];function Rk(){const{state:t,gameManager:e}=Ke(),[s,n]=I.useState("inventory"),[r,i]=I.useState(null),[a,o]=I.useState(!1),[c,u]=I.useState(!1),[d,h]=I.useState(null),f=(x,m,y=!1)=>{i(x?{item:x,position:m,gear:t.gear,isInventoryItem:y}:null)},p=x=>{h(x),u(!1)},g=()=>{h(null),n("inventory")};if(!t)return l.jsx("div",{className:"w-screen h-[100dvh] bg-slate-950 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:"./assets/ui-icons/sword-loading.png",alt:"",className:"w-12 h-12 mb-4 animate-bounce mx-auto"}),l.jsx("p",{className:"text-slate-400",children:"Loading..."})]})});const v=en(t.currentZone),b=()=>{if(d)switch(d){case"prestige":return l.jsx(Jx,{});case"achievements":return l.jsx(ey,{});case"settings":return l.jsx(ty,{});default:return null}switch(s){case"inventory":return l.jsx(Iu,{onHover:f});case"stats":return l.jsx(Yx,{});case"enhance":return l.jsx(Zx,{});case"skills":return l.jsx(Xx,{});case"zone":return l.jsx(Qx,{});case"more":return l.jsx(Lk,{onSelect:p,onDailyRewards:()=>o(!0)});default:return l.jsx(Iu,{onHover:f})}};return l.jsxs("div",{className:"w-screen h-[100dvh] bg-slate-950 flex flex-col overflow-hidden",children:[l.jsx("div",{className:"bg-slate-950",style:{paddingTop:"env(safe-area-inset-top)"}}),l.jsx(Ak,{currentZone:v,state:t,gameManager:e}),l.jsx(Tk,{tabs:Pk,activeTab:d?"more":s,onTabChange:x=>{x==="more"&&h(null),n(x)},moreSubTab:d,onBackFromMore:g}),l.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden bg-slate-900/50",children:l.jsx("div",{className:"p-2",children:b()})}),l.jsx(Ek,{level:t.level||1,xp:t.xp||0}),l.jsx("div",{className:"bg-slate-950",style:{paddingBottom:"env(safe-area-inset-bottom)"}}),r&&l.jsx(iy,{tooltip:r}),a&&l.jsx(ry,{onClose:()=>o(!1)})]})}function Lk({onSelect:t,onDailyRewards:e}){const s=[{id:"prestige",label:"Prestige",icon:l.jsx("img",{src:"./assets/ui-icons/star-prestige.png",alt:"",className:"w-8 h-8"}),description:"Reset for permanent bonuses"},{id:"achievements",label:"Achievements",icon:l.jsx("img",{src:"./assets/ui-icons/crown-achievements.png",alt:"",className:"w-8 h-8"}),description:"Track your progress"},{id:"settings",label:"Settings",icon:l.jsx("img",{src:"./assets/ui-icons/compass-settings.png",alt:"",className:"w-8 h-8"}),description:"Game options"}];return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("button",{onClick:e,className:"w-full p-4 bg-gradient-to-r from-yellow-600/20 to-orange-600/20 border border-yellow-500/30 rounded-xl flex items-center gap-4 active:scale-[0.98] transition-transform",children:[l.jsx("img",{src:"./assets/ui-icons/chest-daily-rewards.png",alt:"",className:"w-8 h-8"}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-yellow-400",children:"Daily Rewards"}),l.jsx("div",{className:"text-sm text-slate-400",children:"Claim your daily bonus"})]})]}),s.map(n=>l.jsxs("button",{onClick:()=>t(n.id),className:"w-full p-4 bg-slate-800/50 border border-slate-700/50 rounded-xl flex items-center gap-4 active:scale-[0.98] transition-transform",children:[l.jsx("span",{className:"w-8 h-8 flex items-center justify-center",children:n.icon}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-white",children:n.label}),l.jsx("div",{className:"text-sm text-slate-400",children:n.description})]}),l.jsx("svg",{className:"w-5 h-5 text-slate-500 ml-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},n.id))]})}const Dk={inventory:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),stats:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),enhance:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),skills:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),zone:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),prestige:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),achievements:l.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),settings:l.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},dn=["inventory","stats","enhance","skills","zone","prestige","achievements","settings"];function Bk(){return pk()?l.jsx(Rk,{}):l.jsx(Ik,{})}function Ik(){const{state:t,offlineRewards:e,clearOfflineRewards:s,toasts:n,dismissToast:r}=Ke(),[i,a]=I.useState("inventory"),[o,c]=I.useState(null),[u,d]=I.useState(null),[h,f]=I.useState(!1),[p,g]=I.useState(!1),v=wk(),b=I.useRef((t==null?void 0:t.level)||1);I.useEffect(()=>{const w=k=>{if(!(k.target.tagName==="INPUT"||k.target.tagName==="TEXTAREA")){if(k.key>="1"&&k.key<="8"){const _=parseInt(k.key)-1;_<dn.length&&a(dn[_]);return}if(k.key==="ArrowLeft"||k.key==="ArrowRight"){const _=dn.indexOf(i);let S;k.key==="ArrowLeft"?S=_>0?_-1:dn.length-1:S=_<dn.length-1?_+1:0,a(dn[S]);return}k.key==="?"&&f(_=>!_)}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[i]),I.useEffect(()=>{if(!t)return;const w=t.level||1;w>b.current&&(d({level:w,startTime:Date.now()}),setTimeout(()=>d(null),3e3)),b.current=w},[t==null?void 0:t.level]),I.useEffect(()=>{var _;if(!t)return;const w=en(t.currentZone);if(!w)return;const k=()=>{Q.init(),Q.resume(),w.isBoss?Q.playMusic("boss",t.currentZone):Q.playMusic("zone",t.currentZone),document.removeEventListener("click",k),document.removeEventListener("keydown",k)};return document.addEventListener("click",k),document.addEventListener("keydown",k),((_=Q.audioContext)==null?void 0:_.state)==="running"&&(w.isBoss?Q.playMusic("boss",t.currentZone):Q.playMusic("zone",t.currentZone)),()=>{document.removeEventListener("click",k),document.removeEventListener("keydown",k)}},[t==null?void 0:t.currentZone]);const x=(w,k,_=!1)=>{c(w?{item:w,position:k,gear:t.gear,isInventoryItem:_}:null)};if(!t)return l.jsx("div",{className:"w-screen h-screen bg-slate-950 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"spinner mx-auto mb-4"}),l.jsx("p",{className:"text-slate-400",children:"Loading game..."})]})});const m=en(t.currentZone),y=I.useMemo(()=>zi(t),[t]);return l.jsxs("div",{className:"w-screen h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 overflow-hidden flex flex-col lg:flex-row",children:[l.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"})]}),l.jsxs("div",{className:"h-[40vh] lg:h-full lg:flex-1 relative flex flex-col",children:[l.jsxs("div",{className:"absolute top-2 left-2 right-2 lg:top-4 lg:left-4 lg:right-4 flex justify-between items-start z-10",children:[l.jsxs("div",{className:"flex flex-col gap-1 lg:gap-2",children:[l.jsxs("div",{className:"glass-card rounded-lg lg:rounded-xl p-2 lg:p-4 animate-fadeIn",children:[l.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[l.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-lg bg-gradient-to-br from-yellow-500/20 to-orange-500/20 flex items-center justify-center",children:m.isBoss?l.jsx("span",{className:"text-base lg:text-lg",children:""}):l.jsxs("svg",{className:"w-4 h-4 lg:w-5 lg:h-5 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] lg:text-xs text-slate-400 uppercase tracking-wider hidden sm:block",children:"Current Zone"}),l.jsx("h2",{className:`font-bold text-sm lg:text-lg ${m.isBoss?"text-red-400":"text-white"}`,children:m.name})]})]}),m.isBoss&&l.jsx("div",{className:"mt-1 lg:mt-2 px-2 py-0.5 lg:py-1 bg-red-500/20 rounded text-[10px] lg:text-xs text-red-400 font-bold uppercase tracking-wider text-center",children:"Boss"})]}),l.jsx("div",{className:"glass-card rounded-lg lg:rounded-xl px-2 lg:px-4 py-1 lg:py-2 animate-fadeIn hidden sm:block",children:l.jsxs("div",{className:"flex items-center gap-3 lg:gap-6",children:[l.jsx(Wa,{label:"ATK",value:Math.floor(y.damage||10),color:"text-red-400"}),l.jsx(Wa,{label:"DEF",value:Math.floor(y.armor||5),color:"text-blue-400"}),l.jsx(Wa,{label:"Kills",value:t.kills||0,color:"text-green-400"}),t.prestigeLevel>0&&l.jsx(Wa,{label:"Prestige",value:t.prestigeLevel,color:"text-pink-400"})]})})]}),l.jsxs("div",{className:"glass-card rounded-lg lg:rounded-xl p-2 lg:p-3 animate-fadeIn min-w-[280px] lg:min-w-[320px]",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[l.jsx(Ya,{type:"gold",value:t.gold,color:"text-slate-200"}),l.jsx(Ya,{type:"enhanceStone",value:t.enhanceStone,color:"text-blue-400"}),l.jsx(Ya,{type:"blessedOrb",value:t.blessedOrb,color:"text-purple-400",className:"hidden sm:flex"}),l.jsx(Ya,{type:"celestialShard",value:t.celestialShard,color:"text-yellow-300",className:"hidden sm:flex"})]}),t.bossStones&&Object.entries(t.bossStones).some(([w,k])=>k>0)&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-700/50",children:[l.jsx("p",{className:"text-[8px] text-slate-500 uppercase mb-1",children:"Boss Stones"}),l.jsx("div",{className:"grid grid-cols-5 lg:grid-cols-6 gap-1",children:Object.entries(rl).map(([w,k])=>{var S;const _=((S=t.bossStones)==null?void 0:S[w])||0;return _===0?null:l.jsx(Hk,{bossSet:w,value:_,info:k},w)})})]})]})]}),l.jsx("div",{className:"flex-1 w-full",children:l.jsx(Wx,{})}),l.jsx("div",{className:"absolute bottom-16 left-4 z-10",children:l.jsx(Vk,{})}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-10",children:l.jsx(Uk,{level:t.level||1,xp:t.xp||0})})]}),l.jsxs("div",{className:"w-full h-[60vh] lg:w-[550px] lg:h-full flex flex-col border-t lg:border-t-0 lg:border-l border-slate-800/50 bg-slate-900/80 backdrop-blur-sm shadow-2xl z-20",children:[l.jsx("div",{className:"flex overflow-x-auto custom-scrollbar bg-slate-950/80 border-b border-slate-800/50",role:"tablist","aria-label":"Game sections",children:dn.map((w,k)=>l.jsx(Ok,{active:i===w,onClick:()=>a(w),icon:Dk[w],shortcut:k+1,children:w==="zone"?"Map":w.charAt(0).toUpperCase()+w.slice(1)},w))}),l.jsx("div",{className:"flex-1 overflow-hidden p-3",children:l.jsxs("div",{className:"h-full animate-fadeIn",children:[i==="inventory"&&l.jsx(Iu,{onHover:x}),i==="stats"&&l.jsx(Yx,{}),i==="enhance"&&l.jsx(Zx,{}),i==="skills"&&l.jsx(Xx,{}),i==="zone"&&l.jsx(Qx,{}),i==="prestige"&&l.jsx(Jx,{}),i==="achievements"&&l.jsx(ey,{}),i==="settings"&&l.jsx(ty,{})]})}),l.jsx("div",{className:"px-4 py-2 border-t border-slate-800/50 bg-slate-950/50",children:l.jsxs("div",{className:"flex justify-between items-center text-xs text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:"Gear Grinder v1.0"}),l.jsx($k,{})]}),l.jsx(zk,{}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("button",{onClick:()=>g(!0),className:`relative px-2 py-1 rounded text-xs transition-all ${v?"bg-yellow-500/30 text-yellow-300 hover:bg-yellow-500/40":"bg-slate-700/50 text-slate-400 hover:bg-slate-600/50"}`,children:["Daily",v&&l.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-500 rounded-full animate-pulse"})]}),l.jsx("button",{onClick:()=>f(!0),className:"text-slate-600 hover:text-slate-400 transition-colors","aria-label":"Keyboard shortcuts",children:l.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-800 rounded text-[10px] font-mono",children:"?"})}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Auto-saving"]})]})]})})]}),o&&l.jsx(iy,{tooltip:o}),u&&l.jsx(Wk,{level:u.level}),h&&l.jsx(Yk,{onClose:()=>f(!1)}),p&&l.jsx(ry,{onClose:()=>g(!1)}),e&&l.jsx(Sk,{rewards:e,onClose:s}),l.jsx(Mk,{toasts:n,onDismiss:r})]})}function Ok({children:t,active:e,onClick:s,icon:n,shortcut:r}){return l.jsxs("button",{onClick:s,role:"tab","aria-selected":e,tabIndex:e?0:-1,className:`flex-1 py-3 px-2 flex flex-col items-center gap-1 transition-all duration-200 relative group focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:ring-inset ${e?"text-white bg-gradient-to-b from-blue-600/20 to-transparent":"text-slate-500 hover:text-slate-300 hover:bg-slate-800/50"}`,children:[l.jsx("span",{className:`transition-transform duration-200 ${e?"scale-110":"group-hover:scale-105"}`,children:n}),l.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider",children:t}),r&&l.jsx("span",{className:"absolute top-1 right-1 text-[8px] text-slate-600 font-mono",children:r}),e&&l.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-0.5 bg-blue-500 rounded-full"})]})}function Wa({label:t,value:e,color:s}){return l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:t}),l.jsx("p",{className:`text-lg font-bold ${s}`,children:typeof e=="number"?Be(e):e})]})}const Fk={gold:"Silver",enhanceStone:"E.Stone",blessedOrb:"B.Orb",celestialShard:"C.Shard",prestigeStone:"P.Stone"};function Ya({type:t,value:e,color:s,className:n=""}){return l.jsxs("div",{className:`flex items-center gap-1.5 ${n}`,children:[l.jsx("div",{className:"w-5 h-5 lg:w-6 lg:h-6 flex-shrink-0 flex items-center justify-center",children:l.jsx(ze,{type:t,size:20})}),l.jsxs("div",{className:"min-w-[70px] lg:min-w-[90px]",children:[l.jsx("p",{className:"text-[8px] text-slate-500 uppercase",children:Fk[t]}),l.jsx("p",{className:`text-sm lg:text-base font-bold ${s} leading-none tabular-nums`,children:typeof e=="number"?Be(e):e})]})]})}function Hk({bossSet:t,value:e,info:s}){return l.jsxs("div",{className:"flex items-center gap-0.5 px-1 py-0.5 rounded bg-slate-800/60",title:s.name,children:[l.jsx(Kx,{bossSet:t,size:14}),l.jsx("span",{className:"text-[10px] font-bold tabular-nums min-w-[1.5rem]",style:{color:s.color},children:Be(e)})]})}const Gk=[1,2,5];function zk(){const{gameManager:t}=Ke(),[e,s]=I.useState(1);I.useEffect(()=>{if(t)return t.subscribeSpeed(s)},[t]);const n=r=>{t&&t.setSpeed(r)};return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-slate-400 mr-1",children:"Speed:"}),Gk.map(r=>l.jsxs("button",{onClick:()=>n(r),className:`px-2 py-0.5 rounded text-[10px] font-bold transition-all ${e===r?"bg-blue-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:[r,"x"]},r))]})}function $k(){const{gameManager:t}=Ke(),[e,s]=I.useState(!1),n=()=>{if(!e){s(!0),setTimeout(()=>s(!1),3e3);return}t&&t.resetGame(),s(!1)};return l.jsx("button",{onClick:n,className:`px-2 py-0.5 rounded text-[10px] font-bold transition-all ${e?"bg-red-600 text-white":"bg-slate-700 text-slate-400 hover:bg-red-600/50 hover:text-red-300"}`,children:e?"Confirm?":"Reset"})}function Vk(){const{gameManager:t,state:e}=Ke(),s=(e==null?void 0:e.combatPaused)||!1,n=()=>{t&&t.toggleCombat()};return l.jsx("button",{onClick:n,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold text-sm transition-all shadow-lg ${s?"bg-green-600 hover:bg-green-500 text-white":"bg-red-600/80 hover:bg-red-500 text-white"}`,title:s?"Resume Combat":"Pause Combat",children:s?l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M8 5v14l11-7z"})}),"Fight"]}):l.jsxs(l.Fragment,{children:[l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}),"Rest"]})})}function Uk({level:t,xp:e}){const n=(i=>Math.floor(50*Math.pow(1.3,i-1)))(t),r=Math.min(100,e/n*100);return l.jsx("div",{className:"bg-slate-950/90 backdrop-blur-sm border-t border-slate-800/50 px-4 py-2",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2 min-w-[100px]",children:[l.jsx("span",{className:"text-sm text-slate-400 uppercase",children:"Lv."}),l.jsx("span",{className:"text-2xl font-bold text-purple-400",children:t})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm text-slate-400 mb-1",children:[l.jsx("span",{children:"XP"}),l.jsxs("span",{className:"font-semibold",children:[Be(e)," / ",Be(n)]})]}),l.jsx("div",{className:"h-4 bg-slate-800 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-purple-600 to-purple-400 transition-all duration-300",style:{width:`${r}%`}})})]})]})})}function Wk({level:t}){return l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 animate-levelup-flash",style:{background:"radial-gradient(circle at center, rgba(147, 51, 234, 0.4) 0%, rgba(147, 51, 234, 0) 70%)"}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:[...Array(12)].map((e,s)=>l.jsx("div",{className:"absolute w-1 bg-gradient-to-t from-purple-500/80 to-transparent animate-levelup-ray",style:{height:"50vh",transformOrigin:"bottom center",transform:`rotate(${s*30}deg)`,animationDelay:`${s*.05}s`}},s))}),l.jsxs("div",{className:"relative flex flex-col items-center animate-levelup-content",children:[l.jsx("div",{className:"absolute w-64 h-64 rounded-full border-4 border-purple-500/50 animate-levelup-ring"}),l.jsx("div",{className:"absolute w-80 h-80 rounded-full border-2 border-yellow-400/30 animate-levelup-ring-slow"}),l.jsx("div",{className:"absolute",children:[...Array(8)].map((e,s)=>l.jsx("div",{className:"absolute text-yellow-400 text-2xl animate-levelup-star",style:{transform:`rotate(${s*45}deg) translateY(-100px)`,animationDelay:`${s*.1}s`},children:""},s))}),l.jsxs("div",{className:"text-center relative",children:[l.jsx("div",{className:"text-6xl font-black tracking-wider animate-levelup-text",style:{color:"#fbbf24",textShadow:"0 0 20px rgba(251, 191, 36, 0.8), 0 0 40px rgba(147, 51, 234, 0.6), 0 4px 0 #b45309"},children:"LEVEL UP!"}),l.jsx("div",{className:"text-8xl font-black mt-2 animate-levelup-number",style:{color:"#ffffff",textShadow:"0 0 30px rgba(147, 51, 234, 1), 0 0 60px rgba(147, 51, 234, 0.8), 0 6px 0 #7c3aed"},children:t}),l.jsx("div",{className:"text-lg text-purple-300 mt-2 animate-levelup-subtitle",children:"+3 Stat Points"})]})]}),l.jsx("style",{children:`
                @keyframes levelup-flash {
                    0% { opacity: 0; transform: scale(0.5); }
                    20% { opacity: 1; transform: scale(1.5); }
                    100% { opacity: 0; transform: scale(2); }
                }
                @keyframes levelup-ray {
                    0% { opacity: 0; height: 0; }
                    30% { opacity: 1; height: 50vh; }
                    100% { opacity: 0; height: 60vh; }
                }
                @keyframes levelup-content {
                    0% { opacity: 0; transform: scale(0.5); }
                    20% { opacity: 1; transform: scale(1.1); }
                    30% { transform: scale(1); }
                    80% { opacity: 1; transform: scale(1); }
                    100% { opacity: 0; transform: scale(0.9); }
                }
                @keyframes levelup-ring {
                    0% { opacity: 0; transform: scale(0.3); }
                    30% { opacity: 1; transform: scale(1); }
                    100% { opacity: 0; transform: scale(1.5); }
                }
                @keyframes levelup-ring-slow {
                    0% { opacity: 0; transform: scale(0.2) rotate(0deg); }
                    30% { opacity: 0.8; transform: scale(1) rotate(180deg); }
                    100% { opacity: 0; transform: scale(1.3) rotate(360deg); }
                }
                @keyframes levelup-star {
                    0% { opacity: 0; transform: rotate(var(--rotation, 0deg)) translateY(-50px) scale(0); }
                    30% { opacity: 1; transform: rotate(var(--rotation, 0deg)) translateY(-120px) scale(1.2); }
                    100% { opacity: 0; transform: rotate(var(--rotation, 0deg)) translateY(-180px) scale(0); }
                }
                @keyframes levelup-text {
                    0% { opacity: 0; transform: translateY(30px) scale(0.5); }
                    20% { opacity: 1; transform: translateY(-10px) scale(1.1); }
                    30% { transform: translateY(0) scale(1); }
                    80% { opacity: 1; }
                    100% { opacity: 0; }
                }
                @keyframes levelup-number {
                    0% { opacity: 0; transform: scale(3); }
                    25% { opacity: 1; transform: scale(0.9); }
                    35% { transform: scale(1.05); }
                    45% { transform: scale(1); }
                    80% { opacity: 1; }
                    100% { opacity: 0; }
                }
                @keyframes levelup-subtitle {
                    0% { opacity: 0; transform: translateY(20px); }
                    40% { opacity: 1; transform: translateY(0); }
                    80% { opacity: 1; }
                    100% { opacity: 0; }
                }
                .animate-levelup-flash { animation: levelup-flash 3s ease-out forwards; }
                .animate-levelup-ray { animation: levelup-ray 2.5s ease-out forwards; }
                .animate-levelup-content { animation: levelup-content 3s ease-out forwards; }
                .animate-levelup-ring { animation: levelup-ring 2s ease-out forwards; }
                .animate-levelup-ring-slow { animation: levelup-ring-slow 3s ease-out forwards; }
                .animate-levelup-star { animation: levelup-star 2s ease-out forwards; }
                .animate-levelup-text { animation: levelup-text 3s ease-out forwards; }
                .animate-levelup-number { animation: levelup-number 3s ease-out forwards; }
                .animate-levelup-subtitle { animation: levelup-subtitle 3s ease-out forwards; }
            `})]})}function Yk({onClose:t}){I.useEffect(()=>{const s=n=>{(n.key==="Escape"||n.key==="?")&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t]);const e=[{keys:["1","2","3","4","5","6","7","8"],action:"Switch tabs (Inventory, Stats, Enhance, Skills, Map, Prestige, Achievements, Settings)"},{keys:["",""],action:"Navigate between tabs"},{keys:["?"],action:"Toggle this help menu"},{keys:["Esc"],action:"Close this menu"}];return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:t,role:"dialog","aria-modal":"true","aria-labelledby":"keyboard-help-title",children:l.jsxs("div",{className:"bg-slate-800 rounded-xl border-2 border-slate-700 p-6 max-w-md w-full mx-4 shadow-2xl",onClick:s=>s.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{id:"keyboard-help-title",className:"text-xl font-bold text-white",children:"Keyboard Shortcuts"}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors p-1","aria-label":"Close",children:l.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsx("div",{className:"space-y-4",children:e.map((s,n)=>l.jsxs("div",{className:"flex flex-col gap-1.5",children:[l.jsx("div",{className:"flex flex-wrap gap-1",children:s.keys.map((r,i)=>l.jsx("kbd",{className:"px-2 py-1 bg-slate-900 border border-slate-600 rounded text-sm font-mono text-slate-300",children:r},i))}),l.jsx("span",{className:"text-slate-400 text-sm",children:s.action})]},n))}),l.jsx("div",{className:"mt-6 pt-4 border-t border-slate-700 text-center",children:l.jsxs("p",{className:"text-slate-500 text-xs",children:["Press ",l.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-900 rounded text-[10px] font-mono",children:"?"})," or ",l.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-900 rounded text-[10px] font-mono",children:"Esc"})," to close"]})})]})})}class Xk extends dp.Component{constructor(s){super(s);pl(this,"handleReload",()=>{window.location.reload()});pl(this,"handleRestoreBackup",()=>{try{const s=Object.keys(localStorage).filter(n=>n.startsWith("gearGrinderBackup_")).sort().reverse();if(s.length>0){const n=localStorage.getItem(s[0]);n&&(localStorage.setItem("gearGrinderSave",n),window.location.reload())}}catch(s){console.error("Failed to restore backup:",s),alert("Failed to restore backup. Please try reloading the page.")}});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,n){this.setState({error:s,errorInfo:n});try{const r=localStorage.getItem("gearGrinderSave");if(r){const i=new Date().toISOString().replace(/[:.]/g,"-");localStorage.setItem(`gearGrinderBackup_${i}`,r);const a=Object.keys(localStorage).filter(o=>o.startsWith("gearGrinderBackup_"));a.length>3&&a.sort().slice(0,a.length-3).forEach(o=>localStorage.removeItem(o)),console.log("Emergency backup created:",`gearGrinderBackup_${i}`)}}catch(r){console.error("Failed to create emergency backup:",r)}console.error("Game Error:",s),console.error("Component Stack:",n==null?void 0:n.componentStack)}render(){var s;if(this.state.hasError){const n=Object.keys(localStorage||{}).some(r=>r.startsWith("gearGrinderBackup_"));return l.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-8",children:l.jsxs("div",{className:"max-w-lg w-full bg-slate-800 rounded-xl border-2 border-red-500/50 p-8 text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:"Game Error"}),l.jsx("p",{className:"text-slate-400 mb-6",children:"Something went wrong. An emergency backup of your save has been created."}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{onClick:this.handleReload,className:"w-full py-3 px-6 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg transition-colors",children:"Reload Game"}),n&&l.jsx("button",{onClick:this.handleRestoreBackup,className:"w-full py-3 px-6 bg-yellow-600 hover:bg-yellow-500 text-white font-bold rounded-lg transition-colors",children:"Restore Last Backup"})]}),this.state.error&&l.jsxs("details",{className:"mt-6 text-left",children:[l.jsx("summary",{className:"text-slate-500 cursor-pointer hover:text-slate-400",children:"Technical Details"}),l.jsxs("pre",{className:"mt-2 p-3 bg-slate-900 rounded text-xs text-red-400 overflow-auto max-h-40",children:[this.state.error.toString(),(s=this.state.errorInfo)==null?void 0:s.componentStack]})]})]})})}return this.props.children}}function qk(){return l.jsx(Xk,{children:l.jsx(rb,{children:l.jsx(Bk,{})})})}window.storage={async get(t){const e=localStorage.getItem(t);return e?{value:e}:null},async set(t,e){localStorage.setItem(t,e)},async remove(t){localStorage.removeItem(t)}};vc.createRoot(document.getElementById("root")).render(l.jsxs(dp.StrictMode,{children:[l.jsx(qk,{}),l.jsx(Xv,{})]}));export{Re as $,fx as A,pt as B,ot as C,pe as D,Y as E,Eg as F,ol as G,Jt as H,Og as I,Of as J,Qs as K,vw as L,se as M,Aw as N,ta as O,nt as P,ve as Q,Nu as R,Od as S,La as T,_u as U,Ww as V,Hf as W,Ql as X,Gf as Y,Zb as Z,_r as _,tx as a,Kb as a0,Lg as a1,px as a2,Z as a3,ue as a4,Qw as a5,kS as a6,xS as a7,$S as a8,US as a9,KS as aa,ZS as ab,JS as ac,jx as ad,t0 as ae,Jf as af,N0 as ag,ps as ah,t2 as ai,ge as aj,Fe as ak,vb as al,ys as am,I0 as an,Px as ao,es as b,t_ as c,pS as d,Xe as e,e0 as f,dS as g,Wi as h,oo as i,Id as j,ux as k,Ug as l,ts as m,ix as n,Xi as o,zS as p,VS as q,Rb as r,XS as s,QS as t,je as u,te as v,xe as w,yb as x,e_ as y,zt as z};
